"use strict";(self.webpackChunkhashicorp_aws=self.webpackChunkhashicorp_aws||[]).push([[6918],{2391:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var o=t(3860),i=t(5639);const r={sidebar_position:3,title:"Development"},l="Development",a={id:"machine-learning/development",title:"Development",description:"The following guide is intended to help developers who maintain or want to make changes to the hashicorp-aws's Machine",source:"@site/docs/machine-learning/development.md",sourceDirName:"machine-learning",slug:"/machine-learning/development",permalink:"/docs/machine-learning/development",draft:!1,unlisted:!1,editUrl:"https://github.com/QubitPi/hashistack/tree/master/docs/docs/machine-learning/development.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"Development"},sidebar:"tutorialSidebar",previous:{title:"Deployment via Screwdriver CD",permalink:"/docs/machine-learning/screwdriver-cd-deployment"},next:{title:"React App",permalink:"/docs/category/react-app"}},s={},c=[{value:"MLflow Docker",id:"mlflow-docker",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"development",children:"Development"}),"\n",(0,o.jsx)(n.p,{children:"The following guide is intended to help developers who maintain or want to make changes to the hashicorp-aws's Machine\nLearning deployment module"}),"\n",(0,o.jsx)(n.h2,{id:"mlflow-docker",children:"MLflow Docker"}),"\n",(0,o.jsxs)(n.p,{children:["The general flow of ML REST via MLflow is a general image will be built, then it's container spins up by mounting the\nmodel path and serving that model through a ",(0,o.jsx)(n.a,{href:"https://gunicorn.org/",children:"Gunicorn server"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"If the image build phase fails, we should look at its build logic by manually generataing its Dockerfile via"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-console",children:"mlflow models generate-dockerfile\n"})}),"\n",(0,o.jsx)(n.p,{children:"If it's a container runtime error, we should still generate the Dockerfile and look at its ENTRYPOINT for the command\nthat gives us the error. For example, the version 2.14.0 of mlflow has this ENTRYPOINT definition in its generated\nDockerfile:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-dockerfile",children:"$ mlflow models generate-dockerfile\n$ cat mlflow-dockerfile/Dockerfile\n\nENTRYPOINT [\"python\", \"-c\", \"from mlflow.models import container as C; C._install_pyfunc_deps('/opt/ml/model', install_mlflow=False, enable_mlserver=False, env_manager='virtualenv'); C._serve('virtualenv')\"]\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Essentially the container starts services with a\n",(0,o.jsx)(n.a,{href:"https://github.com/mlflow/mlflow/blob/master/mlflow/models/container/__init__.py",children:"MLflow object called container"}),". From\nthere we can get more info on what code was executed and errored."]})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},5639:(e,n,t)=>{t.d(n,{Z:()=>a,a:()=>l});var o=t(1733);const i={},r=o.createContext(i);function l(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);