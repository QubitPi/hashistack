<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://hashicorp-aws.com/blog</id>
    <title>hashicorp-aws Blog</title>
    <updated>2024-06-18T02:09:12.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://hashicorp-aws.com/blog"/>
    <subtitle>hashicorp-aws Blog</subtitle>
    <icon>https://hashicorp-aws.com/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[Testing HashiCorp Terraform]]></title>
        <id>https://hashicorp-aws.com/blog/testing-hashicorp-terraform</id>
        <link href="https://hashicorp-aws.com/blog/testing-hashicorp-terraform"/>
        <updated>2024-06-18T02:09:12.000Z</updated>
        <summary type="html"><![CDATA[[//]: # (Copyright Jiaqi Liu)]]></summary>
        <content type="html"><![CDATA[<p>How do we know if we can run <code>terraform apply</code> to our infrastructure without negatively affecting critical business
applications? We can run <code>terraform validate</code> and <code>terraform plan</code> to check our configuration, but will that be enough?
Whether we've updated some HashiCorp Terraform configuration or a new version of a module, we want to catch errors
quickly before we apply any changes to production infrastructure.</p>
<p>In this post, We will discuss some testing strategies for HashiCorp Terraform configuration and modules so that we can
<code>terraform apply</code> with greater confidence.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-testing-pyramid">The Testing Pyramid<a href="https://hashicorp-aws.com/blog/testing-hashicorp-terraform#the-testing-pyramid" class="hash-link" aria-label="Direct link to The Testing Pyramid" title="Direct link to The Testing Pyramid">​</a></h2>
<p>In theory, we might decide to align our infrastructure testing strategy with the test pyramid, which groups tests by
type, scope, and granularity. The testing pyramid suggests that we write fewer tests in the categories at the top of the
pyramid, and more at the bottom. Those on the pyramid take more time to run and cost more due to the higher number of
resources we have to configure and create.</p>
<p><img loading="lazy" alt="Error loading pyramid.png" src="https://hashicorp-aws.com/assets/images/pyramid-c61e3ecc738268f3a07cbcf4faeea8a5.png" width="3840" height="2470" class="img_ev3q"></p>
<p>In reality, our tests may not perfectly align with the pyramid shape. The pyramid offers a common framework to describe
what scope a test can cover to verify configuration and infrastructure resources. We'll start at the bottom of the
pyramid with unit tests and work the way up the pyramid to end-to-end tests.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>hashicorp-aws does not merit any manual testing; so it is not discussed here</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="linting-and-formatting">Linting and Formatting<a href="https://hashicorp-aws.com/blog/testing-hashicorp-terraform#linting-and-formatting" class="hash-link" aria-label="Direct link to Linting and Formatting" title="Direct link to Linting and Formatting">​</a></h2>
<p>While not on the test pyramid, we often encounter tests to verify the hygiene of your Terraform configuration. Use
<code>terraform fmt -check</code> and terraform validate to format and validate the correctness of our Terraform configuration.</p>
<p>When we collaborate on Terraform, we may consider testing the Terraform configuration for a set of standards and best
practices. Build or use a linting tool to analyze our Terraform configuration for specific best practices and patterns.
For example, a linter can verify that our teammate defines a Terraform variable for an instance type instead of
hard-coding the value.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="unit-tests">Unit Tests<a href="https://hashicorp-aws.com/blog/testing-hashicorp-terraform#unit-tests" class="hash-link" aria-label="Direct link to Unit Tests" title="Direct link to Unit Tests">​</a></h2>
<p>At the bottom of the pyramid, unit tests verify individual resources and configurations for expected values. They should
answer the question, “Does my configuration or plan contain the correct metadata?” Traditionally, unit tests should run
independently, without external resources or API calls.</p>]]></content>
        <author>
            <name>ROSEMARY WANG</name>
            <uri>https://www.hashicorp.com/blog/testing-hashicorp-terraform</uri>
        </author>
        <category label="HashiCorp" term="HashiCorp"/>
        <category label="Terraform" term="Terraform"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Bumping Semantic Version by GitHub Tag]]></title>
        <id>https://hashicorp-aws.com/blog/version-bump</id>
        <link href="https://hashicorp-aws.com/blog/version-bump"/>
        <updated>2024-04-19T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[[//]: # (Copyright Jiaqi Liu)]]></summary>
        <content type="html"><![CDATA[<p>We offer a convenient versioning management approach for releasing software on GitHub.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>The GitHub repository must grant <em>write</em> access to this workflow permission, i.e. navigate to <strong>Settings</strong> -&gt;
<strong>Actions</strong> -&gt; <strong>General</strong>; under <em>Workflow permissions</em> make sure <strong>Read and write permissions</strong> is checked:</p><p><img loading="lazy" alt="Error loading permissions.png" src="https://hashicorp-aws.com/assets/images/permission-9df4c3b51745dedb36834b4434be2bc4.png" width="3584" height="2763" class="img_ev3q"></p></div></div>
<ol>
<li>
<p>Manually create the first tag:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> tag </span><span class="token parameter variable" style="color:#36acaa">-a</span><span class="token plain"> v0.0.1 </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"v0.0.1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> push origin v0.0.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create a pull request that adds the following job to GitHub Action</p>
</li>
</ol>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">"on"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push-release-tag</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> github.ref == 'refs/heads/master'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> QubitPi/hashicorp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">aws/.github/workflows/version</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">bump.yml@master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> QubitPi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">email</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jack20220723@gmail.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>When the pull request is merged, the version bump action will automatically create and push a new version tag of
<code>MAJOR</code>.<code>MINOR</code>.(<code>PATCH</code> + 1)</li>
</ol>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Bumping the <code>MAJOR</code> or <code>MINOR</code> version still needs to be done manually using <code>git tag -a vx.x.x -m "vx.x.x"</code> command
given the assumption that agile software development will change patch version most frequently and almost always</p></div></div>]]></content>
        <author>
            <name>Jiaqi Liu</name>
            <uri>https://github.com/QubitPi</uri>
        </author>
        <category label="CI/CD" term="CI/CD"/>
        <category label="GitHub" term="GitHub"/>
        <category label="Frontend" term="Frontend"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Cypress E2E Tests]]></title>
        <id>https://hashicorp-aws.com/blog/cypress-e2e</id>
        <link href="https://hashicorp-aws.com/blog/cypress-e2e"/>
        <updated>2024-04-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[This action assumes the yarn package manager is used.]]></summary>
        <content type="html"><![CDATA[<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>This action assumes the <a href="https://yarnpkg.com/" target="_blank" rel="noopener noreferrer">yarn package manager</a> is used.</p></div></div>
<p>Cypress E2E action offers an easy way to automate, customize, and execute <strong>parallel</strong> end-to-end tests. The action
provides</p>
<ul>
<li>dependency installation via <strong>yarn</strong>,</li>
<li>scanning of test specs,</li>
<li>running each spec in parallel, and</li>
<li>upload test screenshots and video on test failure.</li>
</ul>
<p>The example below is a very simple setup:</p>
<ol>
<li>
<p>Install Cypress with <code>yarn add cypress --dev</code></p>
</li>
<li>
<p>Initialize Cypress with <code>yarn run cypress open</code></p>
</li>
<li>
<p><a href="https://qubitpi.github.io/cypress-documentation/guides/tooling/typescript-support/" target="_blank" rel="noopener noreferrer">Support TypeScript</a></p>
</li>
<li>
<p>Put all <strong>.spec.cy.ts</strong> test files under "cypress/e2e" directory</p>
</li>
<li>
<p>Install <a href="https://www.npmjs.com/package/wait-on" target="_blank" rel="noopener noreferrer">wait-on</a>: <code>yarn add -D wait-on</code></p>
</li>
<li>
<p>Add the following script command to <code>package.json</code>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"scripts"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"e2e"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"cypress run --browser chrome"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"wait-on-dev"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"wait-on http-get://localhost:3000/"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"wait-on-prod"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"wait-on http-get://localhost:3000/"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Note that we assume the UI is running at port 3000. Please adjust it accordingly if it's running at a different port.</p></div></div>
</li>
<li>
<p>Use Cypress E2E Tests workflow:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CI/CD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">"on"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">e2e-tests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Unit Tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">needs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> unit</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> QubitPi/hashicorp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">aws/.github/workflows/cypress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">e2e.yml@master</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the example above, the node 18 is used in the CI/CDed project by default. A list of custom node versions can be
used to replace the default. For example, to run E2E tests in node 16, 18, and 20, simply use <strong>node-versions</strong>
parameter:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">e2e-tests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Unit Tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">needs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> unit</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> QubitPi/hashicorp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">aws/.github/workflows/cypress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">e2e.yml@master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">node-versions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'["16", "18", "20"]'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Inside the <code>cypress-e2e</code> workflow, each [Cypress spec] is tested in 2 modes:</p><ol>
<li><strong>yarn-start</strong>: the web app is started using <code>yarn start</code></li>
<li><strong>server</strong>: a production build is generated first using <code>yarn build</code> and then the web app is started with
<code>yarn serve</code></li>
</ol><p>The reason we run the same E2E in 2 separate modes is that we assume E2E testing consists of 2 logical parts:</p><ol>
<li>The logical tests defined by Cypress spec files</li>
<li>The same tests in the context of integration of web app logic and the production runtime github-actions-core</li>
</ol><p>The app may work perfectly fine in E2E, but it's a different question when the same app is packaged up using,
for example, <a href="https://webpack.js.org/" target="_blank" rel="noopener noreferrer">webpack</a>. The later could also be interpreted as integration tests against
webpack configuration which makes the tests more comprehensive</p></div></div>]]></content>
        <author>
            <name>Jiaqi Liu</name>
            <uri>https://github.com/QubitPi</uri>
        </author>
        <category label="CI/CD" term="CI/CD"/>
        <category label="GitHub" term="GitHub"/>
        <category label="Frontend" term="Frontend"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Setting up JDK in GitHub Actions]]></title>
        <id>https://hashicorp-aws.com/blog/jdk-setup</id>
        <link href="https://hashicorp-aws.com/blog/jdk-setup"/>
        <updated>2024-04-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[[//]: # (Copyright Jiaqi Liu)]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installing-jdk-17">Installing JDK 17<a href="https://hashicorp-aws.com/blog/jdk-setup#installing-jdk-17" class="hash-link" aria-label="Direct link to Installing JDK 17" title="Direct link to Installing JDK 17">​</a></h2>
<p>The standard <a href="https://github.com/actions/setup-java" target="_blank" rel="noopener noreferrer">actions/setup-java</a> requires us to specify JDK distributions other
than JDK version. Looking up JDK distributions wastes user's time and gives opportunities to error.</p>
<p>We offer a no-config action that installs JDK 17 by default. The usage is as follows:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CI/CD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">"on"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Set up JDK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> QubitPi/hashicorp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">aws/.github/actions/jdk</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">setup@master</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>Jiaqi Liu</name>
            <uri>https://github.com/QubitPi</uri>
        </author>
        <category label="CI/CD" term="CI/CD"/>
        <category label="GitHub" term="GitHub"/>
        <category label="Backend" term="Backend"/>
        <category label="Java" term="Java"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[NPM Release action]]></title>
        <id>https://hashicorp-aws.com/blog/npm-release</id>
        <link href="https://hashicorp-aws.com/blog/npm-release"/>
        <updated>2024-04-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[This action works for both [npm] and [yarn] package managers]]></summary>
        <content type="html"><![CDATA[<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>This action works for both <a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer">npm</a> and <a href="https://yarnpkg.com/" target="_blank" rel="noopener noreferrer">yarn</a> package managers</p></div></div>
<p>The NPM release action bundles up a React/Vue package and publishes it to <a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer">npm registry</a>.</p>
<p>To use the release action,
<a href="https://docs.github.com/en/actions/security-guides/using-secrets-in-github-actions#creating-secrets-for-a-repository" target="_blank" rel="noopener noreferrer">create a GitHub Secret</a>
for <a href="https://docs.npmjs.com/creating-and-viewing-access-tokens" target="_blank" rel="noopener noreferrer">npm token</a>, which will be used to authenticate against
NPM in the action. Then use the following template in CI/CD:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CI/CD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">"on"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">NODE_VERSION</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">publish</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Publish Package to NPM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> github.ref == 'refs/heads/master'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> QubitPi/hashicorp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">aws/.github/actions/npm</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">release.yml@master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">node-version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> env.NODE_VERSION </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">npm-token</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> env.NPM_TOKEN </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Qubitpi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">email</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jack20220723@gmail.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>Jiaqi Liu</name>
            <uri>https://github.com/QubitPi</uri>
        </author>
        <category label="CI/CD" term="CI/CD"/>
        <category label="GitHub" term="GitHub"/>
        <category label="Frontend" term="Frontend"/>
        <category label="NPM" term="NPM"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[UI Unit Test]]></title>
        <id>https://hashicorp-aws.com/blog/ui-unit-test</id>
        <link href="https://hashicorp-aws.com/blog/ui-unit-test"/>
        <updated>2024-04-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[[//]: # (Copyright Jiaqi Liu)]]></summary>
        <content type="html"><![CDATA[<p>The UI unit test action runs unit tests and assumes the <strong>yarn</strong> package manager and requires a <code>test</code> script to be
defined in projects <code>package.json</code> file. For example, the following uses <a href="https://jestjs.io/" target="_blank" rel="noopener noreferrer">Jest</a> as the unit test runner:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"scripts"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"test"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"jest"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To use this action, import it in the following way:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CI/CD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">"on"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">unit-tests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Unit Tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> QubitPi/hashicorp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">aws/.github/workflows/ui</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">unit</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">test.yml@master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">node-version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>In the example above, the node 18 is used in the CI/CDed project.</p></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>The example above uses Node version 18, which is specified in <code>NODE_VERSION</code>
<a href="https://docs.github.com/en/actions/learn-github-actions/variables#defining-environment-variables-for-a-single-workflow" target="_blank" rel="noopener noreferrer">environment variable</a></p></div></div>]]></content>
        <author>
            <name>Jiaqi Liu</name>
            <uri>https://github.com/QubitPi</uri>
        </author>
        <category label="CI/CD" term="CI/CD"/>
        <category label="GitHub" term="GitHub"/>
        <category label="Frontend" term="Frontend"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[UI Code Style]]></title>
        <id>https://hashicorp-aws.com/blog/ui-code-style</id>
        <link href="https://hashicorp-aws.com/blog/ui-code-style"/>
        <updated>2024-04-13T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[[//]: # (Copyright Jiaqi Liu)]]></summary>
        <content type="html"><![CDATA[<p>In Frontend dev realm, there are lots of code style checker. Assembling all of them together takes efforts and pains.
This action runs the following two code style checker specifically for frontend dev:</p>
<ol>
<li><a href="https://prettier.io/" target="_blank" rel="noopener noreferrer">Prettier</a></li>
<li><a href="https://eslint.org/" target="_blank" rel="noopener noreferrer">ESLint</a></li>
</ol>
<p>This action assume <a href="https://eslint.org/" target="_blank" rel="noopener noreferrer">ESLint</a>, <a href="https://typescript-eslint.io/" target="_blank" rel="noopener noreferrer">typescript-eslint</a>, and <a href="https://prettier.io/" target="_blank" rel="noopener noreferrer">Prettier</a> have been installed, which can be done with:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--dev</span><span class="token plain"> @typescript-eslint/parser @typescript-eslint/eslint-plugin eslint typescript</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--dev</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--exact</span><span class="token plain"> prettier</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here is an example usage of the action:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CI/CD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">"on"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">code-style</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> React &amp; TS Code Style Check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> QubitPi/hashicorp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">aws/.github/workflows/ui</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">code</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">style.yml@master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">node-version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>In the example above, the node 18 is used in the CI/CDed project.</p></div></div>
<p>The configurations of Prettier and ESLint can be done regularly by following their respective documentations. For
example, the <a href="https://qubitpi.github.io/prettier/docs/en/configuration" target="_blank" rel="noopener noreferrer">.prettierrc.json</a> and
<a href="https://qubitpi.github.io/prettier/docs/en/ignore.html" target="_blank" rel="noopener noreferrer">.prettierignore</a> can be placed at the project root with the
following contents:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">.prettierrc.json</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"tabWidth"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"useTabs"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"printWidth"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">120</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-ignore codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">.prettierignore</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ignore codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">*.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*.mdx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">coverage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node_modules</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>We can fix it by formatting all files at the root of project with:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> prettier </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--write</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<p>Initial ESLint configuration template can be generated with</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> run eslint </span><span class="token parameter variable" style="color:#36acaa">--init</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># https://dev.to/maithanhdanh/configuration-for-eslint-b47</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Prettier &amp; ESLint Conflict</div><div class="admonitionContent_BuS1"><p>Linters usually contain not only code quality rules, but also stylistic rules. Most stylistic rules are unnecessary
when using Prettier, but worse - they might conflict with Prettier! Use Prettier for code formatting concerns, and
linters for code-quality concerns, as outlined in
<a href="https://qubitpi.github.io/prettier/docs/en/comparison" target="_blank" rel="noopener noreferrer">Prettier vs. Linters</a>.</p><p>Luckily it's easy to turn off rules that conflict or are unnecessary with Prettier, by using these pre-made configs:</p><ul>
<li><a href="https://github.com/prettier/eslint-config-prettier" target="_blank" rel="noopener noreferrer">eslint-config-prettier</a></li>
</ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--dev</span><span class="token plain"> eslint-config-prettier</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>]]></content>
        <author>
            <name>Jiaqi Liu</name>
            <uri>https://github.com/QubitPi</uri>
        </author>
        <category label="CI/CD" term="CI/CD"/>
        <category label="GitHub" term="GitHub"/>
        <category label="Frontend" term="Frontend"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Performing Style Check on YAML & Markdown Files and Link Check]]></title>
        <id>https://hashicorp-aws.com/blog/yml-and-md-style-checks</id>
        <link href="https://hashicorp-aws.com/blog/yml-and-md-style-checks"/>
        <updated>2024-04-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[[//]: # (Copyright Jiaqi Liu)]]></summary>
        <content type="html"><![CDATA[<p>Inspired by <a href="https://github.com/sous-chefs/.github/blob/main/.github/workflows/lint-unit.yml" target="_blank" rel="noopener noreferrer">Sous Chefs</a>, hashicorp-aws
offers a <a href="https://docs.github.com/en/actions/using-workflows/reusing-workflows" target="_blank" rel="noopener noreferrer">reusable workflow</a> that performs the
following code style checks:</p>
<ol>
<li><a href="https://github.com/actionshub/yamllint" target="_blank" rel="noopener noreferrer">YAML file style check</a></li>
<li><a href="https://github.com/actionshub/markdownlint" target="_blank" rel="noopener noreferrer">Markdown file style check</a></li>
<li><a href="https://github.com/lycheeverse/lychee-action" target="_blank" rel="noopener noreferrer">Broken link check</a></li>
</ol>
<p>Example Usage:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CI/CD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">"on"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">yml-md-style-and-link-checks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> QubitPi/hashicorp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">aws/.github/workflows/yml</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">md</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">style</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">and</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">link</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">checks.yml@master</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>The example above is all we need to run the 3 checks. The workflow has default configurations, which can be
<a href="https://hashicorp-aws.com/blog/yml-and-md-style-checks#optional-overriding-default-configurations">overridden</a></p><p>The configurations of the composing checks can be configured regularly by following their respective GitHub Actions
documentations. The following sections discusses the configuration by example.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="optional-overriding-default-configurations">(Optional) Overriding Default Configurations<a href="https://hashicorp-aws.com/blog/yml-and-md-style-checks#optional-overriding-default-configurations" class="hash-link" aria-label="Direct link to (Optional) Overriding Default Configurations" title="Direct link to (Optional) Overriding Default Configurations">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="yaml-file-style-check">YAML File Style Check<a href="https://hashicorp-aws.com/blog/yml-and-md-style-checks#yaml-file-style-check" class="hash-link" aria-label="Direct link to YAML File Style Check" title="Direct link to YAML File Style Check">​</a></h3>
<p>The default YAML style configurations is</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">extends</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">line-length</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">max</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">256</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">level</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> warning</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">document-start</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> disable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">braces</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">forbid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">min-spaces-inside</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">max-spaces-inside</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">min-spaces-inside-empty</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">max-spaces-inside-empty</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To override the default configuration, create a file named <strong>.yamllint</strong> at the root of the downstream project and
configure the workflow with <code>use-custom-yamllint-config-file</code> option set to <code>true</code>. For example</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CI/CD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">"on"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">yml-md-style-and-link-checks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> QubitPi/hashicorp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">aws/.github/workflows/yml</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">md</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">style</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">and</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">link</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">checks.yml@master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">use-custom-yamllint-config-file</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>More configuration options can be found at <a href="https://yamllint.readthedocs.io/en/stable/" target="_blank" rel="noopener noreferrer">yamllint documentation</a></p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="markdown-file-style-check">Markdown File Style Check<a href="https://hashicorp-aws.com/blog/yml-and-md-style-checks#markdown-file-style-check" class="hash-link" aria-label="Direct link to Markdown File Style Check" title="Direct link to Markdown File Style Check">​</a></h3>
<p>The configurations of markdown file style check are splitted into 2 config files whose default configurations
are</p>
<!-- -->
<!-- -->
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">.mdlrc</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">markdownlint.rb</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rules "~MD002", "~MD003", "~MD005", "~MD007", "~MD013", "~MD022", "~MD024", "~MD029", "~MD033", "~MD034", "~MD036", "~MD041"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">style "#{File.dirname(__FILE__)}/markdownlint.rb"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>In the example above, the first line above <em>excludes</em>
<a href="https://github.com/markdownlint/markdownlint/blob/main/docs/RULES.md" target="_blank" rel="noopener noreferrer">specified rules</a>. The second line specifies the
rule configuration file (<code>markdownlint.rb</code>). For more native config options, please refer to
<a href="https://github.com/markdownlint/markdownlint/blob/main/docs/configuration.md" target="_blank" rel="noopener noreferrer">its documentations</a></p></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>We may need to adjust certain settings of some single rule by having another file named <code>markdownlint.rb</code>:</p><div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rule 'MD003', style: :setext_with_atx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rule 'MD004', style: :sublist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rule 'MD013', line_length: 120</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rule 'MD029', style: :ordered</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>More info about rule config can be found in
<a href="https://github.com/markdownlint/markdownlint/blob/main/docs/creating_rules.md" target="_blank" rel="noopener noreferrer">its documentation</a> and
<a href="https://github.com/markdownlint/markdownlint/blob/main/docs/RULES.md" target="_blank" rel="noopener noreferrer">its comprehensive rule list</a></p></div></div></div></div></div>
<p>Create files named <code>.mdlrc</code> and <code>markdownlint.rb</code> at the root of the project and add <code>use-custom-mdlrc-config-file</code> and
<code>use-custom-markdownlint-config-file</code> options to the workflow file like so:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CI/CD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">"on"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">yml-md-style-and-link-checks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> QubitPi/hashicorp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">aws/.github/workflows/yml</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">md</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">style</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">and</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">link</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">checks.yml@master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">use-custom-mdlrc-config-file</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">use-custom-markdownlint-config-file</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="broken-link-check">Broken Link Check<a href="https://hashicorp-aws.com/blog/yml-and-md-style-checks#broken-link-check" class="hash-link" aria-label="Direct link to Broken Link Check" title="Direct link to Broken Link Check">​</a></h3>
<p>The <a href="https://github.com/lycheeverse/lychee-action" target="_blank" rel="noopener noreferrer">Broken link check</a> pretty much configures everything for us, so we don't need to configure anything unless we
need to exclude
<a href="https://github.com/lycheeverse/lychee-action#excluding-links-from-getting-checked" target="_blank" rel="noopener noreferrer">links</a> or
<a href="https://github.com/lycheeverse/lychee-action" target="_blank" rel="noopener noreferrer">file</a> by regular expression. hashicorp-aws defaults to exclude all
relative file links with the following default:</p>
<div class="language-ignore codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">.lycheeignore</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ignore codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">file:///*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The ignore rule in the example above skips checks of all relative links among files. This is common in
<a href="https://docusaurus.io/docs/markdown-features/links" target="_blank" rel="noopener noreferrer">Docusaurus</a>-based documentation</p></div></div>
<p>If we don't need such default, we would simply create a <code>.lycheeignore</code> file at our project root and setting
<code>use-custom-lycheeignore-file</code> to <code>true</code>:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CI/CD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">"on"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">yml-md-style-and-link-checks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> QubitPi/hashicorp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">aws/.github/workflows/yml</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">md</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">style</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">and</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">link</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">checks.yml@master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">use-custom-lycheeignore-file</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>Jiaqi Liu</name>
            <uri>https://github.com/QubitPi</uri>
        </author>
        <category label="CI/CD" term="CI/CD"/>
        <category label="GitHub" term="GitHub"/>
        <category label="Code Style" term="Code Style"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Reusable GitHub Action - Posting GitHub Secrets]]></title>
        <id>https://hashicorp-aws.com/blog/github-secret-action</id>
        <link href="https://hashicorp-aws.com/blog/github-secret-action"/>
        <updated>2024-02-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[[//]: # (Copyright Jiaqi Liu)]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="https://hashicorp-aws.com/blog/github-secret-action#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>Being a strong proponent of Immutable Infrastructure, <a href="https://qubitpi.github.io/hashicorp-aws/" target="_blank" rel="noopener noreferrer">hashicorp-aws</a> is constantly pushing the limits of its ability
in various use cases, one of which is the <em>Configuration Management</em></p>
<p>Traditional configuration management includes Chef, Puppet, and Ansible. They all assume mutable infrastructure being
present. For example, Chef has a major component responsible for jumping into a VM, checking if config has been mutated
before apply any operations.</p>
<p>With the adoption of Immutable infrastructure, we initially stored and managed our configuration, such as SSL
certificate or AWS SECRET ACCESS KEY directly in GitHub Secrets. This has the disadvantage of not being able to see
their values after creation, making it very hard to manage.</p>
<p>Then we moved to a centralized runbook, where everything can easily be seen and modified by authorized team members. In
this approache, CI/CD server will pull down the entire runbook and simply pick up the config files. This, however,
exposed a great security risk because illegal usage could simply leak any credentials to public by <code>cat</code>ing that
credential file out</p>
<p>So the problem, or what <a href="https://qubitpi.github.io/hashicorp-aws/" target="_blank" rel="noopener noreferrer">hashicorp-aws</a> is trying to solve here, is</p>
<ul>
<li>being able to keep credentials, whether it's string values or values stored in files, <strong>secure</strong>, and</li>
<li>allowing team member to easily <strong>manage</strong> those credentials</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>We tried HashiCorp Vault but
<a href="https://discuss.hashicorp.com/t/how-to-store-a-file-content-in-hashicorp-kv-secret-engine-as-value-through-cmd-line-or-script/46895/2" target="_blank" rel="noopener noreferrer">it doesn't support storing file credential</a>,
<a href="https://qubitpi.github.io/hashicorp-aws/" target="_blank" rel="noopener noreferrer">hashicorp-aws</a> addressed exactly how file can be managed in this case</p></div></div>
<p>So this brought us to the alternative way of thinking about Configuration Management in Immutable Infrastructure, which
is depicted below:</p>
<p><img loading="lazy" src="https://hashicorp-aws.com/assets/images/github-secret-8df7f31de85271fd5bf4418718da1fae.png" width="1322" height="662" class="img_ev3q"></p>
<p>We still need GitHub Secrets because our tech dev has a deep integratin with it and that's the most secure way to pass
our organization credentials around.</p>
<p>In addition, we will also keep runbook for config management. The runbook will be hosted separately, not in GitHub
Secrets.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Runbooks was used in Yahoo that keeps all DevOps credentials in a dedicated GitHub private repo. It's been proven to
be an effective way to manage and share a software configurations within a team.</p></div></div>
<p><a href="https://qubitpi.github.io/hashicorp-aws/" target="_blank" rel="noopener noreferrer">hashicorp-aws</a>'s github-secret now comes into play to bridge the gap between two componet.</p>]]></content>
        <author>
            <name>Jiaqi Liu</name>
            <uri>https://github.com/QubitPi</uri>
        </author>
        <category label="CI/CD" term="CI/CD"/>
        <category label="GitHub" term="GitHub"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Sending GitHub Action Results to Slack Channel]]></title>
        <id>https://hashicorp-aws.com/blog/github-slack-notification</id>
        <link href="https://hashicorp-aws.com/blog/github-slack-notification"/>
        <updated>2024-01-27T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[[//]: # (Copyright Jiaqi Liu)]]></summary>
        <content type="html"><![CDATA[<p>Sending data into Slack using <a href="https://github.com/marketplace/actions/slack-send" target="_blank" rel="noopener noreferrer">slack-send</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="slack-send">slack-send<a href="https://hashicorp-aws.com/blog/github-slack-notification#slack-send" class="hash-link" aria-label="Direct link to slack-send" title="Direct link to slack-send">​</a></h2>
<p>This post discusses practical guide for sending data to Slack via a <strong>Slack Incoming Webhook URL</strong>. The reason we prefer
webhook approach is to preserve the privacy of team member. The chatbot invite approach potentially
allow all Slack member to touch a private app of an individual</p>
<ol>
<li>
<p>Follow the <a href="https://github.com/slackapi/slack-github-action?tab=readme-ov-file#setup-2" target="_blank" rel="noopener noreferrer">setup</a></p>
</li>
<li>
<p>Add <code>slack-notification</code> job and a trigger in the last CI/CD job:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> My CI/CD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">the-last-job</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> The last CI/CD job in workflow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">outputs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">outcome</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> job.status </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">continue-on-error</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">slack-notification</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Send Slack Notification</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> always() </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">needs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> the</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">last</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">job</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> QubitPi/hashicorp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">aws/.github/workflows/slack</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">notification.yml@master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">job-status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> needs.the</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">last</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">job.outputs.outcome </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">secrets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">slack-webhook-url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.SLACK_WEBHOOK_URL </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Note the key block in <code>the-last-job</code>:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">outputs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">outcome</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> job.status </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">continue-on-error</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="multi-terminal-job-configuration">Multi-Terminal-Job Configuration<a href="https://hashicorp-aws.com/blog/github-slack-notification#multi-terminal-job-configuration" class="hash-link" aria-label="Direct link to Multi-Terminal-Job Configuration" title="Direct link to Multi-Terminal-Job Configuration">​</a></h3>
<p>The config above applies to the case with a single last job. We call this job "terminal job". The configuration becomes
a little different when there are multiple terminal jobs such as the one workflow in the figure below:</p>
<p><img loading="lazy" alt="Error loading slack-notification-multi-terminal-jobs.png" src="https://hashicorp-aws.com/assets/images/slack-notification-multi-terminal-jobs-d3c5acd6074cf4be75f50e7f89e55eb6.png" width="1200" height="540" class="img_ev3q"></p>
<p>In this case we change the <code>job-status</code> input of <code>slack-notification</code>:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> My CI/CD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">terminal-job-a</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Terminal Job A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">outputs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">outcome</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> job.status </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">continue-on-error</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">terminal-job-b</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Terminal Job B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">outputs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">outcome</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> job.status </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">continue-on-error</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">slack-notification</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Send Slack Notification</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> always() </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">needs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">terminal</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">job</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> terminal</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">job</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">b</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> QubitPi/hashicorp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">aws/.github/workflows/slack</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">notification.yml@master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">job-status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> (needs.terminal</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">job</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">a.outputs.outcome == 'success' </span><span class="token important">&amp;&amp;</span><span class="token plain"> needs.terminal</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">job</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">b.outputs.outcome == 'success') </span><span class="token important">&amp;&amp;</span><span class="token plain"> 'success' </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> 'failure' </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">secrets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">slack-webhook-url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.SLACK_WEBHOOK_URL </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note we are using the <a href="https://7tonshark.com/posts/github-actions-ternary-operator/" target="_blank" rel="noopener noreferrer">ternary expression in GitHub Actions</a> for the value of <code>job-status</code> above.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="slack-send-vs-github-slack-integration">slack-send v.s. Github Slack Integration<a href="https://hashicorp-aws.com/blog/github-slack-notification#slack-send-vs-github-slack-integration" class="hash-link" aria-label="Direct link to slack-send v.s. Github Slack Integration" title="Direct link to slack-send v.s. Github Slack Integration">​</a></h2>
<p><a href="https://github.com/integrations/slack" target="_blank" rel="noopener noreferrer">Github Slack Integration</a> offers "on-click" experience with almost no configurations like the one above. In addition,
it sends notification on GitHub issues open/close, pull requests, GitHub Action workflow <em>status</em>, etc. The easier setup
and richer notifications makes <a href="https://github.com/integrations/slack" target="_blank" rel="noopener noreferrer">Github Slack Integration</a> a better choice for team-collaboration managing multiple
repositories with a common communication standards</p>
<p>slack-send, on the other hands, supports sending any information about GitHub Action workflow, not just <em>status</em>. It
also supports custom messages; we can inject emoji or custom pictures in the notification messges, which is a big plus
for those who love personal customizations and focuses on only success-or-fail of each GitHub action run.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>With slack-send we also do not need to run <code>/invite @GitHub</code> so our channel is completely private.</p></div></div>]]></content>
        <author>
            <name>Jiaqi Liu</name>
            <uri>https://github.com/QubitPi</uri>
        </author>
        <category label="CI/CD" term="CI/CD"/>
        <category label="Slack" term="Slack"/>
        <category label="Team Efficiency" term="Team Efficiency"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Using a GitHub Action Matrix to Define Variations for Each Job]]></title>
        <id>https://hashicorp-aws.com/blog/github-matrix</id>
        <link href="https://hashicorp-aws.com/blog/github-matrix"/>
        <updated>2023-11-24T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[[//]: # (Copyright Jiaqi Liu)]]></summary>
        <content type="html"><![CDATA[<p>A matrix strategy lets you use variables in a single job definition to automatically create multiple job runs that are
based on the combinations of the variables. For example, you can use a matrix strategy to test your code in multiple
versions of a language or on multiple operating systems.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-a-matrix-strategy">Using a Matrix Strategy<a href="https://hashicorp-aws.com/blog/github-matrix#using-a-matrix-strategy" class="hash-link" aria-label="Direct link to Using a Matrix Strategy" title="Direct link to Using a Matrix Strategy">​</a></h2>
<p>Use <code>jobs.&lt;job_id&gt;.strategy.matrix</code> to define a matrix of different job configurations. Within your matrix, define one
or more variables followed by an array of values. For example, the following matrix has a variable called <code>version</code> with
the value <code>[10, 12, 14]</code> and a variable called os with the value <code>[ubuntu-latest, windows-latest]</code>:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">example_matrix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">strategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">matrix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">os</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> windows</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>A job will run for each possible combination of the variables. In this example, the workflow will run six jobs, one for
each combination of the <code>os</code> and <code>version</code> variables.</p>
<p>By default, GitHub will maximize the number of jobs run in parallel depending on runner availability. The <strong>order of the
variables in the matrix determines the order in which the jobs are created</strong>. The first variable you define will be the
first job that is created in your workflow run. For example, the above matrix will create the jobs in the following
order:</p>
<ul>
<li><code>{version: 10, os: ubuntu-latest}</code></li>
<li><code>{version: 10, os: windows-latest}</code></li>
<li><code>{version: 12, os: ubuntu-latest}</code></li>
<li><code>{version: 12, os: windows-latest}</code></li>
<li><code>{version: 14, os: ubuntu-latest}</code></li>
<li><code>{version: 14, os: windows-latest}</code></li>
</ul>
<p>A matrix will generate a maximum of <strong>256</strong> jobs per workflow run. This limit applies to both GitHub-hosted and
self-hosted runners.</p>
<p>The variables that you define become properties in the matrix context, and you can reference the property in other areas
of your workflow file. In this example, you can use <code>matrix.version</code> and <code>matrix.os</code> to access the current value of
version and os that the job is using. For more information, see "<a href="https://docs.github.com/en/actions/learn-github-actions/contexts" target="_blank" rel="noopener noreferrer">Contexts</a>."</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-using-a-single-dimension-matrix">Example: Using a Single-Dimension Matrix<a href="https://hashicorp-aws.com/blog/github-matrix#example-using-a-single-dimension-matrix" class="hash-link" aria-label="Direct link to Example: Using a Single-Dimension Matrix" title="Direct link to Example: Using a Single-Dimension Matrix">​</a></h2>
<p>You can specify a single variable to create a single-dimension matrix.</p>
<p>For example, the following workflow defines the variable version with the values <code>[10, 12, 14]</code>. The workflow will run
three jobs, one for each value in the variable. Each job will access the version value through the <code>matrix.version</code>
context and pass the value as <code>node-version</code> to the actions/setup-node action.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-using-a-multi-dimension-matrix">Example: Using a Multi-dimension Matrix<a href="https://hashicorp-aws.com/blog/github-matrix#example-using-a-multi-dimension-matrix" class="hash-link" aria-label="Direct link to Example: Using a Multi-dimension Matrix" title="Direct link to Example: Using a Multi-dimension Matrix">​</a></h2>
<p>You can specify multiple variables to create a multi-dimensional matrix. A job will run for each possible combination of
the variables.</p>
<p>For example, the following workflow specifies two variables:</p>
<ul>
<li>Two operating systems specified in the <code>os</code> variable</li>
<li>Three Node.js versions specified in the <code>version</code> variable</li>
</ul>
<p>The workflow will run six jobs, one for each combination of the <code>os</code> and <code>version</code> variables. Each job will set the
<code>runs-on</code> value to the current <code>os</code> value and will pass the current version value to the <code>actions/setup-node</code> action.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">example_matrix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">strategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">matrix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">os</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">22.04</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">20.04</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> matrix.os </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/setup</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">node@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">node-version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> matrix.version </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-using-contexts-to-create-matrices">Example: Using Contexts to Create Matrices<a href="https://hashicorp-aws.com/blog/github-matrix#example-using-contexts-to-create-matrices" class="hash-link" aria-label="Direct link to Example: Using Contexts to Create Matrices" title="Direct link to Example: Using Contexts to Create Matrices">​</a></h2>
<p>You can use contexts to create matrices. For more information about contexts, see "<a href="https://docs.github.com/en/actions/learn-github-actions/contexts" target="_blank" rel="noopener noreferrer">Contexts</a>."</p>
<p>For example, the following workflow triggers on the <code>repository_dispatch</code> event and uses information from the event
payload to build the matrix. When a repository dispatch event is created with a payload like the one below, the matrix
<code>version</code> variable will have a value of <code>[12, 14, 16]</code>. For more information about the <code>repository_dispatch</code> trigger,
see "<a href="https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#repository_dispatch" target="_blank" rel="noopener noreferrer">Events that trigger workflows</a>."</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"event_type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"test"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"client_payload"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"versions"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">repository_dispatch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">types</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">example_matrix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">strategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">matrix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> github.event.client_payload.versions </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/setup</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">node@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">node-version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> matrix.version </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="expanding-or-adding-matrix-configurations">Expanding or adding matrix configurations<a href="https://hashicorp-aws.com/blog/github-matrix#expanding-or-adding-matrix-configurations" class="hash-link" aria-label="Direct link to Expanding or adding matrix configurations" title="Direct link to Expanding or adding matrix configurations">​</a></h2>
<p>Use <code>jobs.&lt;job_id&gt;.strategy.matrix.include</code> to expand existing matrix configurations or to add new configurations. The
value of include is a list of objects.</p>
<p>For each object in the <code>include</code> list, the key<!-- -->:value<!-- --> pairs in the object will be added to each of the matrix
combinations if none of the key<!-- -->:value<!-- --> pairs overwrite any of the original matrix values. If the object cannot be added
to any of the matrix combinations, a new matrix combination will be created instead. Note that the original matrix
values will not be overwritten, but added matrix values can be overwritten.</p>
<p>For example, this matrix:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">strategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">matrix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">fruit</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">apple</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pear</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">animal</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">cat</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dog</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">include</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">color</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> green</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">color</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">animal</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">fruit</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apple</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">shape</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> circle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">fruit</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> banana</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">fruit</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> banana</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">animal</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cat</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>will result in six jobs with the following matrix combinations:</p>
<ul>
<li><code>{fruit: apple, animal: cat, color: pink, shape: circle}</code></li>
<li><code>{fruit: apple, animal: dog, color: green, shape: circle}</code></li>
<li><code>{fruit: pear, animal: cat, color: pink}</code></li>
<li><code>{fruit: pear, animal: dog, color: green}</code></li>
<li><code>{fruit: banana}</code></li>
<li><code>{fruit: banana, animal: cat}</code></li>
</ul>
<p>following this logic:</p>
<ul>
<li><code>{color: green}</code> is added to all of the original matrix combinations because it can be added without overwriting any
part of the original combinations.</li>
<li><code>{color: pink, animal: cat}</code> adds <code>color:pink</code> only to the original matrix combinations that include <code>animal: cat</code>.
This overwrites the color: green that was added by the previous include entry.</li>
<li><code>{fruit: apple, shape: circle}</code> adds shape: circle only to the original matrix combinations that include
<code>fruit: apple</code>.</li>
<li><code>{fruit: banana}</code> cannot be added to any original matrix combination without overwriting a value, so it is added as an
additional matrix combination.</li>
<li><code>{fruit: banana, animal: cat}</code> cannot be added to any original matrix combination without overwriting a value, so it
is added as an additional matrix combination. It does not add to the <code>{fruit: banana}</code> matrix combination because that
combination was not one of the original matrix combinations.</li>
</ul>
<p>This looks like kinda "what're we doing here???". But let us just look at the following examples which make it more
clear.</p>
<p>The following workflow will run six jobs, one for each combination of <code>os</code> and node. When the job for the os value of
<code>windows-latest</code> and node value of <code>16</code> runs, an additional variable called <code>npm</code> with the value of <code>6</code> will be included
in the job.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">example_matrix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">strategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">matrix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">os</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">windows</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">node</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">include</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">os</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> windows</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">node</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">npm</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> matrix.os </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/setup</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">node@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">node-version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> matrix.node </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> matrix.npm </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> npm install </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">g npm@$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> matrix.npm </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> npm </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This matrix will run 10 jobs, one for each combination of <code>os</code> and <code>version</code> in the matrix, plus a job for the <code>os</code>
value of <code>windows-latest</code> and version value of <code>17</code>.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">example_matrix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">strategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">matrix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">os</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">macos</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> windows</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">include</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">os</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> windows</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">17</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you don't specify any matrix variables, all configurations under <code>include</code> will run. For example, the following
workflow would run two jobs, one for each <code>include</code> entry. This lets you take advantage of the matrix strategy without
having a fully populated matrix.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">includes_only</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">strategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">matrix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">include</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">site</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"production"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">datacenter</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"site-a"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">site</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"staging"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">datacenter</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"site-b"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="excluding-matrix-configurations">Excluding Matrix Configurations<a href="https://hashicorp-aws.com/blog/github-matrix#excluding-matrix-configurations" class="hash-link" aria-label="Direct link to Excluding Matrix Configurations" title="Direct link to Excluding Matrix Configurations">​</a></h2>
<p>To remove specific configurations defined in the matrix, use <code>jobs.&lt;job_id&gt;.strategy.matrix.exclude</code>. An excluded
configuration only has to be a partial match for it to be excluded. For example, the following workflow will run nine
jobs: one job for each of the 12 configurations, minus the one excluded job that matches
<code>{os: macos-latest, version: 12, environment: production}</code>, and the two excluded jobs that match
<code>{os: windows-latest, version: 16}</code>.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">strategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">matrix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">os</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">macos</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> windows</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">staging</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> production</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">exclude</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">os</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> macos</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> production</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">os</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> windows</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> matrix.os </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>Note: All <code>include</code> combinations are processed after <code>exclude</code>. This allows you to use <code>include</code> to add back
combinations that were previously excluded.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="handling-failures">Handling Failures<a href="https://hashicorp-aws.com/blog/github-matrix#handling-failures" class="hash-link" aria-label="Direct link to Handling Failures" title="Direct link to Handling Failures">​</a></h2>
<p>You can control how job failures are handled with <code>jobs.&lt;job_id&gt;.strategy.fail-fast</code> and
<code>jobs.&lt;job_id&gt;.continue-on-error</code>.</p>
<p><code>jobs.&lt;job_id&gt;.strategy.fail-fast</code> applies to the entire matrix. If <code>jobs.&lt;job_id&gt;.strategy.fail-fast</code> is set to <code>true</code>,
GitHub will cancel all in-progress and queued jobs in the matrix if any job in the matrix fails. This property defaults
to <code>true</code>.</p>
<p><code>jobs.&lt;job_id&gt;.continue-on-error</code> applies to a single job. If <code>jobs.&lt;job_id&gt;.continue-on-error</code> is <code>true</code>, other jobs in
the matrix will continue running even if the job with <code>jobs.&lt;job_id&gt;.continue-on-error: true</code> fails.</p>
<p>You can use <code>jobs.&lt;job_id&gt;.strategy.fail-fast</code> and <code>jobs.&lt;job_id&gt;.continue-on-error</code> together. For example, the
following workflow will start four jobs. For each job, continue-on-error is determined by the value of
<code>matrix.experimental</code>. If any of the jobs with <code>continue-on-error: false</code> fail, all jobs that are in progress or queued
will be cancelled. If the job with <code>continue-on-error: true</code> fails, the other jobs will not be affected.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">continue-on-error</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> matrix.experimental </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">strategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">fail-fast</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">matrix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">experimental</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token boolean important" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">include</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">experimental</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-maximum-number-of-concurrent-jobs">Configuring the Maximum Number of Concurrent Jobs<a href="https://hashicorp-aws.com/blog/github-matrix#configuring-the-maximum-number-of-concurrent-jobs" class="hash-link" aria-label="Direct link to Configuring the Maximum Number of Concurrent Jobs" title="Direct link to Configuring the Maximum Number of Concurrent Jobs">​</a></h2>
<p>By default, GitHub will maximize the number of jobs run in parallel depending on runner availability. To set the maximum
number of jobs that can run simultaneously when using a <code>matrix</code> job strategy, use
<code>jobs.&lt;job_id&gt;.strategy.max-parallel</code>.</p>
<p>For example, the following workflow will run a maximum of two jobs at a time, even if there are runners available to run
all six jobs at once.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">example_matrix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">strategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">max-parallel</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">matrix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">os</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> windows</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>Jiaqi Liu</name>
            <uri>https://github.com/QubitPi</uri>
        </author>
        <category label="CI/CD" term="CI/CD"/>
        <category label="GitHub" term="GitHub"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Using OpenSSL to encrypt messages and files on Linux]]></title>
        <id>https://hashicorp-aws.com/blog/openssl-encrypt</id>
        <link href="https://hashicorp-aws.com/blog/openssl-encrypt"/>
        <updated>2023-11-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[[//]: # (Copyright Jiaqi Liu)]]></summary>
        <content type="html"><![CDATA[<p>OpenSSL is a powerful cryptography toolkit. Many of us have already used OpenSSL for creating RSA Private Keys or CSR
(Certificate Signing Request). However, did you know that we can use OpenSSL to benchmark our computer speed or that we
can also encrypt files or messages? This post will provide you with some simple to follow tips on how to encrypt
messages and files using OpenSSL.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="encrypt-and-decrypt-messages">Encrypt and Decrypt Messages<a href="https://hashicorp-aws.com/blog/openssl-encrypt#encrypt-and-decrypt-messages" class="hash-link" aria-label="Direct link to Encrypt and Decrypt Messages" title="Direct link to Encrypt and Decrypt Messages">​</a></h2>
<p>First we can start by encrypting simple messages. The following linux command will encrypt a message "Welcome to
LinuxCareer.com" using Base64 Encoding:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Welcome to LinuxCareer.com"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> openssl enc </span><span class="token parameter variable" style="color:#36acaa">-base64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">V2VsY29tZSB0byBMaW51eENhcmVlci5jb20K</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The output of the above command is an encrypted string containing encoded message "Welcome to LinuxCareer.com". To
decrypt encoded string back to its original message we need to reverse the order and attach -d option for decryption:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"V2VsY29tZSB0byBMaW51eENhcmVlci5jb20K"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> openssl enc </span><span class="token parameter variable" style="color:#36acaa">-base64</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Welcome to LinuxCareer.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The encryption above is simple to use, however, it lacks an important feature of a password, which should be used for
encryption. <em>The procedure above simply exposes the original password in another plain text in the form of of
<strong>echo "V2VsY29tZSB0byBMaW51eENhcmVlci5jb20K" | openssl enc -base64 -d</strong>, which essentially does nothing about "hiding
secrets" at all</em>.</p>
<p>What will do next is, instead of decrypting using <code>openssl enc -base64 -d</code>, decrypting with a <strong>password</strong>. Try to
decrypt the following string with a password "pass":</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"U2FsdGVkX181xscMhkpIA6J0qd76N/nSjjTc9NrDUC0CBSLpZQxQ2Db7ipd7kexj"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> openssl enc -aes-256-cbc </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>i.e.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"U2FsdGVkX181xscMhkpIA6J0qd76N/nSjjTc9NrDUC0CBSLpZQxQ2Db7ipd7kexj"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> openssl enc -aes-256-cbc </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enter aes-256-cbc decryption password: pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LinuxCareer.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We see that the original message "LinuxCareer.com" got decrypted with the password "pass". To create an encrypted
message with a password as the one above we can use the following linux command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"LinuxCareer.com"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> openssl enc -aes-256-cbc </span><span class="token parameter variable" style="color:#36acaa">-a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>i.e.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"LinuxCareer.com"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> openssl enc -aes-256-cbc </span><span class="token parameter variable" style="color:#36acaa">-a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enter aes-256-cbc encryption password:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Verifying - enter aes-256-cbc encryption password:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">U2FsdGVkX185E3H2me2D+qmCfkEsXDTn8nCn/4sblr8</span><span class="token operator" style="color:#393A34">=</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If we wish to store OpenSSL's output to a file instead of STDOUT simply use STDOUT redirection <code>&gt;</code>. When storing
encrypted output to a file we can also omit the <code>-a</code> option as we no longer need the output to be ASCII text based:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"LinuxCareer.com"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> openssl enc -aes-256-cbc </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> openssl.dat</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"LinuxCareer.com"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> openssl enc -aes-256-cbc </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> openssl.dat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enter aes-256-cbc encryption password:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Verifying - enter aes-256-cbc encryption password:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> openssl.dat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl.dat: openssl enc'd data with salted password</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To decrypt the "openssl.dat" file back to its original message use:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl enc -aes-256-cbc </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-in</span><span class="token plain"> openssl.dat</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ openssl enc -aes-256-cbc </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-in</span><span class="token plain"> openssl.dat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enter aes-256-cbc decryption password:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LinuxCareer.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="encrypt-and-decrypt-file">Encrypt and Decrypt File<a href="https://hashicorp-aws.com/blog/openssl-encrypt#encrypt-and-decrypt-file" class="hash-link" aria-label="Direct link to Encrypt and Decrypt File" title="Direct link to Encrypt and Decrypt File">​</a></h2>
<p>To encrypt files with OpenSSL is as simple as encrypting messages. The only difference is that instead of the echo
command we use the <strong>-in</strong> option with the actual file we would like to encrypt and <strong>-out</strong> option, which will instruct
OpenSSL to store the encrypted file under a given name:</p>
<blockquote>
<p>⚠️ Ensure that the encrypted output file is given a different filename than the original plain input file. It is also
recommended to do few encrypt/decrypt test runs on dummy data before encrypting important content.</p>
</blockquote>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl enc -aes-256-cbc </span><span class="token parameter variable" style="color:#36acaa">-in</span><span class="token plain"> /etc/services </span><span class="token parameter variable" style="color:#36acaa">-out</span><span class="token plain"> services.dat</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To decrypt back our services file use:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ openssl enc -aes-256-cbc </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-in</span><span class="token plain"> services.dat </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> services.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enter aes-256-cbc decryption password:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="encrypt-and-decrypt-directory">Encrypt and Decrypt Directory<a href="https://hashicorp-aws.com/blog/openssl-encrypt#encrypt-and-decrypt-directory" class="hash-link" aria-label="Direct link to Encrypt and Decrypt Directory" title="Direct link to Encrypt and Decrypt Directory">​</a></h2>
<p>In case that we needed to use OpenSSL to encrypt an entire directory we would, first need to create gzip <strong>tarball</strong> and
then encrypt the tarball with the above method or we can do both at the same time by using pipe:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> cz /etc </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> openssl enc -aes-256-cbc </span><span class="token parameter variable" style="color:#36acaa">-out</span><span class="token plain"> etc.tar.gz.dat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar: Removing leading `/' from member names</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enter aes-256-cbc encryption password:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Verifying - enter aes-256-cbc encryption password:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To decrypt and extract the entire etc/ directory to you current working directory use:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ openssl enc -aes-256-cbc </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-in</span><span class="token plain"> etc.tar.gz.dat </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> xz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enter aes-256-cbc decryption password:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>The method above can be quite useful for automated encrypted backups</strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-public-and-private-keys">Using Public and Private keys<a href="https://hashicorp-aws.com/blog/openssl-encrypt#using-public-and-private-keys" class="hash-link" aria-label="Direct link to Using Public and Private keys" title="Direct link to Using Public and Private keys">​</a></h2>
<p>In this section we will show how to encrypt and decrypt files using public and private keys. First we need to generate
private and public keys. This can simply be done by:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl genrsa </span><span class="token parameter variable" style="color:#36acaa">-out</span><span class="token plain"> private_key.pem </span><span class="token number" style="color:#36acaa">1024</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>From the private key we can then generate public key:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl rsa </span><span class="token parameter variable" style="color:#36acaa">-in</span><span class="token plain"> private_key.pem </span><span class="token parameter variable" style="color:#36acaa">-out</span><span class="token plain"> public_key.pem </span><span class="token parameter variable" style="color:#36acaa">-outform</span><span class="token plain"> PEM </span><span class="token parameter variable" style="color:#36acaa">-pubout</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>At this point we should have both private and public key available in our current working directory.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private_key.pem  public_key.pem</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next, we create some sample file called "encrypt.txt" with any arbitrary text:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Welcome to LinuxCareer.com"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> encrypt.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> encrypt.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Welcome to LinuxCareer.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now we are ready to encrypt this file with public key:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl rsautl </span><span class="token parameter variable" style="color:#36acaa">-encrypt</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-inkey</span><span class="token plain"> public_key.pem </span><span class="token parameter variable" style="color:#36acaa">-pubin</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-in</span><span class="token plain"> encrypt.txt </span><span class="token parameter variable" style="color:#36acaa">-out</span><span class="token plain"> encrypt.dat</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>i.e.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ openssl rsautl </span><span class="token parameter variable" style="color:#36acaa">-encrypt</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-inkey</span><span class="token plain"> public_key.pem </span><span class="token parameter variable" style="color:#36acaa">-pubin</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-in</span><span class="token plain"> encrypt.txt </span><span class="token parameter variable" style="color:#36acaa">-out</span><span class="token plain"> encrypt.dat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">encrypt.dat  encrypt.txt  private_key.pem  public_key.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> encrypt.dat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">encrypt.dat: openssl enc'd data with salted password</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As you can see our new encrypt.dat file is no longer text files. To decrypt this file we need to use private key:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl rsautl </span><span class="token parameter variable" style="color:#36acaa">-decrypt</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-inkey</span><span class="token plain"> private_key.pem </span><span class="token parameter variable" style="color:#36acaa">-in</span><span class="token plain"> encrypt.dat </span><span class="token parameter variable" style="color:#36acaa">-out</span><span class="token plain"> new_encrypt.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>i.e.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ openssl rsautl </span><span class="token parameter variable" style="color:#36acaa">-decrypt</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-inkey</span><span class="token plain"> private_key.pem </span><span class="token parameter variable" style="color:#36acaa">-in</span><span class="token plain"> encrypt.dat </span><span class="token parameter variable" style="color:#36acaa">-out</span><span class="token plain"> new_encrypt.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> new_encrypt.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Welcome to LinuxCareer.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The syntax above is quite intuitive. As you can see we have decrypted a file encrypt.dat to its original form and save
it as new_encrypt.txt. You can for example combine this syntax with encrypting directories example above to create
automated encrypted backup script.</p>]]></content>
        <author>
            <name>Jiaqi Liu</name>
            <uri>https://github.com/QubitPi</uri>
        </author>
        <category label="Security" term="Security"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Build and Push Docker Images through GitHub Action]]></title>
        <id>https://hashicorp-aws.com/blog/dockerhub-github-actions</id>
        <link href="https://hashicorp-aws.com/blog/dockerhub-github-actions"/>
        <updated>2023-11-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[[//]: # (Copyright Jiaqi Liu)]]></summary>
        <content type="html"><![CDATA[<p>On every push to GitHub, <a href="https://github.com/marketplace/actions/build-and-push-docker-images" target="_blank" rel="noopener noreferrer">GitHub Action</a> can
auto-trigger the docker image build and push to <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">Docker Hub</a>. We will be able to see that each
push results in a usable image, which enhances the quality of a docker image a lot.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="generate-docker-hub-access-token">Generate Docker Hub Access Token<a href="https://hashicorp-aws.com/blog/dockerhub-github-actions#generate-docker-hub-access-token" class="hash-link" aria-label="Direct link to Generate Docker Hub Access Token" title="Direct link to Generate Docker Hub Access Token">​</a></h2>
<p>Before we start, ensure you can access <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">Docker Hub</a> from any workflows you create. To do this:</p>
<ol>
<li>Add your Docker ID as a secret to GitHub. Navigate to your GitHub repository and click <strong>Settings</strong> &gt; <strong>Secrets</strong> &gt;
<strong>New secret</strong>.</li>
<li>Create a new secret with the name DOCKERHUB_USERNAME and your Docker ID as value.</li>
<li>Create a new Personal Access Token (PAT). To create a new token, go to
<a href="https://hub.docker.com/settings/security" target="_blank" rel="noopener noreferrer">Docker Hub Settings</a> and then click <strong>New Access Token</strong>.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="define-ci-workflow-on-github">Define CI Workflow on GitHub<a href="https://hashicorp-aws.com/blog/dockerhub-github-actions#define-ci-workflow-on-github" class="hash-link" aria-label="Direct link to Define CI Workflow on GitHub" title="Direct link to Define CI Workflow on GitHub">​</a></h2>
<p><code>git checkout</code> the branch that contains the docker image definition, i.e. Dockerfile, and add a new YAML file to the
following path</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">github-repo</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">/.github/workflows/</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">workflow-name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The YAML file should contain the following workflow definition:</p>
<blockquote>
<p>📋 Change the <code>&lt;branch-name&gt;</code> and <code>&lt;docker-image-name&gt;</code> below accordingly.</p>
</blockquote>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Builds and pushes XXX image to Docker Hub</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ci</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'&lt;branch-name&gt;'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">docker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Checkout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/checkout@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Set up QEMU</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> docker/setup</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">qemu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">action@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Set up Docker Buildx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> docker/setup</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">buildx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">action@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Login to DockerHub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> docker/login</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">action@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">% raw %</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">username</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.DOCKERHUB_USERNAME </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.DOCKERHUB_TOKEN </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">% endraw %</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Build and push</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> docker/build</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">push</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">action@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">% raw %</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">tags</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.DOCKERHUB_USERNAME </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/&lt;docker</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">% endraw %</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Push the YAML file onto GitHub. Every push to that branch afterwards will trigger the image build and push.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="build-status-badge">Build Status Badge<a href="https://hashicorp-aws.com/blog/dockerhub-github-actions#build-status-badge" class="hash-link" aria-label="Direct link to Build Status Badge" title="Direct link to Build Status Badge">​</a></h2>
<p>To generate real-time badge on image build status, we could use an
<a href="https://docs.github.com/en/actions/monitoring-and-troubleshooting-workflows/adding-a-workflow-status-badge" target="_blank" rel="noopener noreferrer">approach</a>
that GitHub supports out-of-the-box.</p>]]></content>
        <author>
            <name>Jiaqi Liu</name>
            <uri>https://github.com/QubitPi</uri>
        </author>
        <category label="Docker" term="Docker"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Switching Node.js Versions with NVM]]></title>
        <id>https://hashicorp-aws.com/blog/nvm</id>
        <link href="https://hashicorp-aws.com/blog/nvm"/>
        <updated>2023-04-21T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[[//]: # (Copyright Jiaqi Liu)]]></summary>
        <content type="html"><![CDATA[<p><a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener noreferrer">Node Version Manager</a> is a tool that helps us manage Node versions and is a convenient
way to install Node. Think of it as npm or Yarn that helps manage Node packages, but instead of packages, NVM manages
Node versions.</p>
<p>This also means you can install multiple Node versions onto your machine at the same time and switch among them if
needed.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="displaying-a-list-of-nodejs-versions">Displaying a List of Node.js Versions<a href="https://hashicorp-aws.com/blog/nvm#displaying-a-list-of-nodejs-versions" class="hash-link" aria-label="Direct link to Displaying a List of Node.js Versions" title="Direct link to Displaying a List of Node.js Versions">​</a></h2>
<p>We can now view all the versions we downloaded so far with</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nvm </span><span class="token function" style="color:#d73a49">ls</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The list then appears:</p>
<p><img loading="lazy" alt="Error loading node-versions.png" src="https://hashicorp-aws.com/assets/images/node-versions-89fef4e214d145afb847b956dfb90f82.png" width="1454" height="588" class="img_ev3q"></p>
<p>The first three lines show the list of Node versions with the arrow pointing to the 14.18.1 version that is currently in
use; when a version is used, it displays as green.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="switching-among-nodejs-versions">Switching Among Node.js Versions<a href="https://hashicorp-aws.com/blog/nvm#switching-among-nodejs-versions" class="hash-link" aria-label="Direct link to Switching Among Node.js Versions" title="Direct link to Switching Among Node.js Versions">​</a></h2>
<p>The best feature about NVM is the ability to easily switch between different Node versions. Say we must use version
16.13.0 and then switch to 12.22.7; we can simply run either <code>nvm use 12.22.7</code> or <code>nvm use 16.13.0</code> to easily switch
into either version we need.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="https://hashicorp-aws.com/blog/nvm#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="changing-node-version">Changing Node Version<a href="https://hashicorp-aws.com/blog/nvm#changing-node-version" class="hash-link" aria-label="Direct link to Changing Node Version" title="Direct link to Changing Node Version">​</a></h3>
<blockquote>
<p>⚠️ Warning: This answer does not support Windows OS</p>
</blockquote>
<p>Suppose we would like to down-grade version from 18 to 14, then we can use <code>n</code> for node's version management like this.
<a href="https://www.npmjs.com/package/n" target="_blank" rel="noopener noreferrer">There</a> is a simple intro for <code>n</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-g</span><span class="token plain"> n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">n </span><span class="token number" style="color:#36acaa">6.10</span><span class="token plain">.3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is very easy to use. then you can show your node version:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">node</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">v6.10.3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The available node versions can be found on Node's <a href="https://nodejs.org/en/about/previous-releases" target="_blank" rel="noopener noreferrer">release page</a></p>
<p>For windows <a href="https://github.com/coreybutler/nvm-windows" target="_blank" rel="noopener noreferrer">nvm</a> is a well-received tool.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="npm-install-error">"npm install" Error<a href="https://hashicorp-aws.com/blog/nvm#npm-install-error" class="hash-link" aria-label="Direct link to &quot;npm install&quot; Error" title="Direct link to &quot;npm install&quot; Error">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="github-operation-times-out">GitHub Operation Times Out<a href="https://hashicorp-aws.com/blog/nvm#github-operation-times-out" class="hash-link" aria-label="Direct link to GitHub Operation Times Out" title="Direct link to GitHub Operation Times Out">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> config </span><span class="token parameter variable" style="color:#36acaa">--global</span><span class="token plain"> url.</span><span class="token string" style="color:#e3116c">"https://"</span><span class="token plain">.insteadOf git://</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will change all of your urls so that they all start with <code>https://</code> which shall be working for you.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="node-sass-version-issue">node-sass Version Issue<a href="https://hashicorp-aws.com/blog/nvm#node-sass-version-issue" class="hash-link" aria-label="Direct link to node-sass Version Issue" title="Direct link to node-sass Version Issue">​</a></h4>
<p>Running <code>npm install</code> gives</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.node-gyp/18.7.0/include/node/v8-internal.h:646:38: error: no template named </span><span class="token string" style="color:#e3116c">'remove_cv_t'</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> namespace </span><span class="token string" style="color:#e3116c">'std'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> did you mean </span><span class="token string" style="color:#e3116c">'remove_cv'</span><span class="token plain">?</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>What you're seeing is an error during compilation of node-sass. That's a package processing your Sass/SCSS styles, which
is written in C++ and only re-packaged as a JavaScript library. The fact it's written in C++ means it needs to be
compiled on your device during installation (this is internally done by a tool called node-gyp, which you can spot in
your error output, too).</p>
<p><strong>The problem is node-sass with the specified version in package.json doesn't support Node version installed on the
machine</strong>. The <a href="https://github.com/sass/node-sass" target="_blank" rel="noopener noreferrer">node-sass community</a> needs time to catch up to support it (and
that's fair, as it's a volunteer-driven project).</p>
<p>Case-by-case soulutions would be either upgrading sass versions or <a href="https://hashicorp-aws.com/blog/nvm#change-node-version">downgrading Node</a></p>]]></content>
        <author>
            <name>Jiaqi Liu</name>
            <uri>https://github.com/QubitPi</uri>
        </author>
        <category label="Node.js" term="Node.js"/>
        <category label="nvm" term="nvm"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Deploying Jenkins to AWS]]></title>
        <id>https://hashicorp-aws.com/blog/jenkins-on-aws</id>
        <link href="https://hashicorp-aws.com/blog/jenkins-on-aws"/>
        <updated>2022-10-31T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[[//]: # (Copyright Jiaqi Liu)]]></summary>
        <content type="html"><![CDATA[<p>Jenkins is an open-source automation server that integrates with a number of AWS Services, including: AWS CodeCommit,
AWS CodeDeploy, Amazon EC2 Spot, and Amazon EC2 Fleet. We can use Amazon Elastic Compute Cloud (Amazon EC2) to deploy a
Jenkins application on AWS.</p>
<p>This post documents the process of deploying a Jenkins application. We will launch an EC2 instance, install Jenkins on
that instance, and configure Jenkins to automatically spin up Jenkins agents if build abilities need to be augmented
on the instance.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Prerequisites</div><div class="admonitionContent_BuS1"><ol>
<li><a href="https://portal.aws.amazon.com/billing/signup#/start" target="_blank" rel="noopener noreferrer">Register an AWS account</a>, if not having one yet.</li>
<li><a href="https://hashicorp-aws.com/blog/jenkins-on-aws#creating-a-key-pair">An Amazon EC2 key pair</a>, if we don't have one yet</li>
</ol></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-key-pair">Creating a Key Pair<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#creating-a-key-pair" class="hash-link" aria-label="Direct link to Creating a Key Pair" title="Direct link to Creating a Key Pair">​</a></h2>
<p>Creating a key pair helps ensure that the correct form of authentication is used when we install Jenkins.</p>
<p>To create our key pair:</p>
<ol>
<li>
<p>Open the <a href="https://console.aws.amazon.com/ec2/" target="_blank" rel="noopener noreferrer">Amazon EC2 console</a> and sign in.</p>
</li>
<li>
<p>In the navigation pane, under <strong>NETWORK &amp; SECURITY</strong>, select <strong>Key Pairs</strong>.</p>
</li>
<li>
<p>Select <strong>Create key pair</strong>.</p>
</li>
<li>
<p>For <strong>Name</strong>, enter a descriptive name for the key pair. Amazon EC2 associates the public key with the name that we
specify as the <strong>key name</strong>. A key name can include up to 255 ASCII characters. It cannot include leading or trailing
spaces.</p>
</li>
<li>
<p>For <strong>File format</strong>, select the format in which to save the private key.</p>
<ul>
<li>For OpenSSH compatibility (Linux or Mac OS X), select pem.</li>
<li>For PuTTY compatibility (Windows), select ppk.</li>
</ul>
</li>
<li>
<p>Select <strong>Create key pair</strong>.</p>
</li>
<li>
<p>The private key file downloads automatically. The base file name is the name we specified as the name of our key
pair, and the file name extension is determined by the file format we chose. Save the private key file in a safe
place.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>This is the only chance for us to save the private key file.</p></div></div>
</li>
<li>
<p>If we use an SSH client on a macOS or Linux computer to connect to our Linux instance, we would also run the
following command to set the permissions of our private key file so that only we can read it, otherwise we won't be
able to connect to our instance using this key pair. For more information, please refer to
<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/TroubleshootingInstancesConnecting.html#troubleshoot-unprotected-key" target="_blank" rel="noopener noreferrer">Error: Unprotected private key file</a>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">400</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">key_pair_name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">.pem</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-security-group">Creating a Security Group<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#creating-a-security-group" class="hash-link" aria-label="Direct link to Creating a Security Group" title="Direct link to Creating a Security Group">​</a></h2>
<p>A security group acts as a firewall that controls the traffic allowed to reach one or more EC2 instances. When we launch
an instance, we can assign it one or more security groups. We add rules that control the traffic allowed to reach the
instances in each security group. We can modify a security group's rules any time, and the new rules take effect
<em>immediately</em>.</p>
<p>To create and configure our security group:</p>
<ol>
<li>
<p>Decide who may access our instance. For example, a single computer or all trusted computers on a network. For a
single computer/user, we can use the public IP address of the computer/user. To find the IP address, use the
<a href="http://checkip.amazonaws.com/" target="_blank" rel="noopener noreferrer">check IP service tool</a> from AWS3 (this tool works for VPN as well) or search for the
phrase "what is my IP address" in any search engine.</p>
</li>
<li>
<p>Sign in to the <a href="https://console.aws.amazon.com/ec2/" target="_blank" rel="noopener noreferrer">AWS Management Console</a>.</p>
</li>
<li>
<p>Open the Amazon EC2 console by selecting <strong>EC2</strong> under <strong>Compute</strong>.</p>
<p><img loading="lazy" alt="Error loading ec2-service.png" src="https://hashicorp-aws.com/assets/images/ec2-service-6ac73bd57369973234f9192c71204b50.png" width="1828" height="841" class="img_ev3q"></p>
</li>
<li>
<p>In the left-hand navigation bar, select <strong>Security Groups</strong>, and then select <strong>Create Security Group</strong>.</p>
<p><img loading="lazy" alt="Error loading create-security-group.png" src="https://hashicorp-aws.com/assets/images/create-security-group-5ff4ac14e0e8e95d8f682b409efe1cda.png" width="1852" height="625" class="img_ev3q"></p>
</li>
<li>
<p>In <strong>Security group name</strong>, enter <strong>WebServerSG</strong> or any preferred name of our choice, and provide a description.</p>
</li>
<li>
<p>Select our VPC from the list. We can use the default VPC.</p>
</li>
<li>
<p>On the <strong>Inbound tab</strong>, add the rules as follows:</p>
<ul>
<li>Select <strong>Add Rule</strong>, and then select <strong>SSH</strong> from the Type list.</li>
<li>Under Source, select <strong>Custom</strong>, and in the text box, enter the IP address from step 1.</li>
<li>Select <strong>Add Rule</strong>, and then select <strong>HTTP</strong> from the Type list.</li>
<li>Select <strong>Add Rule</strong>, and then select <strong>Custom TCP Rule</strong> from the Type list.</li>
<li>Under <strong>Port Range</strong>, enter <strong>8080</strong> (Jenkins UI port).</li>
</ul>
</li>
<li>
<p>Select Create.</p>
</li>
</ol>
<p>For more information, refer to
<a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-network-security.html" target="_blank" rel="noopener noreferrer">Security Groups</a> in the Amazon EC2 User
Guide for Linux Instances.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="launching-an-amazon-ec2-instance">Launching an Amazon EC2 Instance<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#launching-an-amazon-ec2-instance" class="hash-link" aria-label="Direct link to Launching an Amazon EC2 Instance" title="Direct link to Launching an Amazon EC2 Instance">​</a></h2>
<p>To launch an EC2 instance:</p>
<ol>
<li>
<p>Sign in to the <a href="https://console.aws.amazon.com/ec2/" target="_blank" rel="noopener noreferrer">AWS Management Console</a>.</p>
</li>
<li>
<p>Open the Amazon EC2 console by selecting EC2 under <strong>Compute</strong>.</p>
</li>
<li>
<p>From the Amazon EC2 dashboard, select <strong>Launch Instance</strong>.</p>
<p><img loading="lazy" alt="Error loading ec2-launch-instance.png" src="https://hashicorp-aws.com/assets/images/ec2-launch-instance-59738dc47bd4957dba4b4cb53920c468.png" width="1867" height="856" class="img_ev3q"></p>
</li>
<li>
<p>We will run Ubuntu OS in our instance, so let's pick up "Ubuntu" and give it a name such as "Jenkins Server"</p>
<p><img loading="lazy" alt="Error loading ec2-instance-setup.png" src="https://hashicorp-aws.com/assets/images/ec2-instance-setup-9605d73972163ced5cc787992326c086.png" width="1590" height="1210" class="img_ev3q"></p>
</li>
<li>
<p>On the Choose an Instance Type page, the <strong>t2.micro</strong> instance is selected by default. Verify this instance type is
selected to stay within the free tier.</p>
</li>
<li>
<p>Pick up the Key Pair (under "Key pair" section) and the security group (under "Network settings") we defined
previously</p>
</li>
<li>
<p>Hit "Launch Instance"</p>
</li>
<li>
<p>In the left-hand navigation bar, choose Instances to view the status of our instance. Initially, the status of our
instance is pending. After the status changes to running, our instance is ready for use.</p>
<p><img loading="lazy" alt="Error loading ec2-view-created-instance.png" src="https://hashicorp-aws.com/assets/images/ec2-view-created-instance-334c57b2830177602a82e77a8aeaa38b.png" width="1864" height="633" class="img_ev3q"></p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installing-jenkins-on-ec2">Installing Jenkins on EC2<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#installing-jenkins-on-ec2" class="hash-link" aria-label="Direct link to Installing Jenkins on EC2" title="Direct link to Installing Jenkins on EC2">​</a></h2>
<p>Now that the Amazon EC2 instance has been launched, Jenkins can be installed properly.</p>
<p>In this step we will deploy Jenkins on our EC2 instance by completing the following tasks:</p>
<ol>
<li><a href="https://hashicorp-aws.com/blog/jenkins-on-aws#connecting-to-our-linux-instance">Connecting to Our Linux Instance</a></li>
<li><a href="https://hashicorp-aws.com/blog/jenkins-on-aws#downloading-and-installing-jenkins">Downloading and Installing Jenkins</a></li>
<li><a href="https://hashicorp-aws.com/blog/jenkins-on-aws#configuring-jenkins">Configuring Jenkins</a></li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="connecting-to-our-linux-instance">Connecting to Our Linux Instance<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#connecting-to-our-linux-instance" class="hash-link" aria-label="Direct link to Connecting to Our Linux Instance" title="Direct link to Connecting to Our Linux Instance">​</a></h3>
<p>After we launch our instance, we can connect to it and use it the same way as our local machine.</p>
<p>Before we connect to our instance, get the public DNS name of the instance using the Amazon EC2 console.</p>
<p><img loading="lazy" alt="Error loading ec2-public-dns.png" src="https://hashicorp-aws.com/assets/images/ec2-public-dns-c1c6816553a3eb830ceaf3a87ea4ee28.png" width="1862" height="671" class="img_ev3q"></p>
<p>Use the <code>ssh</code> command to connect to the instance. We will specify the private key (.pem) file and
<code>ec2-user@public_dns_name</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/path/my-key-pair.pem"</span><span class="token plain"> ubuntu@ec2-198-51-100-1.compute-1.amazonaws.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We will receive a response like the following:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">The authenticity of </span><span class="token function" style="color:#d73a49">host</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'ec2-198-51-100-1.compute1.amazonaws.com (10.254.142.33)'</span><span class="token plain"> cant be</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">established.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RSA key fingerprint is 1f:51:ae:28:bf:89:e9:d8:1f:25:5d:37:2d:7d:b8:ca:9f:f5:f1:6f.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Are you sure you want to </span><span class="token builtin class-name">continue</span><span class="token plain"> connecting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">yes/no</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">?</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Enter "yes". We will receive a response like the following:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Warning: Permanently added </span><span class="token string" style="color:#e3116c">'ec2-198-51-100-1.compute1.amazonaws.com'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">RSA</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> to the list of known hosts.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="downloading-and-installing-jenkins">Downloading and Installing Jenkins<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#downloading-and-installing-jenkins" class="hash-link" aria-label="Direct link to Downloading and Installing Jenkins" title="Direct link to Downloading and Installing Jenkins">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="installing-java">Installing Java<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#installing-java" class="hash-link" aria-label="Direct link to Installing Java" title="Direct link to Installing Java">​</a></h4>
<p>Jenkins requires Java in order to run, yet certain distributions don't include this by default and some Java versions
are incompatible with Jenkins, because <strong>Jenkins requires Java 11 or 17 since Jenkins 2.357 and LTS 2.361.1</strong>.</p>
<p>There are multiple Java implementations which we can use. <a href="https://openjdk.java.net/" target="_blank" rel="noopener noreferrer">OpenJDK</a> is the most popular one
at the moment, we will use it in this guide.</p>
<p>Update the Debian apt repositories, install OpenJDK 11, and check the installation with the commands:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> openjdk-11-jre</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">java</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openjdk version </span><span class="token string" style="color:#e3116c">"11.0.12"</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2021</span><span class="token plain">-07-20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OpenJDK Runtime Environment </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">build </span><span class="token number" style="color:#36acaa">11.0</span><span class="token plain">.12+7-post-Debian-2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OpenJDK </span><span class="token number" style="color:#36acaa">64</span><span class="token plain">-Bit Server VM </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">build </span><span class="token number" style="color:#36acaa">11.0</span><span class="token plain">.12+7-post-Debian-2, mixed mode, sharing</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="installing-jenkins">Installing Jenkins<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#installing-jenkins" class="hash-link" aria-label="Direct link to Installing Jenkins" title="Direct link to Installing Jenkins">​</a></h4>
<p>On Debian and Debian-based distributions like Ubuntu, i.e. our EC2 base image, we can install Jenkins through <code>apt</code>.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="long-term-support-release">Long Term Support Release<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#long-term-support-release" class="hash-link" aria-label="Direct link to Long Term Support Release" title="Direct link to Long Term Support Release">​</a></h5>
<p>A Jenkins <a href="https://www.jenkins.io/download/lts/" target="_blank" rel="noopener noreferrer">LTS (Long-Term Support) release</a> is chosen every 12 weeks from the
stream of regular releases as the stable release for that time period. It can be installed from the
<a href="https://pkg.jenkins.io/debian-stable/" target="_blank" rel="noopener noreferrer">debian-stable apt repository</a>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-fsSL</span><span class="token plain"> https://pkg.jenkins.io/debian-stable/jenkins.io.key </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tee</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/share/keyrings/jenkins-keyring.asc </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /dev/null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> deb </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">signed-by</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/usr/share/keyrings/jenkins-keyring.asc</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">https://pkg.jenkins.io/debian-stable binary/ </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tee</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/etc/apt/sources.list.d/jenkins.list </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /dev/null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> jenkins</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Beginning with Jenkins 2.335 and Jenkins 2.332.1, the package is configured with <strong>systemd</strong> rather than the older
System V init, so we would use systemd extensively to configure Jenkins next.</p>
<p>The package installation will:</p>
<ul>
<li>
<p>Setup Jenkins as a daemon launched on start. Run <strong><code>systemctl cat jenkins</code></strong> for more details.</p>
</li>
<li>
<p>Create a "<strong>jenkins</strong>" user to run this service. This username is very important because it would be used latter
during <a href="https://hashicorp-aws.com/blog/jenkins-on-aws#enable-ssl-on-jenkins-server-ubuntu">HTTPS/SSL configuration</a></p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>To verify user "jenkins" has been created, run <code>cat /etc/passwd</code>. Every user on a Linux system, whether created as an
account for a real human being or associated with a particular service or system function, is stored in a file called
"<strong>/etc/passwd</strong>", which contains information about the users on the system. Each line describes a distinct user.</p></div></div>
</li>
<li>
<p>Direct console log output to <code>systemd-journald</code>. Run <strong><code>journalctl -u jenkins.service -r</code></strong> if we are troubleshooting
Jenkins.</p>
</li>
<li>
<p>Populate <code>/lib/systemd/system/jenkins.service</code> with configuration parameters for the launch, e.g <code>JENKINS_HOME</code></p>
</li>
<li>
<p>Set Jenkins to listen on port 8080. Access this port with our browser to start configuration. Note that this is not
a secure port because it is a HTTP port. We would change this port in a moment for better security.</p>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="weekly-release">Weekly Release<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#weekly-release" class="hash-link" aria-label="Direct link to Weekly Release" title="Direct link to Weekly Release">​</a></h5>
<p>Alternatively, a new release is produced weekly to deliver bug fixes and features to users and plugin developers. It can
be installed from the <a href="https://pkg.jenkins.io/debian/" target="_blank" rel="noopener noreferrer">debian apt repository</a>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-fsSL</span><span class="token plain"> https://pkg.jenkins.io/debian/jenkins.io.key </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tee</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /usr/share/keyrings/jenkins-keyring.asc </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /dev/null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> deb </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">signed-by</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/usr/share/keyrings/jenkins-keyring.asc</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  https://pkg.jenkins.io/debian binary/ </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tee</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /etc/apt/sources.list.d/jenkins.list </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /dev/null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> jenkins</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="enable-ssl-on-jenkins-server-ubuntu">Enable SSL on Jenkins Server (Ubuntu)<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#enable-ssl-on-jenkins-server-ubuntu" class="hash-link" aria-label="Direct link to Enable SSL on Jenkins Server (Ubuntu)" title="Direct link to Enable SSL on Jenkins Server (Ubuntu)">​</a></h2>
<p>It is very important to secure Jenkins by enabling SSL which runs in a project environment. This section is designed to
introduce the Secure Sockets Layer (SSL) application-level protocol, and particularly the OpenSSL implementation of
SSL, in the context of using in Jenkins. After a brief description of exactly what OpenSSL is, and what it is useful
for, the section will further illustrate the practical usage of OpenSSL in Jenkins service for the purpose of serving
secured Jenkins resources from our EC2 instance.</p>
<p>While previous familiarity with Server Sockets Layer (SSL), or the OpenSSL implementation in particular, is not required
for this section, if desired, the reader is advised to pursue further learning from the <a href="https://hashicorp-aws.com/blog/jenkins-on-aws#resources">resources</a> listed
below in order to broaden his/her understanding of this powerful security layer.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="local-system-resources">Local System Resources<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#local-system-resources" class="hash-link" aria-label="Direct link to Local System Resources" title="Direct link to Local System Resources">​</a></h4>
<table><thead><tr><th>command</th><th>description</th></tr></thead><tbody><tr><td><strong><code>man config</code></strong></td><td>System manual page for the OpenSSL library configuration files</td></tr><tr><td><strong><code>man gendsa</code></strong></td><td>System manual page for the gendsa DSA private key generator</td></tr><tr><td><strong><code>man genrsa</code></strong></td><td>System manual page for the genrsa RSA private key generator</td></tr><tr><td><strong><code>man openssl</code></strong></td><td>System manual page for the openssl command-line tool</td></tr><tr><td><strong><code>man rand</code></strong></td><td>System manual page for the rand pseudo-random byte generator utility</td></tr><tr><td><strong><code>man x509</code></strong></td><td>System manual page for the x509 certificate display and signing utility</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="www-resources">WWW Resources<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#www-resources" class="hash-link" aria-label="Direct link to WWW Resources" title="Direct link to WWW Resources">​</a></h4>
<ul>
<li><a href="http://www.openssl.org/" target="_blank" rel="noopener noreferrer">OpenSSL Website</a></li>
<li><a href="http://www.ietf.org/html.charters/pkix-charter.html" target="_blank" rel="noopener noreferrer">Public Key Infrastructure (X.509) (pkix)</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="about-openssl">About OpenSSL<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#about-openssl" class="hash-link" aria-label="Direct link to About OpenSSL" title="Direct link to About OpenSSL">​</a></h3>
<p><strong>Secure Sockets Layer</strong> is an application-level protocol which was developed by the Netscape Corporation for the
purpose of transmitting sensitive information, such as Credit Card details, via the Internet. SSL works by using a
private key to encrypt data transferred over the SSL-enabled connection, thus thwarting eavesdropping of the
information. The most popular use of SSL is in conjunction with web browsing (using the HTTP protocol), but many network
applications can benefit from using SSL. By convention, URLs that require an SSL connection start with "https:" instead
of "http:"</p>
<p><strong>OpenSSL</strong> is a robust, commercial-grade implementation of SSL tools, and related general purpose library based upon
SSLeay, developed by Eric A. Young and Tim J. Hudson. OpenSSL is available as an Open Source equivalent to commercial
implementations of SSL via an <a href="http://www.openssl.org/source/license.html" target="_blank" rel="noopener noreferrer">Apache-style license</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="about-x509">About X.509<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#about-x509" class="hash-link" aria-label="Direct link to About X.509" title="Direct link to About X.509">​</a></h4>
<p>X.509 is a specification for digital certificates published by the International Telecommunications Union -
Telecommunication (ITU-T). It specifies information and attributes required for the identification of a person or a
computer system, and is used for secure management and distribution of digitally signed certificates across secure
Internet networks. OpenSSL most commonly uses X.509 certificates.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-openssl-toolkit">Installing OpenSSL Toolkit<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#installing-openssl-toolkit" class="hash-link" aria-label="Direct link to Installing OpenSSL Toolkit" title="Direct link to Installing OpenSSL Toolkit">​</a></h3>
<p>AWS EC2 instance usually have OpenSSL installed and configured properly.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="generating-ssl-certificates">Generating SSL Certificates<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#generating-ssl-certificates" class="hash-link" aria-label="Direct link to Generating SSL Certificates" title="Direct link to Generating SSL Certificates">​</a></h3>
<p>Once we have properly generated an X.509-compliant SSL certificate, we may either elect to</p>
<ul>
<li>sign the certificate by ourselves by <a href="https://hashicorp-aws.com/blog/jenkins-on-aws#self-signing-a-certificate">generating a Certificate Authority (CA)</a>, or</li>
<li>have a globally recognized Certificate Authority <a href="https://hashicorp-aws.com/blog/jenkins-on-aws#applying-for-a-certificate-using-certbot">sign the certificate</a>. We
can use services such as <a href="https://letsencrypt.org/" target="_blank" rel="noopener noreferrer">Letsencrypt</a> for valid SSL certificates. But these certificates
have to be renewed every three months.</li>
</ul>
<p>When the certificate is signed, it is then ready to be used with the OpenSSL toolkit, or the library to enable encrypted
SSL connections to a Lightweight Directory Access Protocol, (LDAP) or Hyper Text Transport Protocol (HTTP) server, for
example. The following sections describe the certificate generation, and signing process for both self-signed, and
recognized CA-signed certificates.</p>
<blockquote>
<p>Note that this section has no Jenkins involved and sets up SSL in a more general context</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="self-signing-a-certificate">Self-signing a Certificate<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#self-signing-a-certificate" class="hash-link" aria-label="Direct link to Self-signing a Certificate" title="Direct link to Self-signing a Certificate">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="establishing-a-certificate-authority">Establishing a Certificate Authority<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#establishing-a-certificate-authority" class="hash-link" aria-label="Direct link to Establishing a Certificate Authority" title="Direct link to Establishing a Certificate Authority">​</a></h5>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>What is a Self-Signed Certificate?</div><div class="admonitionContent_BuS1"><p>A <strong>self-signed certificate</strong> is an SSL/TSL certificate not signed by a public or private certificate authority.
Instead, it is signed by the creator’s own personal or root CA certificate.</p><p>Here is what we do to request paid SSL/TLS certificate from a <strong>well-known Certificate Authority</strong> like Verisign or
comodo.</p><p><img loading="lazy" alt="Error loading well-known-certificate-authority.png" src="https://hashicorp-aws.com/assets/images/well-known-certificate-authority-040a261c728d656b6b5dea8efa649cc3.png" width="869" height="816" class="img_ev3q"></p><ol>
<li>Create a <strong>certificate signing request (CSR)</strong> with a private key. A CSR contains details about location,
organization, and FQDN (Fully Qualified Domain Name).</li>
<li>Send the CSR to the trusted CA authority.</li>
<li>The CA authority will send us the SSL certificate signed by their root certificate authority and private key.</li>
<li>We can then validate and use the SSL certificate with our applications.</li>
</ol><p>But for a <strong>self-signed certificate</strong>, here is what we do.</p><p><img loading="lazy" alt="Error loading self-signed-cert.png" src="https://hashicorp-aws.com/assets/images/self-signed-cert-839b8a47b22e8237992b369b32431aa6.png" width="872" height="1044" class="img_ev3q"></p><ol>
<li>Create our own root CA certificate &amp; CA private key (We act as a CA on our own)</li>
<li>Create a server private key to generate CSR</li>
<li>Create an SSL certificate with CSR using our root CA and CA private key.</li>
<li>Install the CA certificate in the browser or Operating system to avoid security warnings.</li>
</ol><p>Most browsers &amp; operating systems hold a copy of root CA certificates of all the trusted certified Certificated
Authorities. That's the reason the browsers won't show any security messages when we visit standard websites that use
SSL from a trusted and well-known commercial Certificate authority. For example, the following image shows the root CA
present in the Firefox browser by default.</p><p><img loading="lazy" alt="Error loading trusted-ca.png" src="https://hashicorp-aws.com/assets/images/trusted-ca-71edbd471ba4499018eae4443dcb696b.png" width="669" height="652" class="img_ev3q"></p><p>At the same time, if we use a self-signed certificate, our browser will throw a security warning. The reason is browsers
only trust SSL from a trusted Certificate authority. For example,</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Your connection is not private</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Attackers might be trying to steal your information from demo.apps.mlopshub.com </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">for example, passwords, messages or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">credit cards</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>But we can force browsers &amp; operating systems to accept our own certificate authority. So we won't see the security
warning once we install the CA certificate and add it to the trusted list. We can also share the CA certificate with our
development team to install in their browsers as well.</p><p>Also, we can use this CA to create <strong>more than one SSL certificate</strong>.</p></div></div>
<p>Self-signed certificates have a major advantage in that they are completely free to use, and they may be generated,
signed, and used on an as-needed basis. Self-signed certificates are great for use in closed-lab environments or for
testing purposes. One of the drawbacks of using self-signed certificates, however, is that warnings will typically be
issued by a user's Web browser, and other applications, upon accessing an SSL-secured server that uses a self-signed
certificate. By default, client applications (e.g., Firefox) will suppress such warnings for certificates that are
signed using only a globally-recognized and trusted Certificate Authority, but warnings may also be squelched by
importing a server's root certificate into client applications; a relevant demonstration is shown later in this guide.
Using self-signed certificates in a publicly-accessible, production environment is not recommended due to the implicit
trust issues arising from these warnings, in addition to the potential confusion caused to users.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>We must obtain a certificate signed by a recognized Certificate Authority in order to establish a commercial site, e.g.,
for conducting "e-commerce", which is however not the case in the context of Jenkins we deiscuss here</p></div></div>
<p>Provided we've have the OpenSSL toolkit properly installed on our EC2 instance, the generation of X.509 SSL certificates
is quite simple. For self-signed certificates, we must <strong>first establish a Certificate Authority (CA)</strong> by following the
steps below:</p>
<p>First, create an initial working environment, for example within our home directory by issuing the following command
from a terminal prompt:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> myCA/signedcerts </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> myCA/private </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name">cd</span><span class="token plain"> myCA</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The above command will place us in a newly-created subdirectory of our home directory named "myCA", and within this
subdirectory, we should have two additional subdirectories named "signedcerts" and "private".</p>
<p>Within this initial working environment, the significance of the subdirectories, and their contents is as follows:</p>
<ol>
<li><code>~/myCA</code>: contains CA certificate, certificates database, generated certificates, keys, and requests</li>
<li><code>~/myCA/signedcerts</code>: contains copies of each signed certificate</li>
<li><code>~/myCA/private</code>: contains the private key</li>
</ol>
<p>Next, create an initial certificate database in the <code>~/myCA</code> subdirectory with the following command at a terminal
prompt:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'01'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> serial  </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">touch</span><span class="token plain"> index.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now create an initial <strong>caconfig.cnf</strong> file suitable for the creation of CA certificates. Using our favorite editor,
edit the file <code>~/myCA/caconfig.cnf</code>, and insert the following content into the file:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">nano</span><span class="token plain"> ~/myCA/caconfig.cnf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-conf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-conf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># My sample caconfig.cnf file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Default configuration to use when one is not provided on the command line.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ ca ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default_ca      = local_ca</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Default location of directories and files needed to generate certificates.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ local_ca ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dir             = /home/&lt;username&gt;/myCA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">certificate     = $dir/cacert.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">database        = $dir/index.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">new_certs_dir   = $dir/signedcerts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private_key     = $dir/private/cakey.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">serial          = $dir/serial</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Default expiration and encryption policies for certificates.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default_crl_days        = 365</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default_days            = 1825</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default_md              = sha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">policy          = local_ca_policy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x509_extensions = local_ca_extensions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy extensions specified in the certificate request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">copy_extensions = copy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Default policy to use when generating server certificates.  The following</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># fields must be defined in the server certificate.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ local_ca_policy ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">commonName              = supplied</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stateOrProvinceName     = supplied</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">countryName             = supplied</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">emailAddress            = supplied</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">organizationName        = supplied</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">organizationalUnitName  = supplied</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x509 extensions to use when generating server certificates.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ local_ca_extensions ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">basicConstraints        = CA:false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># The default root certificate generation policy.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ req ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default_bits    = 2048</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default_keyfile = /home/&lt;username&gt;/myCA/private/cakey.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default_md      = sha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">prompt                  = no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">distinguished_name      = root_ca_distinguished_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x509_extensions         = root_ca_extensions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Root Certificate Authority distinguished name.  Change these fields to match</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># your local environment!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ root_ca_distinguished_name ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">commonName              = MyOwn Root Certificate Authority</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stateOrProvinceName     = NC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">countryName             = US</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">emailAddress            = root@tradeshowhell.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">organizationName        = Trade Show Hell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">organizationalUnitName  = IT Department</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ root_ca_extensions ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">basicConstraints        = CA:true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Make sure to adjust the site-specific details in the file, such as the two instances of <code>/home/&lt;username&gt;/</code> under
<code>[ local_ca ]</code> and <code>[ req ]</code>. Also change <code>commonName</code>, <code>stateOrProvinceName</code> <code>countryName</code> etc under
<code>[ root_ca_distinguished_name ]</code> accordingly. For more information on the directives contained within this configuration
file, use the <code>man config</code> command.</p></div></div>
<p>When we've edited the file to match our environment, save the file as <code>~/myCA/caconfig.cnf</code>.</p>
<p>Next, we need to generate the <strong>Certificate Authority Root Certificate</strong> and <strong>Key</strong>, by issuing a few commands. First,
do this:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">OPENSSL_CONF</span><span class="token operator" style="color:#393A34">=~</span><span class="token plain">/myCA/caconfig.cnf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The previous command sets an environment variable, <code>OPENSSL_CONF</code>, which forces the openssl tool to look for a
configuration file in an alternative location (in this case, <code>~/myCA/caconfig.cnf</code>).</p>
<p>Now, generate the CA certificate and key with the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl req </span><span class="token parameter variable" style="color:#36acaa">-x509</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-newkey</span><span class="token plain"> rsa:2048 </span><span class="token parameter variable" style="color:#36acaa">-out</span><span class="token plain"> cacert.pem </span><span class="token parameter variable" style="color:#36acaa">-outform</span><span class="token plain"> PEM </span><span class="token parameter variable" style="color:#36acaa">-days</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1825</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We should be prompted for a passphrase, and see output similar to this:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Generating a </span><span class="token number" style="color:#36acaa">2048</span><span class="token plain"> bit RSA private key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.+++</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.+++</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">writing new private key to </span><span class="token string" style="color:#e3116c">'/home/bshumate/myCA/private/cakey.pem'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter PEM pass phrase:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Verifying - Enter PEM pass phrase:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Do not forget the passphrase used with the command above!</strong> We'll need it every time we want to generate and sign a
new server or client certificate!</p>
<p>The process above will create a self-signed certificate using PEM format and RSA public/private key encryption. The
certificate will be valid for <em>1825</em> days. The location, and purpose of the resultant files is as follows:</p>
<ul>
<li><code>~/myCA/cacert.pem</code>: CA public <strong>certificate</strong></li>
<li><code>~/myCA/private/cakey.pem</code>: CA private key</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-self-signed-server-certificate">Creating a Self-Signed Server Certificate<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#creating-a-self-signed-server-certificate" class="hash-link" aria-label="Direct link to Creating a Self-Signed Server Certificate" title="Direct link to Creating a Self-Signed Server Certificate">​</a></h5>
<p>Now that we have a Certificate Authority configured, we may use it to sign self-signed certificates. Prior to beginning
the steps below, we may wish to encrypt the certificate's private key with a passphrase. The advantages of encrypting
the key with a passphrase include protection of the certificate in the event it is stolen.</p>
<p>The certificate cannot be used with SSL-enabled applications without entering the passphrase every time the SSL-enabled
application is started. This condition, while being most secure, can present a problem: If the server must be started in
an unattended manner as in the case of a computer restart, then no one will be available to enter the passphrase, and
subsequently the server will not start. One way to eliminate this condition involves a trade-off in security: The key
may be decrypted, to remove the passphrase necessity; thus SSL-enabled applications will start automatically, without a
need for us to enter a passphrase.</p>
<p>To actually generate a self-signed certificate for use with an SSL application, follow this process:</p>
<p>Create the server configuration file, by editing <code>~/myCA/exampleserver.cnf</code> with your favorite text editor. Add this
example content:</p>
<div class="language-conf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-conf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># exampleserver.cnf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ req ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">prompt                  = no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">distinguished_name      = server_distinguished_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">req_extensions          = v3_req</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ server_distinguished_name ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">commonName              = tradeshowhell.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stateOrProvinceName     = NC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">countryName             = US</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">emailAddress            = root@tradeshowhell.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">organizationName        = My Organization Name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">organizationalUnitName  = Subunit of My Large Organization</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ v3_req ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">basicConstraints        = CA:FALSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keyUsage                = nonRepudiation, digitalSignature, keyEncipherment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">subjectAltName          = @alt_names</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ alt_names ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DNS.0                   = tradeshowhell.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DNS.1                   = alt.tradeshowhell.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Be sure to change the values under <code>server_distinguished_name</code> especially the <strong>commonName</strong> value. The commonName value
must match the host name (i.e. AWS EC2 <strong>Public IPv4 DNS</strong>), or CNAME for the host we wish to use the key for. If the
commonName does not match the intended hostname, then host/certificate mismatch errors will appear in the client
applications of clients attempting to access the server.</p>
<p>Once we've edited the file appropriately, save it as <code>~/myCA/exampleserver.cnf</code>. Generate the server certificate, and
key with the following commands:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">OPENSSL_CONF</span><span class="token operator" style="color:#393A34">=~</span><span class="token plain">/myCA/exampleserver.cnf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The previous command sets an environment variable <code>OPENSSL_CONF</code> which forces the <code>openssl</code> tool to look for a
configuration file in an alternative location (in this case, <code>~/myCA/exampleserver.cnf</code>).</p>
<p>Now generate the certificate, and key:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl req </span><span class="token parameter variable" style="color:#36acaa">-newkey</span><span class="token plain"> rsa:1024 </span><span class="token parameter variable" style="color:#36acaa">-keyout</span><span class="token plain"> tempkey.pem </span><span class="token parameter variable" style="color:#36acaa">-keyform</span><span class="token plain"> PEM </span><span class="token parameter variable" style="color:#36acaa">-out</span><span class="token plain"> tempreq.pem </span><span class="token parameter variable" style="color:#36acaa">-outform</span><span class="token plain"> PEM</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We should be prompted for a passphrase, and see output similar to this:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Generating a </span><span class="token number" style="color:#36acaa">1024</span><span class="token plain"> bit RSA private key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.++++++</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.++++++</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">writing new private key to </span><span class="token string" style="color:#e3116c">'tempkey.pem'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter PEM pass phrase:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Verifying - Enter PEM pass phrase:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Don't forget the passphrase!</strong></p>
<p>Next, we may translate the temporary private key into an unencrypted key by using the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl rsa </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> tempkey.pem </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> server_key.pem</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We should be prompted for the passphrase used above, and see the following output:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Enter pass phrase:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">writing RSA key</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If we wish to leave the key encrypted with a passphrase, we will simply rename the temporary key using the following
command, instead of following the step above:</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>If we use a server key encrypted with a passphrase, the passphrase will have to be entered each time the server
application using the encrypted key is started. This means the server application will not start unless someone, or
something enters the key.</p></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">mv</span><span class="token plain"> tempkey.pem server_key.pem</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="signing-the-self-signed-server-certificate">Signing the Self-Signed Server Certificate<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#signing-the-self-signed-server-certificate" class="hash-link" aria-label="Direct link to Signing the Self-Signed Server Certificate" title="Direct link to Signing the Self-Signed Server Certificate">​</a></h5>
<p>Now we need to sign the server certificate with the Certificate Authority (CA) key using these commands:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">OPENSSL_CONF</span><span class="token operator" style="color:#393A34">=~</span><span class="token plain">/myCA/caconfig.cnf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The previous command modifies the environment variable <code>OPENSSL_CONF</code> which forces the <code>openssl</code> tool to look for a
configuration file in an alternative location (in this case, <code>~/myCA/caconfig.cnf</code> to switch back to the CA
configuration).</p>
<p>Then sign the certificate as follows:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl ca </span><span class="token parameter variable" style="color:#36acaa">-in</span><span class="token plain"> tempreq.pem </span><span class="token parameter variable" style="color:#36acaa">-out</span><span class="token plain"> server_crt.pem</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We will be prompted for the passphrase of the CA key as created in the
<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#establishing-a-certificate-authority">Certificate Authority setup</a> section above. Enter this passphrase at the prompt,
and we will then be prompted to confirm the information in the <code>exampleserver.cnf</code>, and finally asked to confirm signing
the certificate. Output should be similar to this:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Using configuration from /home/bshumate/myCA/caconfig.cnf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter pass phrase </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> /home/bshumate/myCA/private/cakey.pem:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Check that the request matches the signature</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Signature ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The Subject</span><span class="token string" style="color:#e3116c">'s Distinguished Name is as follows</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">commonName            :PRINTABLE:'</span><span class="token plain">tradeshowhell.com</span><span class="token string" style="color:#e3116c">'</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">stateOrProvinceName   :PRINTABLE:'</span><span class="token plain">NC</span><span class="token string" style="color:#e3116c">'</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">countryName           :PRINTABLE:'</span><span class="token plain">US</span><span class="token string" style="color:#e3116c">'</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">emailAddress          :IA5STRING:'</span><span class="token plain">root@tradeshowhell.com</span><span class="token string" style="color:#e3116c">'</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">organizationName      :PRINTABLE:'</span><span class="token plain">Trade Show Hell</span><span class="token string" style="color:#e3116c">'</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">organizationalUnitName:PRINTABLE:'</span><span class="token plain">Black Ops'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Certificate is to be certified </span><span class="token keyword" style="color:#00009f">until</span><span class="token plain"> Jan  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">21</span><span class="token plain">:50:08 </span><span class="token number" style="color:#36acaa">2011</span><span class="token plain"> GMT </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1825</span><span class="token plain"> days</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sign the certificate? </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">y/n</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">:y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> out of </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> certificate requests certified, commit? </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">y/n</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Write out database with </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> new entries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Data Base Updated</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Remove the temporary certificate, and key files with the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> tempkey.pem </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> tempreq.pem</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Hooray! We now have a self-signed server application certificate, and key pair:</p>
<ol>
<li><strong>server_crt.pem</strong>: Server application certificate file</li>
<li><strong>server_key.pem</strong>: Server application key file</li>
</ol>
<p>Next, we shall use the certificate for our Jenkins instance.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="chrome-bypass-your-connection-is-not-private-message">Chrome: Bypass "Your connection is not private" Message<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#chrome-bypass-your-connection-is-not-private-message" class="hash-link" aria-label="Direct link to Chrome: Bypass &quot;Your connection is not private&quot; Message" title="Direct link to Chrome: Bypass &quot;Your connection is not private&quot; Message">​</a></h5>
<ul>
<li>
<p>Option 1 - <strong>Simply Proceed</strong>: If Chrome says the security certificate is from the same domain we are attempting to
login to, it is likely there is nothing to worry about when this warning appears. To proceed, simply choose the
"<strong>Advanced</strong>" link, then choose "<code>Proceed to &lt;link&gt; (unsafe)</code>".</p>
<p><img loading="lazy" alt="Error loading Chrome-Advanced.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAGjCAMAAADtgxf3AAAAYFBMVEWcrcLfW1HHPjLOpIeEb2iCsfaJoLy/NyybhXpvf52svtL1fXv+AABkYmfq177avaOszfClnJrQysns8vDaQzZMjvr29vbwyGngu2Ld3NrAn1OxlE20s7Pn29Xx6drP4O6/cVupAAAbfElEQVR4XmKQEhcXl5CWlJSXG/ZwFMpKS4iLi0vBIl1mBIBRIIka6QB27li3dRwKgzBIFioIiI2wHfn+j7l2aIm5V9e7m25z8o0VGHI7mPCHHeevHwB+ld4J+AmELB2kg3R00pUO6x1KB+kgHdY7lA7rHUoH6SAd1juUDusdSgfpIH1hvUPpwbHeoXSQDtJhvUPpsN6hdJAO0mG9Q+mw3qF0kA7S0UlXOqx3KB2kg3RY71A6rHcoHaSDdFjvUDqsdygdpIP0G9Y7lA7rHUoH6eMFAT9D+uh7qSkdx5FSLa3HF2+97yUdn0m1xdau9H4pX6S6ExB4ve/1+BMpbuxK31fmsa2TfndeS+t9jL63mk7rBISUPqbgVPrnF9vr1ZDnuvVelt0/nPPVhg9Y+khvih7TeiMg3npvb8/unoKmrvT63mw7noSTTvqeztDfpW7Ah5PePqSv4X4/1SsB0dZ7+aeJ3kJKV3r9V+mJgEDrfUkv7w78ENKV/nXpBwGkf2tIX385kd5wfrA+CAiy3kc5/iu1ExCh9Lvz+Nat93Z8hUpAgNJ7Or5EgA/WSW/p+Gmpk16OLxDjPRrrvQaRrnTSrXfSlU466aSTntLtJrh06z3tva6b1mtk6Uq/vuww6uV83cSVbr23p4BeT+cP9hRdutL7tH45HyVHl27I1Zf15Xzboku33us+rbcPASVvD8JKt95X6xdlm8SVrvS14Cd1O4ku3XvvaVydT/K2hZau9JV62j4RWTrp68urfVnPWw4pnfTlfFlf5JjSrfflvPVp/Qp9Wg8nXenLednSfv8NH0669b6cj+duT6/W86v0BzmidKUv59ur9T2v0rccUDrpdTmfrY+SzyM9P64cULr1XsdT82V93TzIMaRb7+X4jVqX5pw+bmbrkxjSlZ6vx/M68vYL+XqKId16v5f+xnq00pV+Xefz9hvnCzGkk15O3/PnyHfr60gPI91XlfN8PGVfxW93pvdCwPdf7yNdha81l2+t55NOwLcufaV+Hebrsazntd2jhO4/RrbZ+Svz1ftS/sn5ICBC6c/W03mq51vri5xTC+Cc9MlopdQPSn1Paf+/85x0WO9QOqz3gCgdpIN0WO9QOqx3KB2kg3RY71A6rHcoHaSDdFjvSifdeofSQTpIh/UOpcN6h9JBOkiH9Q6lg3SQDtJBuvVOutLhvXcoHaT/zd7Z6EauIlHYkh2EkdoYSorkGQfe/y33nCqI+/ZsdpRo9t7khtK4AeoH3F+XQ9IeLLPfrTavqPydEn34ncm81j8FoHgnA3qTbVnFyr/tTZGoQ8Xl6W2b938Qt7T/b+irvD2d77bfe7rtBOFR/E1SPBL4j8uPj55AWVb5XpluKW6vXxv6/GHo/ttBtxwXbxdSyWdKoWotCAGx4EtO4dVjg5FpY0qnAixnLTlNmb3bWSWy3o2neu+X03Jz0w4X88yIka0WaBIuBJuavA73OpAZtQlMWW0Q9NVqSzCiU3OIU5UYnl9wUPJZ25kKynTDdNo4U/4W0C3JeRAAeEDW2tLRCtb5niqMbsQPSUQFEoTVkNgbnq2+tP4S1Virs5qHWZ2cxGUnH6+9zoakNev3C7nobTiTsrgevDuvcIgatKUsWvtskXQ2HhMonmf5ek4SbVgR38/BesL3gC5+DUkTXWbgOXLim3dBZ539bF5G545Py23KGZzgu93WNWSohNCXNSMKAoAsjPECZ/U70l6y12ib+vmbywe4BiFCRl5u4X4hV7QztdE5aELEGzRQwZkOkyDobTq6EdRJIz1pHUZC6CWt1VaQUmZ6esbfOIA8s8h5Qc93gE5glujMhHbBf8h0MlG5jMzM3JlpxG1d0S4VqUch+iAFfjR5XUgz0yUCmAbtw9DYyZXpULm/TFaxyMyUnG/XtO8XcjYDU7AuOihsEZq+VHIqGAqjY2Kqby7ue9w5I17zhgRC4+oeoLNOMaOHVe9PeDc00aA/9Xpe3AFBIew1sXDM9CvyfDW2a7QfK3tvocrDuhPOk8irM8weoO9dYRgNOskK4rtqqxdcz12DzkS3ma7yPb5ls9xiCuwN5z10udDcGxnnDkx/QBvvq76DdBNC3++hq1mv9oZr0O8y3X5wuyoP0JGjRNgYB0Kvv0JHyXqHLjbVQPxYAXh/c88dep/pKt/jvne+g53n25n+NnTm062DJsDQ6jjWpBL+Cl1+yXRA337NdK1xvb/uj9DdHfS3Mv0HZ3ZBV7eSbIHhchUN1qGvySX8C98k0w06aa3S87UkoKTKoMtdFjm5T1jLFCI1T2HWitaDITLZ4PeY6VLSLUjvahDLQ6ZD7Od8n2tnL3Pn+St0mhNnvc90Nc1+Ev04mJ3Nv72afC/oxROMRIKWma+bv1byJuyaoM6Vy/iqTk/Pb2Q6lQxdQtXgMM/VIJkLxwrQJ0LdjLYV1zWEqXdBL1emMzt3zM7Wc1zaXdDXIH1mywWdmtQXgiKbrRx5duyZUJRYvxd0Vm43/SX4tZ4eM73/dg4coK7ilMp/zXRGYRgE6VX1IxS6oK7RaEAuj9BvFdE0wH4/117MjEhn4rSZ9ExfuuLKdEt+M9roCSs2fuh0oNFg+ze5c2bzoecRGCyuWm9abtORmOkzui4pUKzqkX3HsXkrCDJanVDNmCne/SbRUdZAW/Ps0fpCjsV1eS/RAlxztcLYt6lQYDe9Qt83T8U1MwF0C2nNDP1uwUqyy81sH5OvmelDmN3/GhnQB/QBfUAfMqAP6N/pvvchIuPGyCED+pABfciAPmRAHzJW70NGpg8Z0IcM6EMG9CED+pCxeh8yMn3IgD5kQB/QB/QBfchYvQ8Zmf6+jbu29KD6nVV08i7/ksKHAXCw39tMco21ho8GLWnZ/03Qi/c7C/CRtL8T+qPEVTlIDG/s80XNb0Xm/VdFifuvg713J7M35Ldzo++/CfrmeEYlLuHQ/1FUjpxBTjIKQt/AveRcn+U4cpUXaiGlvuTDWnIIzQ8UcVVvBMqi0AM9WwBK9g4x6gZfxqDrVl9tDvWSvEyHMDa7m7fkxJjsNFNpJAraCMM+er9QzbM4ULFqLjqn5OrlXzJmgbpNzMbaUgp0aKFkwzRrSwwHe5x+H4UqYdgvCZ1ZxXwsaUnhXNZge0Dpvk2pAvrmA9g5bbi0o9spiuhT8jBdd+az0BzOcT218GuAFeEzjAWw3S44xAwrNqMrKYh3J21KYgjFqPPIbAe2GdzJjE7WOH50VBG65XtJVd0nER8YF0OoL2xqXF3yE+c01Y1WOs3p0HF5BsCNwnFusHZiRrVPTM9jTdm7NoqrBXVv1S8JvfjKd54lyIOEgNEqOVUp4BzSJNTL/KSbOfx4epaiIEB7XneZHaFvK8kG7Y2uwho2hE5PJxFFy8sYnuXHWkUB7Qp9lYLWTJi2vIBCo4Ex25yWcBZa21hCBYyr2AlwyHkVTqQY9NIXKgp9Z2B6QCutS3RcvwLgjnjPKPo0Z9dCOT11zQz4cusGGyUIVBuPtH/J1Xt05GHQQQFYcgKGOIlCW4Pw1fvFEQM4BzG/REbCA9BnRjgJHeZACrR9TYD24RcEUET8OICv+sNQoe/ssbFX6dCjuhp0DGroI+L4JUiJadGkpPGPJ45Md5nDa6ZTp5l+PydUEZTQRdeQyvQHxs8pLTvdYbJBwZMpOrHJoAcF3EehqiQ9vmKmF39blttae6bjSBl5kRr0BSVoH6UKtXx7YGzXTbx9zBuFDjO5g94znS6bywhwVJG2XIeWlYpCobPHlXvoP3eJUzV/OmW9GhBaZqDipzwrOktmTcvacVimO+mZ3qH3a0NJ2sVxywm+M2inkL1CF43G8zPoLQ7YK+gGXb42dBIiCWmZTk7oJFOFdvpg6ESKZoAaW6Yb9JX6ljpwA3S4dugNAT9CBkE69Of5BKcr04tH53Zl+tYzXQUAJD2RXVu2S2yZTohu0p87ZKCx5zcy3fxjy3RYAroAuia9QWfshOIlPWa6ArePa8v0+jWh95MC4uJDRatuaWJe4aRztIXcLlEbPEOJoW0Y+tdML7RYrkyHtu0SkrMFOM69UagGffPu+Q66DpJu0mZVgTK3oUpErSJ5D9jlHOq2huwV3bX30eZD1jUedW9luvqDacv0C7rD7DlNzlwY/nRV7qBHQm+jIORdpn/F3aViJhxuCgMwAuI4UkYuo3D15UT/JAACpW7mqjVNYhR2AEql+QkNexis2IawL9GW6ZLhVi35UYnkr5mDmDKjxIiwcXmVbqSD7trUGjsnKTE5VU1n1sEotvzbbAhYBETLTZfbnKYqebdQnPQkqOrWOXDf1RdNwKd1CyUzlUFamBLbKA4qGmc9vvkXLu9cyhLVg2gGvlskTTLunPkHpCRIkPc4PJpvyX/o196YUh3fsv0Ton+uek++lZf62HMcx0folUOeB/Qh3wn6kAF9yIA+ZKzeh4xMHzKgDxnQhdLKq/mm7XP5b2p2flDEwn5IivyB0/9+0G2D7sl2ZF4Dv459c79k25DftmB/VLDzQ5KnWtI6ycfm/vQH/sBcvx/0LaW03II+nQO0AT2lqb5pHN6CPn0MeknBvnQd0P/M6n07kbkxVFSUIxv5nOoLDjZSiKnyL53gCNh78Wsoi3vlcQZEqBus7VmKDGTQqUQTxPSrrcpMz2iw34ba1J6ivkHal3ESpwMBGbQlGhPd7ZwjI+bcv6bV8QLvypSNAdDgELlVqSZ0yWfaXwnmrIFfTlrRr1o9X9+eWbASMgIgypnQpeYqhYNURtGJt1Ov+m7xHeWrQJ2DNL2gc/80mc7kfd5+rnVb2vMTUWHV4xBQhvQn8D5tfq3gOW3LqhvxX9Y4HOsoyLZBl5+4Oszw6wraImkR1R7twLLv/68WalhLm0LXRof3cw11S4Hvf/EutP58urp5KHaJIQJsvIXoSSnI7KFOFdDJLfr9+vFDU8kxwGqD8V7wAgd98ADTGvAidTeXra73dZ25QUeEnDwG4bwmlDXDCFEmRCmcSEWUM/tVqI+uohU/GXTCnG/rUYUYf95cvPFYK44QFTp48IPRoF+0UOVzNCe4S3nhQw9rg27B3eFvtRy5R4NdSbc1o4RmygnGNNTHLCJ+yP4WENRFHv15ccwfxD+d2G0rwRJurWyCPW/o6/fogTL6o2NBNaAXZtnsOnT2M/2faRUR025/E7YSjqD3+2xAte4aAd2ow+7ubqMMG/Txwi8+0AicYW6PKdzp9hxNX/weHcw+F/Tyk0SAxKCvTLW9gBYAC0qeOiH3TJf+zBtCX6sdN1pCdoPeH5d0LiuNIZWKjbDXvWtI256a8yS20pP+QYGV/MTQ1Bp0ZQc0xZK2PxwV4zJGTgvqkTEdADSckdA3NURTBQQV95a8zg08SuK5A1DKvp4hMh5GI+gNamqKp4kJ9UpzlTaHvDDKTBPhRHad46XfOMVPBV229mAmckR5D90RJesrVKwKTp440yP0ldZ5uYdOmAtdmLgGPf4FeuXwBh25WtAQumrADh0SO/Sg0JmAFAKmFJiikeVs0INIdmI36Cp0ZnoXadA3H2Szh1Mh6zfP+OdU54lZbdBjh57pkj2r99C3lcH6w292jVIjyM+7DnnpOYr7PNCRBSfTeMsnH1GbiW/v0EEBytuegShnZrmi4koKVrLB+sr0CrbnXabnLIy+VrBzSaFPzHRGyQnwae/Zl3WgMyDQicABw99DlzgJoYN3JQv8U9rMJoHMLjqghapBPysz3dDsenlHgCJySEMmMG23cIvwFeqlyukneCVqkbAO8IVBOUK1y/dLfch0hVsYZXZ28/zsBK8cUuK9HsHg/TlW7wVQ1xvTFGXAZfb+8o4DSnKkONnYDgKULJDB4S7TJUJ5ZTqpgQsaaFHRM12jMMG1dFV4KZmvhdwkBQGLQtec7lmFMk1g0DNdYmtyhQdYyb9mOqHPfoJ9BXTJyXEBmHb18i4lBxxaRC76jhNVOHou5QIDQxhZWt3VjT1H2h+gF6rPyte9MAqr54KEQJG6XjJUE8b/LL+nbzEcGSCRaeBwVkFDYpb2uPwzkUA8Ifw1J4asvbqSRYrCym4VzXocMcC4yoaC/iAfnmHfhkByxMw2xoK/jYkBK7tYtcBiwUQ1ENIqHBDz0ElZxtA8HLLB76io5wNxAiZ50EZml09aUr8xLscn9JSjjsUTxzjQSGZcDSw4ODM9T3Zq4EPtanE2H+oOzlPaxF/i3TmEzDhobKvpqbLxv8IXLiV5r0+v+5iIt8fw/SN/HJH5cd45iEGvH55HkHdYF//0OP6XgM4L8MenKj/J/E+I/In/vc6mQf///w1e4rI8/t1YxrdsQwb0IR9bvQ8ZmT5kQB8yoA8Z0IcM6EPG6t025pLf2ti0UH59GZkuMdQtCHj+fqtFydOXpz6gU+LZd175/YaMJYVPDmBAL8l7sCxrTHtrr7WkM+0S/QqNJJ/SJJuTtNxWaTauQu0nkRjmVNmRnGi/pvyQz7znTAHPrDcBBhFtu5prWVzbdWiXmbexOIl660pVHx/KUUuuWdW70GlbnECfq95s8pllZHp0tW/kd3cP0qa3/YWSk34p3LZgE7twX/cYvqQJ0NW/7/kJRfnk0MfqfZ6k3fkpHahBt90Z1xCpiKdCnw2qsS9Rd4OFgxC6RN05M8sXgD4yndATofd2u/2s5f6vmQ72+upqiVPf8tM8S6TjgP7pd4wM+nO9Qbebt4WZzl45pCyoeiebQpd+j5jIDCfPTDenDTZVnv0T6NcCw88rY/WebSevDp1rclcJHRj9So3X1XuEQfRtJ2d0Ve0ndDGn5Eqir26eu37aZB/QKXIISdbelJcqEFZLVcYHmyLUmVUxm97PDtbNwa4V/2HXjm0AACAACPYahURn/zXtoHW/wkWDfpTde2UQ9zkjVzZBF3RBF3QNdJMu6IIu6IIu6IIu6IIu6IIu6IIu6KegC7qgC7qgC7qgC7qgC7qgC7qgC7qgCzp06NAFXdAFfdk7w95GYRgMD/WMACriYLA0ieb9//9ymHSt7k67bm3E0ZJHE4sT2i+PbKcCRHCuvRfngj4dWborjo8xtPo6CNPKsKwuPRTHxxlO+irwuDq89psdXJQ2tPdSDEejzdLvhlbO9HYRFvQRQvtM1rP0YFne6aOcLNudPgVZejE7D5qA+EWbJ0uPDb3TFIT7C3yWzqtKH9KZsg1hln4ftObu3dIzaCKG7Xf1XN5jdg6aiva/1vcs/fR9T4V+hyydjD/nvqGTaLWentpTlg5hBn43KHxLLV0+8k/5tA3poYfeIvCepGMcWcYvpMsXSq8LwGalB8/nwcR6C1fuUDoBoJHYYmFik0pQxCmDYkVggC8LxKJs5yLp7j2NdFe/fUqH3qLblXQVsSWAgFHsSIKzZxYaIRQjhg0IxMokbAvLFIFHxvZ6uvjGQ7XztS+bA2twTV/9KhH8VNWs4qq6kb6q3yTMQ7+/TKeRiAUUTxLFWZqMNsUSg5j+vEinUWyBgHFRv73y3pXiGqvx0tVwpZ4m9JjD4OcFj84jvNvBc18i7E665SoEJp0W6SL82bpNL0u0vRR1AZSXBQHOyc9Cm5Muh0a7N8zqracHj76R0Pe+sVY/h1MjKs43zpeu2WFPt2KtTIANiEYBX8u7nIu3LbASm+7PTCdaPg+R7W3kQlV6X/Mi3UMPjePg/GTSl/w309L7aZr6/UlXjps3sMBKOHgUJvAizYwLYsBgYAkFMf8BjLCR8vZ+p7uyt7zuPGvvWbs6VvRLprsS8t57qIoND3uSTsb1//lgf0aMLsH1xPMoHizvt7Z7n+2KauexbNKgUll+V+VFerCNXHyTvs3vQHpaGBv8nS4zQS5cQ/1rKpKl/wQGb0R6cY1Ovvoh0/NJz9fTu91dcMmXVk36UfdyPT1LTy/qFG/I2Dr5zhltzVSyRB90++SeruGYqqu38RbL7ZPLu7pEN7G2T3YzbH7CZXD6GKE4Pktxz/fIRV8mrL0f1xYv9Qgj1ne+bk+PuZ6CVl8F4dWRNLv3lZ9VHjp9MvKbHYJrH+KDnTskAgCAYSDmoqzzL3MehgYSC3+lnRzhcwbRER3RqeiWjuiIjuiIjuiIjugPiY7oiI7oy37ZrUgWwkB4rgU8Z1NwQNDk/d9yrfwgdMOw7LJXPQ6tkJTG4bNsexl7xYMuIqbCZp7K0KMigxGtTGaHGDwoeNbWgCFqUJIVE5Cjjsio8YNTXzUqYJjHkBVic4hg9pWpyt4UlYIh6oN9xhAZ39/Ax0PH1QiiB9phWMMRs2Xo6W0MsQcUHOpr7IanU4LMYXdtlAQSEq2Jfd4Rb+DHS1w369iIEzSb5wtlbc6Fdra7hbEtS2UX7JQ5ZghH9qyMc5Ts0cYdCT7d6SINCR2JqqBVaDkXYBjHYp7ybqWEWFiwmhjOqDurrBUoIFeQ2GEcQRMr6GyXQxNzrB4Nshu4ZeWC/iDE697J2ruKWEFnr6wPsU93ukCsoBcrJ6CCgk4PtoBaKi0/9xil7tdxVwFtOQpy6BL8RgMPW1E5Am1Ef5wuJubQa5+43KcQeYfeBxXL4Gi7YIfMRcMQvd7wjeHjoasgoBtQTgehs2doNaCHIZkskudihec8hOP0gtLvmtGFPFTgSzO/xsa1pATasJgrnJwC8BzpHSUvo207e6Zw7h10o2LdTNcJBUMvTt85fPr1DnIj9GvOGbwzVaFeCR9foc/ZBrCVzXPj/g46Cy2HE6dqmAdwoKsYjtNBeOl2FWe5BiAYBm7LleV0V646ISB8LpfQj9Mh9vFOf9Rdh/fv9CdCtAhldNfhUUgtl8lcOb1gEwFSstGo5DfH1nUCdKejoN8c6kAlanh9GTKNTlceFMbernfKLB8gvubVhlz3m9P1x+ngJUsj9eT5/pAzkCDEThLv0FXsOP3MZjyFXQARd2rw3J2jOq9rLjVyYtq1USWkLsBlsdtheIfO0ev3mzW1DRFpeP1O7z8PObCbLw85LGjSCKPgMh9LVbkDPd9Oyw4J+gpbUkklmhal/K5uMf8IOEPd0uf8ybwhliXzN8Cr05cAPcVUNkFeNRB7cfpi7sfpjxL69WtOd9p5vV+ToTQPoR+Hk82kB+fXbAZBQKG4ms+3lFpyRXyiioXtsAXE5FDo7ayhtbk8amJ0utca8dT4KqU7vX7384hmx9Ue4X8GOp2bHXg+FfrfNygU30t2Hv9mJwX+bAX43/9tP9BVaH/7TtInJX+Polb4E+ZCpf1mj44FAAAAAAb5W++eQykkHelIRzrSkY50pCMd6UhHOtKRjnSkn3SkIx3pSEc60pGOdKQjHelIRzrSkS5dunSkIx3pSEc60pGOdKQjHelIRzrSkU5DiXQpyREBRoEULNJBlJT0CACjQEpCHBrpYCAxEsAoEIdF+sgBo2AkRfooGI300UgfcWAUAACSSpuhnF7X7AAAAABJRU5ErkJggg==" width="500" height="419" class="img_ev3q">
<img loading="lazy" alt="Error loading Chrome-proceed-unsafe.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkIAAADDCAMAAABZCo5mAAAAYFBMVEX9Pz/7enr+AAC/jG338+TtyZ1wl8fy27X29vaZyvGYcG6Fbnhrf6/s9PXfs4LP5vHz69FraWqBs+C12/JvbY6nvdXe9vfMtaq7u7vh4eKmpqfYtF+4mVCojEnwyGnBpMngQrAoAAASvUlEQVR4XuyciZLbKBCGt4pT9+1jkuy+/1suf7cEaDXOemL5iENXRSItaJD1TQMj//PX97+dfftxtve1uoOVh5sDCRcms3uZGHYJ0+a9fX/7OAX7sPb84xvY+f4ohJQDaJwOdgeExsy+lknR9ZV9dzuvETp/FaFkyeQ6C8nmSwglS1ats1BVtU9DKFnKQslSFjp+PQslS3a+bUeWLNmNO7Jkyc43rYWSJZM37siSJas+jvtkoWRpLXScXmdH1uY7vO8SHVnf5nOs+kuv4lD7BlNo/sUw8opXaqroMtFf9yFmz1gLVc3bIAQT/eajfAZCO5q8jguln7IWOp4+pH3tLJQQavPhKv71I9dC6yy076ZedD3jUHcaJ9N1A5xxmYjBqe7Kqi66bhyoDb96l/g2iG5cJZN3XTkExrqxwYlqGdco78rGVdbVFqEJsRgKRe0YkSPNcugPL9Vdcys0OkIFul5QXVnTNba6QH2ToyMEZFYUeeEe+8pSJ0dcC2Hi0IiI+pthSCDPI+SOUBMh/T2YDldFz32dxsaPQQotxoHvQwo/gbc5HOjGxdVMcxw1H5udd2R2X4RABYZuBZDQ1vHQS9ENcZlRw2fQZbh3sOHQKFA4WDiooKgwJydDVwd3gvV2LtAx2yKET5o/beBhZoS6vlIFPvWysu1USaGtGg/LTzCoP0hAIvTB5xKEMYNVoDzzCJligNcUGbnViDOuRWHi0PIfirgZBhDiES4diRI/J324hzYn0rgvsUIIUPJ9cEdAyBSTlWiHbhAItor64lkI2QGZoazEOCiHiQNCSwd+XOZ64IHK0uGQOYR0peAEEs7TS3ikcKEYOUJhJm88GMZxHJDPtgj1dnniSBnRRCVxiVMDPwdXC/+YlgM1w+Vl/miLIYrtEUIV9oASgEBuHwYxQ2gY9boZBlqine/I4ATXfA+DR4iT2joLhSnUIySQlCXR3niC46i7f19I7pyFHCKDKB0nOX5UccpLU2gblf2Xs+pOIzXAgBDIYe5AjHaeAUmeMQModMo8foOtCajPEMo8Qo7ZqYoQEhkjJFVeoCuhV4sYVIjTH1IJrD0WDto4A0wIRhVL6m8TJg5tjcDkthkG2OARckfcAFf8PcwIoeYaIfLwfQSE4Ay047CJervJu2YhK7op70X34VCRYjx1mRiPXb8qkzlURDcAkelYMELERr0gRJDg+sGzEyPUXYkQ1hCfPDsrxuEMdkx5QJsYIcJmvUaWuW6qkIU46gAA/Ip3i1AcepzO5gJCPEJV/h9C2WcI8X3ECGV3R6i661oIWcUBoXAACA6DGod12TINgAWZyIQsFCayjCcyHLYTGTLc1QjhAWwQoqeu4MgnFJfrwMFEkxeXUZNiq+i51JonF+6A3XGYEJp7vYwQApjNRLZGiPtSY+PHACfTu57IiPjMI7SJuv9aaOdNvcHi2HDWVqCEDnGZJydaXOMIi7IQTw5cDUaeHmHDcpqqxgjVZXUJIYVHuUUIPl4A1wU35nWuFI5bWnx+MBAomwYkKVrFg29HcOaXuLLOaNmrnHsVJg7torbiAkKKEeGO6NS6sBuEeMk+Nn4MhJC/D0RFdR4SOwLWcdSbTf7nt9O22RUhZJeyogPtLzUfVmVGSC1763HKoyw0b+px56qg7SnnGcNZCye0M8WVCIHmvtoghOAltuHAwC+3a+4ZGI/w+u04jhqxccZyOkdNHqJurJzdqzBx6BYb8gsI8QjnjviU2S1CDmGK4cdATn8f2FZQG+M39QEhH/UuWUg+6cseUoCm5xt4+n1CA9NXU3DY57wjk4KTyfNNCv2Q0O+kUpOv8I5MihchSPCU8/qh+dfU2QsqOKRNCo5kD31HliyZTGrWGy1ZlXRkN1my843fWkyWTO6oI0uW1KxpLZQsZaHbLNnz39QnS2rWLyKULNkLZiE1NteprK43KfpH38Ifm4XOD9zUK02HX/v8ZT7Y68w89nW2FNkf/pc9HihFrDUOv4hQezVC6ndGKP19oUVwpcYTZF6xj7VOdJg94AJnIAQdDeu3SEJFUEnRez0VJEGoVswCsZqiIFbwKaqCHnTclGuwzMsLIXgIzeyodZBYXVJ0BWWWFNSUR29InYRbWEJC4IWB/Sma+p2X04vgSkFMJXTs81koeNq8r+Tp4BAyBa6zfsuLnaRY66k4X0HRAoBYMjVZw74gA0MWipvGMi8vHDNAVpQHj5Dv9YKiyyuzEJu0Wzx6V8x4YGoOKQWQL4b3zUL3f1NP3/Tlr4VHPo9Q8NS64sd6JtVUwfotPKaA0FpPlVFDgMEhrfd5GRi6XTVdybxmdRd8HDcgBE9QdLUbRRc6RU1EArjz6BeEfEiZa+7nPW2rqd8ZIRZcUbrAIfgCQt4DRBihAoVFvwUMPEJrJUNONTRy1bK+jn1owgjFTeVK5sXqLkTj2gEh1OI8FU5BjhM0EfWsCwAyMUJzSMYThzf++0LT8W5ZiAVXAaHgCwh5DycQ1MMs42V/lxGK/+oLHHHtywitZV6s7voJQl7RdRGh0mefGKH2T0Gouuv3hfhBRQgFX0AoeAQcVE/oCguanyMER8CF/7P2odYGobXMi9VdftZhrkWE0AVFV0CIbosbfTqRvTtCULMe77cjY8FVQCj2BV1KLMuSp4p+hHuv37qAEAq0Yj0OFIRXyZP3ef0Wuo2brmVerO7iVlx7cBcjhC4ougJCMtcHa5bRQ4xDCPmQHiGkq69aykIsuAoIxT7SOtHBe2hbXvE+q1/0W58j5BAZD7Tf5n3bvFfvbfAd/Z5bx03XMi/ilhpzbYuL8UR2QdEVEKLNfDnY8EsF2tT7kDFC/7J3RykIw0AQhneHXY1IxNfe/6KiryVNS6NC+L8jhGEIZJOUGdUpz8j6T0M9Lu3bXeCkvh+hvN8at7vAHxzdCOXnPv6g212oe2+zzg/c4AD/kYG9EGihoIXw49fvAV72wNfnheYFfkUEf7OC94WA+o0WikxvQWbQQtvStA3mzAu1hakP9iyTWEbPC7nezLwFZnpzzsjaCfIoWxDeyhDzQiHJrqUHT5OUtNCaSVb2gEliXmglJe3rIMQ026FlZAvZ/lVBSooygZHzQnFkUbDeDTEvlEd2QvBVZzMv5OciRISYF3K2QrTQUojQObQQETqICAUtRITGvnJGhA4iQpUWIkKDz8iI0Cm0UKWFiNDpM7K/RejF3vU3xwkC0WlP8KSCIEab/JPv/y3L/gAcm7Q1p9NJXCaGeC7uzvnusVyYfVBn+uzmNPy88eoJrTVTvOCK7G79oRBClQRt90DIT8P+hxWmjpyN9k4SBu/Z7oDQg2obt7H+daUVWTMcDCGQRhj3QKjdD6GFJRM0liBn5Z/zIaT+PIwAxvx6oVzocBaK+FbftOlnqueKKirpKTukJ+qAQKYnhJAKyYj1XMqTUJooBs+1Cbo1OAoGm8iMgL6c5ie7MfXgm1UaEKdzsqVSsykU7ZC3coCu0JhPXjv0A0Ic00syQ1N2iXBNfr35+YO9TBGGg/IG/MYXwO0XX5Etp+VCFUIovNJZf+tQR2GZVY8qFdw5DWonhYUaUkdZQ8gxouBW3vQDqWuAoErkUchiqp9BAKjbmrYdEhW6IsRBbM3rDK7chHII6wBV1h6yPt5ZDKYNyRSO3pLLuUIICZBmtuZ1QMUacGFGVF5Q+jos1BzPQgCdrNpCcOqKzIDOnYnriYyVUfq5QgjhwolFPnBwlroYcSAPYt2dakqxFAgBA+X7O3gJ3UJHMbFbNEEX+Asc5IMuVggR1STE1TkOtRssXAazr5wLbdLpo1kIKYEgNLLkReQLwPTUIXrWENI5g6gTmQt62EIoIjC4/DizEONiAyF/+xGmDCGKI9k0DgVlnMbRNUC6A/otgdy6DYTUBkIOvMBEqEwIDKEADee7a7DQ8vTS3A9noUId9UPOF2qHj6CdVixkNywEtk6/w0JtP2SycJr9bU3HZ1tYiG6bTp0erKsQ2rIQxvF3FjIZQpg8dWqKllkIOja9zrfT9vksCBUBC4e5EMuocIdSFVmio+ZCZGG90fSxt7duhQsY3LgpZidOW8DiMuBE5saVKaBAlVzIjXAzzfRUILQKkHRYOoiDciE4thCa5jQKzCuEIGoIuORCmJRdKBdaQIPjLAjVr294GRRCiHfuPK3IaAivyEabF0W90mAHmfcaQrSOAw4IqWk87cp6iiHEh0oGpkKoSGmEvkKoBIi+IF3DuGJWzqwQ4kAp/LGwENpZCGMhCLFi6BdfkdlPsF/ojO+0/ePSG0rvjHE/hOQ/9c+BmrSXC+RCn5GFVAgflNBoA+VgstlD9gvJZg/JhQRCwkICIdm1+CS7FgVCsmvxvzbZtbg8ogQkEBIIHbxrUcoyyN5pqeyxswmEjlRFbHfWfpNSeUpY6ONvijQvVc7eomYpc/ZYaVNRRWy+Sza05+PWiirib03tKGMqCPomqohvsbPULv83oZL3+FqUgJpfYoBcdIMbjAJWRgb4RS6j5wthAYxMBMEogNdiozP15NwmNQqGWWXPIiUhTu1bEVkI3Ik4ClgA7J3djuIwDIVvXKW9sFKpSkJ7k/d/y8U/3QyE2Z2wg0aLzseIppbjRuA964Jb5h6o0DgAv4oIwHi/EADjv0f2SgB+FREAhgqBn7nLGQCohcDP3+UMgPF+IQDG+4VeCUC/EAD4jgy8/FcRXwlA1yIA/B+rEIAKAfQLAbD/WL8QQL8QAOgXAlAhgH4hgPsLAYB+IYB+IYB+IYB+IQAVQr8QQL8QQL8QwF3OxgG4vxAA9B/3CwHcXwjgOzIA6Dv6hQDOyKBCAP1C4GfvO/1jKgRwfyEA+Nv6hQBUqKTxfiEA6LX9QtMRZbMmvg6vLKybQ8yKW0m2l6txLddBynNDLInvHanFufWb51A8wnpsHuKQCWfUSb3Wi8TReYtYaYr9omUTUm5G27dVmsEd/VhU81rNPomBioWq2TY+9bLxe9ZC5fv7haZL4jOFNjP5y+qcVnkD5cUnebGDTnJnyYY1do4ep/OzQaiyd+ZiOaIsxdxXXVJI0SNQPaIF7hctgS8lmnHzA9WsqzRaCtmaaqSijqT7wUJRZbOxTaWSGHf2+BrTVuKZQtFtJCNHrG6znbWyvfxO2D5x9GHnFxbbiDIk1wDJApLEsFxY2A5jB1rrnrJG6xctz1tYzFizBa46/T6FlrDoyrMcWo2avLHkOxWq7Mv8Evimfoqq4a5CTomaG7xe3Op6IDuiQvqktFHneMZpfi2Qb9cUkqXXFGUp6k/142KCHJF1r8R+0bpjsScJInH3xyqU2CTNhZTMO8kROhXybHoT6EjlpSoksvBIhUKa10s+rbJVL6rcJMVMSudocTo/ne9HXhcuWU1TlJxSOQmb+Jb4e95aM9Us0fpFWzwTPp13jbl+okJqlEgyXwa+iJR7FbK4fwcq5LoSWzm9tWww3Eqy1bes3NTIYXnsaKbOr+WSvXssybgukh4uJ1Ty1SwjRces06fYL1omi5MZSzwVilrR31TI5rHu24KoiGt8oEJqfhP2o7y2FrJ/6ctfymnSMiifxUSnLp2jxen8NIgifovkh7hNUScGSSvxpaZCMkNCialbtISxNbk0qWSxzmmIozhTjVTdv1VTYXlvFZpfrkL61MrpToViq49CcoFvueGy3zu6qfOj+rEWYj227Kg3acHS10I6X6J1i14PZTvrNHuWOX0tJIOzblpteyj8qBZKGVdwfD2F1hpuVGh6qEImK9QKWbNvnzj6c+cXbBAWV4dkCmQTpz1lM1+yV+GuEGErsV+0hmlnA0HOyj5VIV1FjXrwsLR0LrFTocH/x6BCczhua43o50JeTjdbylTZEsKhokkYO0cfdn42CBf2TCwpm2eJ+mGjmi2C+ZK/p0fsF+1ZSjWqka6mP6mQiFZW/yOa3bO5/1xoe9+uxZekEJWznE58d0bm1lNXNqr57pS3SBnN946uRU7zk8g+MGVYN/Mkr2rc3D7MPhXiiP2iZR1mMWPIlgfrIWx3KqTHZvVP2ePYAUj94+9Pp1N8y6tZSyrv0zsNcE19OISFx/2eh4qJxT/4o3eaRlUIAB5TIQB6FfrA+BkZAHxjGO2dBoDp5jF8BQcAfPMYLacB2Gf68GAeTSEAiBszjdZCADA3DSLmp66pB1Chw+B5p8HPhQBgLaEPgYnnp2ohABXSHNrpyVoI4JSMaZ4PUaD5iVoIAOKZtajWUmhQhQDwU3kZED+hQgDQKUM2HiynAWCeTYaYiZmHmz0AoHnX3CH9ynVUhQBgeZCe2pMMR1MIgJ3Yi2r5I95/DTUJyfALEICjcBRKSkoCKUlJEBNIyyCSEBBIy8iSBEbBKJCRlkMkISCQJhGMglEgB09CZIFRMAqGRxIaBaNJaBSMJqFRMJqEKAKjYBQAAEt5/P3OsWMuAAAAAElFTkSuQmCC" width="578" height="195" class="img_ev3q"></p>
</li>
<li>
<p>Option 2 - <strong>Prevent Warning</strong>: Click a blank section of the denial page and use our keyboard, type <code>thisisunsafe</code>.
This will add the website to a safe list, where we should not be prompted again. <em>Strange steps, but it surely
works!</em></p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="applying-for-a-certificate-using-certbot">Applying for a Certificate using Certbot<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#applying-for-a-certificate-using-certbot" class="hash-link" aria-label="Direct link to Applying for a Certificate using Certbot" title="Direct link to Applying for a Certificate using Certbot">​</a></h4>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Requirements</div><div class="admonitionContent_BuS1"><p><img loading="lazy" alt="Error loading certbot-requirements.png" src="https://hashicorp-aws.com/assets/images/certbot-requirements-b1ed3b3a8372e888a07e0ccd30164354.png" width="2100" height="558" class="img_ev3q"></p></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="install-and-setup-certbot">Install and Setup Certbot<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#install-and-setup-certbot" class="hash-link" aria-label="Direct link to Install and Setup Certbot" title="Direct link to Install and Setup Certbot">​</a></h5>
<ol>
<li>
<p><strong>SSH into the server</strong> SSH into the server (i.e. EC2 instance) running our Jenkins instance as a user with sudo
privileges.</p>
</li>
<li>
<p><strong>Install snapd</strong> from command line</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> snapd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Either log out and back in again, or restart the EC2 instance, to ensure snap's paths are updated correctly. To test
our system, install the <a href="https://snapcraft.io/hello-world" target="_blank" rel="noopener noreferrer">hello-world</a> snap and make sure it runs correctly:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> snap </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> hello-world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello-world </span><span class="token number" style="color:#36acaa">6.4</span><span class="token plain"> from Canonical✓ installed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ hello-world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello World</span><span class="token operator" style="color:#393A34">!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Ensure that our version of snapd is up to date</strong> Execute the following instructions on the command line on the
machine to ensure that we have the latest version of <code>snapd</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> snap </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> snap refresh core</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Install Certbot</strong> Run this command on the command line on the machine to install Certbot.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> snap </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--classic</span><span class="token plain"> certbot</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Prepare the Certbot command</strong> Execute the following instruction on the command line on the machine to ensure that
the <code>certbot</code> command can be run.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ln</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> /snap/bin/certbot /usr/bin/certbot</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Install Nginx</strong></p>
<p>We would choose Nginx instead of Apache server in this case by installing Nginx using</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> python3-certbot-nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that Certbot does not install nginx for us automatically and will through us an error, in the next step, of</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Could not find a usable 'nginx' binary. Ensure nginx exists, the binary is executable, and your PATH is set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">correctly</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Get and Install Certificates</strong> Run this command to get a certificate and have Certbot edit our nginx configuration
automatically to serve it, turning on HTTPS access in a single step.</p>
<p>:::note Prerequisite</p>
<ol>
<li>A DNS domain record, e.g. "jenkins.my-domain.com", has been setup to use</li>
<li>The server running Jenkins can be reached at port 80 publicly</li>
</ol>
<p>:::</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> certbot </span><span class="token parameter variable" style="color:#36acaa">--nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Enter an email address of ours</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> certbot </span><span class="token parameter variable" style="color:#36acaa">--nginx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Saving debug log to </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter email address </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">used </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> urgent renewal and security notices</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Enter </span><span class="token string" style="color:#e3116c">'c'</span><span class="token plain"> to cancel</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next give content to the Terms of Service and decide whether or not to receive promotion emails from Let's Encrypt
and Certbot</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Please </span><span class="token builtin class-name">read</span><span class="token plain"> the Terms of Service at</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">https://letsencrypt.org/documents/LE-SA-v1.3-September-21-2022.pdf. You must</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">agree </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> order to register with the ACME server. Do you agree?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">es/</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">N</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">o: Y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Would you be willing, once your first certificate is successfully issued, to</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">share your email address with the Electronic Frontier Foundation, a founding</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">partner of the Let</span><span class="token string" style="color:#e3116c">'s Encrypt project and the non-profit organization that</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">develops Certbot? We'</span><span class="token plain">d like to send you email about our work encrypting the web,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EFF news, campaigns, and ways to support digital freedom.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">es/</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">N</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">o: Y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As the last step, provide the domain name sitting in front of our Jenkins instance. Let's give it as
"jenkins.my-domain.com"</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Account registered.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Please enter the domain name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> you would like on your certificate </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">comma and/or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">space separated</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Enter </span><span class="token string" style="color:#e3116c">'c'</span><span class="token plain"> to cancel</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">: jenkins.my-domain.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requesting a certificate </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> jenkins.my-domain.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If everything works successfully, we shall see the output similar to the one below</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Successfully received certificate.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Certificate is saved at: /path/to/server_crt.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Key is saved at:         /path/to/server_key.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">This certificate expires on ****-**-**.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">These files will be updated when the certificate renews.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Certbot has </span><span class="token builtin class-name">set</span><span class="token plain"> up a scheduled task to automatically renew this certificate </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> the background.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Deploying certificate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Successfully deployed certificate </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> jenkins.my-domain.com to /some/path/</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Congratulations</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> You have successfully enabled HTTPS on </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">https://jenkins.my-domain.com</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>:::tip Troubleshooting</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Please enter the domain name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> you would like on your certificate </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">comma and/or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">space separated</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Enter </span><span class="token string" style="color:#e3116c">'c'</span><span class="token plain"> to cancel</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">: jenkins.my-domain.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requesting a certificate </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> jenkins.my-domain.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Certbot failed to authenticate some domains </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">authenticator: nginx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">. The Certificate Authority reported these</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">problems:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Domain: jenkins.my-domain.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type:   connection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Detail: </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.: Timeout during connect </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">likely firewall problem</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hint: The Certificate Authority failed to verify the temporary nginx configuration changes made by Certbot. Ensure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">the listed domains point to this nginx server and that it is accessible from the internet.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Some challenges have failed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ask </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token builtin class-name">help</span><span class="token plain"> or search </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> solutions at https://community.letsencrypt.org. See the logfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/var/log/letsencrypt/letsencrypt.log or re-run Certbot with </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">more</span><span class="token plain"> details.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This problem usually happens when we are re-deploying certificate. There are cases when we would like to deploy
Jenkins to a new server or VM and we are setting everything up anew. We then would want to request the same
certificate. <em>But before we do this our DNS record (i.e. "jenkins.my-domain.com") is still pointing to the old
Jenkins instance which in most cases has already been unreachable</em>. The solution then is to delete that DNS record
from our domain config</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Please enter the domain name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> you would like on your certificate </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">comma and/or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">space separated</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Enter </span><span class="token string" style="color:#e3116c">'c'</span><span class="token plain"> to cancel</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">: jenkins.my-domain.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requesting a certificate </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> jenkins.my-domain.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Certbot failed to authenticate some domains </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">authenticator: nginx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">. The Certificate Authority reported these</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">problems:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Domain: jenkins.my-domain.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type:   dns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Detail: DNS problem: NXDOMAIN looking up A </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> jenkins.my-domain.com - check that a DNS record exists </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> this</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> DNS problem: NXDOMAIN looking up AAAA </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> jenkins.my-domain.com - check that a DNS record exists </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> this</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">domain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hint: The Certificate Authority failed to verify the temporary nginx configuration changes made by Certbot. Ensure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">the listed domains point to this nginx server and that it is accessible from the internet.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Some challenges have failed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ask </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token builtin class-name">help</span><span class="token plain"> or search </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> solutions at https://community.letsencrypt.org. See the logfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/var/log/letsencrypt/letsencrypt.log or re-run Certbot with </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">more</span><span class="token plain"> details.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This error is rather straightforward. After we delete the DNS record, we simply forgot to link the DNS record to
a new server/VM IP
:::</p>
<p>Remember the two paths from the command above: "<strong>/path/to/server_crt.pem</strong>" and "<strong>/path/to/server_key.pem</strong>". We
will need them in order to <a href="https://hashicorp-aws.com/blog/jenkins-on-aws#convert-ssl-keys-to-pkcs12-format">load certificate onto Jenkins instance</a> later. In
addition, under "/path/to/" there is also the CA certificate "<strong>/path/to/cert.pem</strong>", which we will be using</p>
<p>:::tip <strong>Or</strong>, just get a certificate</p>
<p>If you're feeling more conservative and would like to make the changes to the nginx configuration by hand, run this
command instead of the one above:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> certbot certonly </span><span class="token parameter variable" style="color:#36acaa">--nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>:::</p>
</li>
<li>
<p><strong>Test automatic renewal</strong> The Certbot packages on our system come with a cron job or systemd timer that will renew
our certificates automatically before they expire. We will not need to run Certbot again, unless we change our
configuration. We can test automatic renewal for our certificates by running this command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> certbot renew --dry-run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The command to renew certbot is installed in one of the following locations:</p><ul>
<li><code>/etc/crontab/</code></li>
<li><code>/etc/cron.*/*</code></li>
<li><code>systemctl list-timers</code></li>
</ul></div></div>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="convert-ssl-keys-to-pkcs12-format">Convert SSL keys to PKCS12 format<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#convert-ssl-keys-to-pkcs12-format" class="hash-link" aria-label="Direct link to Convert SSL keys to PKCS12 format" title="Direct link to Convert SSL keys to PKCS12 format">​</a></h4>
<p>When <a href="https://hashicorp-aws.com/blog/jenkins-on-aws#generating-ssl-certificates">SSL is ready</a>, let's enable secure connection to our Jenkins instance. We would need
the following files:</p>
<ol>
<li><code>server_crt.pem</code> - The signed certificate</li>
<li><code>server_key.pem</code> - The certificate key</li>
<li><code>cacert.pem</code> - The CA certificate</li>
</ol>
<p><strong><em>In the case of <a href="https://hashicorp-aws.com/blog/jenkins-on-aws#self-signing-a-certificate">self-signed certificate</a></em></strong>, under <code>~/myCA</code> directory, execute</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl pkcs12 </span><span class="token parameter variable" style="color:#36acaa">-export</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-out</span><span class="token plain"> jenkins.p12 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token parameter variable" style="color:#36acaa">-passout</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'pass:your-strong-password'</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-inkey</span><span class="token plain"> server_key.pem </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token parameter variable" style="color:#36acaa">-in</span><span class="token plain"> server_crt.pem </span><span class="token parameter variable" style="color:#36acaa">-certfile</span><span class="token plain"> cacert.pem </span><span class="token parameter variable" style="color:#36acaa">-name</span><span class="token plain"> jenkins.some-domain.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em><strong>In the case of <a href="https://hashicorp-aws.com/blog/jenkins-on-aws#applying-for-a-certificate-using-certbot">publicly authorized certificate</a></strong></em>, run</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> openssl pkcs12 </span><span class="token parameter variable" style="color:#36acaa">-export</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-out</span><span class="token plain"> jenkins.p12 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-passout</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'pass:your-strong-password'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-inkey</span><span class="token plain"> /path/to/server_key.pem </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-in</span><span class="token plain"> /path/to/server_crt.pem </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-certfile</span><span class="token plain"> /path/to/cert.pem </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-name</span><span class="token plain"> jenkins.some-domain.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>where <code>your-strong-password</code> would be a password of our choice; for example, if you choose "sdfef3qxA" as the password,
put <code>-passout 'pass:sdfef3qxA'</code> there. Replace all the occurrences of "your-secrete-password" seen below with
"sdfef3qxA". In adiition, <em>Replace "jenkins.some-domain.com" with our own CNAME</em></p>
<p>The command given above converts SSL certs to intermediate PKCS12 format named <strong>jenkins.p12</strong>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="convert-pkcs12-to-jks-format">Convert PKCS12 to JKS format<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#convert-pkcs12-to-jks-format" class="hash-link" aria-label="Direct link to Convert PKCS12 to JKS format" title="Direct link to Convert PKCS12 to JKS format">​</a></h4>
<p>Use the following keytool command to convert the <code>jenkins.p12</code> file to JKS format.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">keytool </span><span class="token parameter variable" style="color:#36acaa">-importkeystore</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-srckeystore</span><span class="token plain"> jenkins.p12 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token parameter variable" style="color:#36acaa">-srcstorepass</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'your-secret-password'</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-srcstoretype</span><span class="token plain"> PKCS12 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token parameter variable" style="color:#36acaa">-srcalias</span><span class="token plain"> jenkins.some-domain.com </span><span class="token parameter variable" style="color:#36acaa">-deststoretype</span><span class="token plain"> JKS </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token parameter variable" style="color:#36acaa">-destkeystore</span><span class="token plain"> jenkins.jks </span><span class="token parameter variable" style="color:#36acaa">-deststorepass</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'your-secret-password'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token parameter variable" style="color:#36acaa">-destalias</span><span class="token plain"> jenkins.some-domain.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Replace the following with our own values:</p>
<ul>
<li><code>-srcstorepass</code> - <a href="https://hashicorp-aws.com/blog/jenkins-on-aws#convert-ssl-keys-to-pkcs12-format">The password we created above</a></li>
<li><code>-deststorepass</code> - A new password we created in this step</li>
<li><code>-srcalias</code> - The "jenkins.some-domain.com" or our own CNAME we used
<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#convert-ssl-keys-to-pkcs12-format">from the previous step</a></li>
<li><code>-destalias</code> - A destination CNAME, usually the same as <code>srcalias</code></li>
</ul>
<p>We should, after the command is executed, see a file named <strong>jenkins.jks</strong> in the current location.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="add-jks-to-jenkins-path">Add JKS to Jenkins Path<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#add-jks-to-jenkins-path" class="hash-link" aria-label="Direct link to Add JKS to Jenkins Path" title="Direct link to Add JKS to Jenkins Path">​</a></h4>
<p>The jenkins.jks file should be saved in a specific location where Jenkins can access it. Let's create a folder for it
and move the jenkins.jks key to that location.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> /etc/jenkins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> jenkins.jks /etc/jenkins/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Change the permissions of the keys and folder.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chown</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-R</span><span class="token plain"> jenkins: /etc/jenkins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">700</span><span class="token plain"> /etc/jenkins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">600</span><span class="token plain"> /etc/jenkins/jenkins.jks</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>The <code>jenkins:</code> used in the first command is a standard Jenkins user that get's created when we install
<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#long-term-support-release">Jenkins package</a>. We are essentially granting permission for that user here so do not
throw some other "smart" names there or change, please.</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="modify-jenkins-configuration-for-ssl">Modify Jenkins Configuration for SSL<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#modify-jenkins-configuration-for-ssl" class="hash-link" aria-label="Direct link to Modify Jenkins Configuration for SSL" title="Direct link to Modify Jenkins Configuration for SSL">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl edit jenkins</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-conf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-conf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### Anything between here and the comment below will become the new contents of the file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Environment="JENKINS_PORT=-1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Environment="JENKINS_HTTPS_PORT=443"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Environment="JENKINS_HTTPS_KEYSTORE=/etc/jenkins/jenkins.jks"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Environment="JENKINS_HTTPS_KEYSTORE_PASSWORD=&lt;some strong password&gt;"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Environment="JENKINS_HTTPS_LISTEN_ADDRESS=0.0.0.0"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### Lines below this comment will be discarded</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The config content above actually gets appended to the end of <code>systemctl cat jenkins</code> output, which we can verify to
make sure that the changes here actually propagates to Jenkins runtime.</p><p>Ignore the comments lines which starts with <code>### ...</code></p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="restart-jenkins">Restart Jenkins<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#restart-jenkins" class="hash-link" aria-label="Direct link to Restart Jenkins" title="Direct link to Restart Jenkins">​</a></h4>
<p>The restart command on Ubuntu C2 instance is</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl restart jenkins.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>which would probably fail, however, with the error</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl restart jenkins.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Job </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> jenkins.service failed because the control process exited with error code.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">See </span><span class="token string" style="color:#e3116c">"systemctl status jenkins.service"</span><span class="token plain"> and </span><span class="token string" style="color:#e3116c">"journalctl -xeu jenkins.service"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> details.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Whenever Jenkins control failes with <code>systemctl</code>, we can use its diagnosing command <code>journalctl</code> to further investigate:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">journalctl </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> jenkins.service </span><span class="token parameter variable" style="color:#36acaa">-r</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>which probably would show us the follwoing error</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Caused: java.io.IOException: Failed to </span><span class="token builtin class-name">bind</span><span class="token plain"> to /0.0.0.0:443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        at org.eclipse.jetty.server.ServerConnector.openAcceptChannel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ServerConnector.java:339</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        at java.base/sun.nio.ch.ServerSocketChannelImpl.bind</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ServerSocketChannelImpl.java:227</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        at java.base/sun.nio.ch.Net.bind</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Net.java:448</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        at java.base/sun.nio.ch.Net.bind</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Net.java:459</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        at java.base/sun.nio.ch.Net.bind0</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Native Method</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">java.net.SocketException: Permission denied</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is because Jetty, which is the Jenkins server, does not have sudo permission to listen on SSL port 443 on startup.
We could verify this by having Jenkins SSL port listen on a non-sudo port such as 8443. To do so, we will run</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl edit jenkins</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>again and change the line from</p>
<div class="language-conf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-conf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Environment="JENKINS_HTTPS_PORT=443"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>to</p>
<div class="language-conf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-conf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Environment="JENKINS_HTTPS_PORT=8443"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We will see that Jenkins process started:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-aux</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> jenkins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jenkins    </span><span class="token number" style="color:#36acaa">46742</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">45.1</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">99.1</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3245534</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">89876543</span><span class="token plain"> ?      Ssl  06:12   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:29 /usr/bin/java </span><span class="token parameter variable" style="color:#36acaa">-Djava.awt.headless</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true </span><span class="token parameter variable" style="color:#36acaa">-jar</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/share/java/jenkins.war </span><span class="token parameter variable" style="color:#36acaa">--webroot</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/var/cache/jenkins/war </span><span class="token parameter variable" style="color:#36acaa">--httpPort</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">-1 </span><span class="token parameter variable" style="color:#36acaa">--httpsPort</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">8443</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--httpsListenAddress</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token parameter variable" style="color:#36acaa">--httpsKeyStore</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/etc/jenkins/jenkins.jks </span><span class="token parameter variable" style="color:#36acaa">--httpsKeyStorePassword</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">**************</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We have 2 options.</p>
<ol>
<li>Instruct <code>sudo systemctl restart jenkins.service</code> to execute the command above with <code>sudo</code></li>
<li>Simply add an inbound rule to AWS EC2 security group to have Jenkins HTTPS listen on a port greater than 1024</li>
</ol>
<p>We would go with the 2nd option in this post. If we want to open the port for HTTPS and it's not 443, then in addition
to adding HTTPS rule, we could also just add a "Custom TCP" rule for the desired port (i.e. 8443) and it will work.</p>
<p>Now we should be able to access Jenkins over HTTPS with port 8443 at <code>https://jenkins.some-domain.com:8443</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="https-via-nginx-reverse-proxy">HTTPS via Nginx Reverse Proxy<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#https-via-nginx-reverse-proxy" class="hash-link" aria-label="Direct link to HTTPS via Nginx Reverse Proxy" title="Direct link to HTTPS via Nginx Reverse Proxy">​</a></h4>
<p>Proxying is typically used to distribute the load among several servers, seamlessly show content from different
websites, or pass requests for processing to application servers over protocols other than HTTP.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>What Is a Reverse Proxy Server?</div><div class="admonitionContent_BuS1"><p>A proxy server is a go‑between or intermediary server that forwards requests for content from multiple clients to
different servers across the Internet. A <strong>reverse proxy server</strong> is a type of proxy server that typically sits behind
the firewall in a private network and directs client requests to the appropriate backend server. A reverse proxy
provides an additional level of abstraction and control to ensure the smooth flow of network traffic between clients and
servers.</p><p>Common uses for a reverse proxy server include:</p><ul>
<li><strong>Load balancing</strong> A reverse proxy server can act as a "traffic cop" sitting in front of backend servers and
distributing client requests across a group of servers in a manner that maximizes speed and capacity utilization
while ensuring no one server is overloaded, which can degrade performance. If a server goes down, the load balancer
redirects traffic to the remaining online servers.</li>
<li><strong>Web acceleration</strong> Reverse proxies can compress inbound and outbound data, as well as cache commonly requested
content, both of which speed up the flow of traffic between clients and servers. They can also perform additional
tasks such as SSL encryption to take load off of your web servers, thereby boosting their performance.</li>
<li><strong>Security &amp; Anonymity</strong> By intercepting requests headed for your backend servers, a reverse proxy server protects
their identities and acts as an additional defense against security attacks. It also ensures that multiple servers can
be accessed from a single record locator or URL regardless of the structure of your local area network.</li>
</ul></div></div>
<p><img loading="lazy" alt="Error loading nginx-directives.png" src="https://hashicorp-aws.com/assets/images/nginx-directives-30dbdbddf077199d400879319068b9a9.png" width="1023" height="512" class="img_ev3q"></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="understanding-the-nginx-configuration-file-structure-and-configuration-contexts">Understanding the Nginx Configuration File Structure and Configuration Contexts<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#understanding-the-nginx-configuration-file-structure-and-configuration-contexts" class="hash-link" aria-label="Direct link to Understanding the Nginx Configuration File Structure and Configuration Contexts" title="Direct link to Understanding the Nginx Configuration File Structure and Configuration Contexts">​</a></h5>
<p>While we know Certbot utilizes Nginx's capabilities, people are often confused by some of the conventions they find in
Nginx configuration files. In this section, we will focus first on the basic structure of an Nginx configuration file.</p>
<p>The main Nginx configuration file is located at "<strong>/etc/nginx/nginx.conf</strong>" in our EC2 Ubuntu instance.</p>
<p>One of the first things that we should notice when looking at the main configuration file is that it appears to be
organized in a tree-like structure, defined by sets of brackets (that look like <code>{</code> and <code>}</code>). In Nginx parlance, the
areas that these brackets define are called “contexts” because they contain configuration details that are separated
according to their area of concern. Basically, these divisions provide an organizational structure along with some
conditional logic to decide whether to apply the configurations within.</p>
<p>Because contexts can be layered within one another, Nginx provides a level of directive inheritance. As a general rule,
if a directive is valid in multiple nested scopes, a declaration in a broader context will be passed on to any child
contexts as default values. The children contexts can override these values at will. It is worth noting that an override
to any array-type directives will replace the previous value, not append to it.</p>
<p>Directives can only be used in the contexts that they were designed for. Nginx will error out on reading a configuration
file with directives that are declared in the wrong context. The
<a href="http://nginx.org/en/docs/dirindex.html" target="_blank" rel="noopener noreferrer">Nginx documentation</a> contains information about which contexts each directive
is valid in, so it is a great reference if you are unsure.</p>
<p>Next, we'll discuss the most common contexts in Nginx.</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="the-main-context">The Main Context<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#the-main-context" class="hash-link" aria-label="Direct link to The Main Context" title="Direct link to The Main Context">​</a></h6>
<p>The most general context is the "main" or "global" context. It is the only context that is not contained within the
typical context blocks that look like this:</p>
<div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># The main context is here, outside any other contexts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">. . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">context {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    . . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Any directive that exist entirely outside of these blocks is said to inhabit the "main" context. Keep in mind that if
our Nginx configuration is set up in a modular fashion, some files will contain instructions that appear to exist
outside of a bracketed context, but which will be included within such a context when the configuration is stitched
together.</p>
<p>The main context represents the broadest environment for Nginx configuration. It is used to configure details that
affect the entire application on a basic level. While the directives in this section affect the lower contexts, many of
these aren't inherited because they cannot be overridden in lower levels.</p>
<p>Some common details that are configured in the main context are the user and group to run the worker processes as, the
number of workers, and the file to save the main process's PID. We can even define things like worker CPU affinity and
the "niceness" of worker processes. The default error file for the entire application can be set at this level (this can
be overridden in more specific contexts).</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="the-events-context">The Events Context<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#the-events-context" class="hash-link" aria-label="Direct link to The Events Context" title="Direct link to The Events Context">​</a></h6>
<p>The "events" context is contained within the "main" context. It is used to set global options that affect how Nginx
<strong>handles connections</strong> at a general level. There can only be a single events context defined within the Nginx
configuration.</p>
<p>This context will look like this in the configuration file, outside of any other bracketed contexts:</p>
<div class="language-conf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-conf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># main context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">events {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # events context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    . . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Nginx uses an event-based connection processing model, so the directives defined within this context determine how
worker processes should handle connections. Mainly, directives found here are used to either select the connection
processing technique to use, or to modify the way these methods are implemented.</p>
<p>Usually, the connection processing method is automatically selected based on the most efficient choice that the platform
has available. For Linux systems, the <em>epoll</em> method is usually the best choice.</p>
<p>Other items that can be configured are the number of connections each worker can handle, whether a worker will only take
a single connection at a time or take all pending connections after being notified about a pending connection, and
whether workers will take turns responding to events.</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="the-http-context">The HTTP Context<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#the-http-context" class="hash-link" aria-label="Direct link to The HTTP Context" title="Direct link to The HTTP Context">​</a></h6>
<p>When configuring Nginx as a web server or <strong>reverse proxy</strong>, the "http" context will hold the majority of the
configuration. This context will contain all of the directives and other contexts necessary to define how the program
will handle HTTP or <strong>HTTPS</strong> connections.</p>
<p>The http context is a sibling of the events context, so they should be listed side-by-side, rather than nested. They
both are children of the main context:</p>
<div class="language-conf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-conf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># main context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">events {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # events context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    . . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # http context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    . . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>While lower contexts get more specific about how to handle requests, directives at this level control the defaults for
every virtual server defined within. A large number of directives are configurable at this context and below, depending
on how we would like the inheritance to function.</p>
<p>Some of the directives that we are likely to encounter control the default locations for access and error logs
(<strong>access_log</strong> and <strong>error_log</strong>), configure asynchronous I/O for file operations (aio, sendfile, and directio), and
configure the server's statuses when errors occur (error_page). Other directives configure compression (gzip and
gzip_disable), fine-tune the TCP keep alive settings (<strong>keepalive_disable</strong>, <strong>keepalive_requests</strong>, and
<strong>keepalive_timeout</strong>), and the rules that Nginx will follow to try to optimize packets and system calls (sendfile,
tcp_nodelay, and tcp_nopush). Additional directives configure an application-level document root and index files (root
and index) and set up the various hash tables that are used to store different types of data (*_hash_bucket_size and
*_hash_max_size for server_names, types, and variables).</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="the-server-context">The Server Context<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#the-server-context" class="hash-link" aria-label="Direct link to The Server Context" title="Direct link to The Server Context">​</a></h6>
<p>The "server" context is declared within the "http" context. This is our first example of nested, bracketed contexts. It
is also the first context that allows for multiple declarations.</p>
<p>The general format for server context may look something like this. Remember that these reside within the http context:</p>
<div class="language-conf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-conf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># main context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # http context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # first server context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # second server context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The reason for allowing multiple declarations of the server context is that <strong>each instance defines a specific virtual
server to handle client requests</strong>. You can have as many server blocks as you need, each of which can handle a specific
subset of connections.</p>
<p>Due to the possibility and likelihood of multiple server blocks, this context type is also the first that Nginx must use
a selection algorithm to make decisions. Each client request will be handled according to the configuration defined in a
single server context, so Nginx must decide which server context is most appropriate based on details of the request.
The directives which decide if a server block will be used to answer a request are:</p>
<ul>
<li><strong>listen</strong>: The <em>IP:port</em> combination that this server block is designed to respond to. If a request is made by a
client that matches these values, this block will potentially be selected to handle the connection.</li>
<li><strong>server_name</strong>: This directive is the other component used to select a server block for processing. If there are
multiple server blocks with listen directives of the same specificity that can handle the request, Nginx will parse
the "Host" header of the request and match it against this directive.</li>
</ul>
<p>The directives in this context can override many of the directives that may be defined in the http context, including
logging, the document root, compression, etc. In addition to the directives that are taken from the http context, we
also can configure files to try to respond to requests (try_files), issue redirects and rewrites (return and rewrite),
and set arbitrary variables (set).</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="the-location-context">The Location Context<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#the-location-context" class="hash-link" aria-label="Direct link to The Location Context" title="Direct link to The Location Context">​</a></h6>
<p>The next context that we will deal with regularly is the location context. Location contexts share many relational
qualities with server contexts. For example, multiple location contexts can be defined, each location is used to handle
a certain type of client request, and each location is selected by virtue of matching the location definition against
the client request through a selection algorithm.</p>
<p>While the directives that determine whether to select a server block are defined within the server context, the
component that decides on a location's ability to handle a request is located in the location definition (the line that
opens the location block).</p>
<p>The general syntax looks like this:</p>
<div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">location match_modifier location_match {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    . . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Location blocks live within server contexts and, unlike server blocks, can be nested inside one another. This can be
useful for creating a more general location context to catch a certain subset of traffic, and then further processing it
based on more specific criteria with additional contexts inside:</p>
<div class="language-conf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-conf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># main context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # server context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location /match/criteria {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # first location context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location /other/criteria {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # second location context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        location nested_match {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # first nested location</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        location other_nested {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # second nested location</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>While server contexts are selected based on the requested IP address/port combination and the host name in the "Host"
header, location blocks further divide up the request handling within a server block by looking at the request URI. The
request URI is the portion of the request that comes after the domain name or IP address/port combination.</p>
<p>For example, if a client requests <code>http://www.example.com/blog</code> on port 80, the <code>http</code>, <code>www.example.com</code>, and port 80
would all be used to determine which server block to select. After a server is selected, the "/blog" portion (the
request URI), would be evaluated against the defined locations to determine which further context should be used to
respond to the request.</p>
<p>Many of the directives you are likely to see in a location context are also available at the parent levels. New
directives at this level allow you to reach locations outside of the document root (alias), mark the location as only
internally accessible (internal), and proxy to other servers or locations (using http, fastcgi, scgi, and uwsgi
proxying).</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="how-certbot--nginx-enable-ssl">How Certbot + Nginx Enable SSL<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#how-certbot--nginx-enable-ssl" class="hash-link" aria-label="Direct link to How Certbot + Nginx Enable SSL" title="Direct link to How Certbot + Nginx Enable SSL">​</a></h5>
<p>Recall that we have made our Jenkins instance available at <code>https://jenkins.some-domain.com:8443</code> with a port number of
"8443". If we would like to get rid of it and simply visit Jenkins at <code>https://jenkins.some-domain.com</code>, we will add an
redirect to Certbot-managed Nginx config at <strong>/etc/nginx/sites-enabled/default</strong>:</p>
<div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location / {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_pass https://localhost:8443;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listen [::]:443 ssl ipv6only=on;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listen 443 ssl;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssl_certificate ...;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssl_certificate_key ...;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note the proxying rule of <code>proxy_pass https://localhost:8443;</code>. If, instead, we have some other app that runs on top of
HTTP only (with port 8080 for example) while our EC2 host has SSL certificate, we would simply have our EC2 instance
taking care of all the SSL stuff and proxy all HTTPS request to the HTTP app via <code>proxy_pass http://localhost:8080;</code></p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>We may need to restart EC2 instance for the change above to take effect</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="post-installation-setup-wizard">Post-Installation Setup Wizard<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#post-installation-setup-wizard" class="hash-link" aria-label="Direct link to Post-Installation Setup Wizard" title="Direct link to Post-Installation Setup Wizard">​</a></h3>
<p>After downloading, installing and running Jenkins on SSL, the post-installation setup wizard begins.</p>
<p>The setup wizard takes us through a few quick "one-off" steps to unlock Jenkins, customize it with plugins and create
the first administrator user through which we can continue accessing Jenkins.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="unlocking-jenkins">Unlocking Jenkins<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#unlocking-jenkins" class="hash-link" aria-label="Direct link to Unlocking Jenkins" title="Direct link to Unlocking Jenkins">​</a></h4>
<p>When we first access a new Jenkins instance, we are asked to unlock it using an automatically-generated password. Browse
to <code>https://jenkins.my-domain.com:8443</code> and wait until the Unlock Jenkins page appears.</p>
<p><img loading="lazy" alt="Error loading unlock-jenkins.png" src="https://hashicorp-aws.com/assets/images/unlock-jenkins-b0765375d1d16daed87f0938c9e962ab.png" width="1239" height="783" class="img_ev3q"></p>
<p>As prompted, enter the password found in <strong>/var/lib/jenkins/secrets/initialAdminPassword</strong> on our EC2 instance path. Use
the following command to display this password:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ec2-user ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> /var/lib/jenkins/secrets/initialAdminPassword</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>On the Unlock Jenkins page, paste this password into the <strong>Administrator password</strong> field and click <strong>Continue</strong>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>This password also serves as the default administrator account's password (with username "admin") if we happen to skip
the subsequent user-creation step in the setup wizard (So, DO NOT skip this subsequent step).</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="customizing-jenkins-with-plugins">Customizing Jenkins with Plugins<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#customizing-jenkins-with-plugins" class="hash-link" aria-label="Direct link to Customizing Jenkins with Plugins" title="Direct link to Customizing Jenkins with Plugins">​</a></h4>
<p>After <a href="https://hashicorp-aws.com/blog/jenkins-on-aws#unlocking-jenkins">unlocking Jenkins</a>, the Customize Jenkins page appears. Here we can install any number of
useful plugins as part of our initial setup.</p>
<p>Click one of the two options shown:</p>
<ul>
<li><strong>Install suggested plugins</strong> - to install the recommended set of plugins, which are based on most common use cases.</li>
<li><strong>Select plugins to install</strong> - to choose which set of plugins to initially install. When we first access the plugin
selection page, the suggested plugins are selected by default.</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If we are not sure what plugins we need, choose <strong>Install suggested plugins</strong>. We can install (or remove) additional
Jenkins plugins at a later point in time via the
<a href="https://www.jenkins.io/doc/book/managing/" target="_blank" rel="noopener noreferrer"><strong>Manage Jenkins</strong></a> &gt;
<a href="https://www.jenkins.io/doc/book/managing/plugins/" target="_blank" rel="noopener noreferrer"><strong>Manage Plugins page in Jenkins</strong></a>.</p></div></div>
<p>The setup wizard shows the progression of Jenkins being configured and our chosen set of Jenkins plugins being
installed. This process may take a few minutes.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-the-first-administrator-user">Creating the First Administrator User<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#creating-the-first-administrator-user" class="hash-link" aria-label="Direct link to Creating the First Administrator User" title="Direct link to Creating the First Administrator User">​</a></h4>
<p><img loading="lazy" alt="Error loading create-admin-user.png" src="https://hashicorp-aws.com/assets/images/create-admin-user-ed93c763ea1cd4ba645b1bcebb910f77.png" width="1242" height="784" class="img_ev3q"></p>
<p>Finally, after <a href="https://hashicorp-aws.com/blog/jenkins-on-aws#customizing-jenkins-with-plugins">customizing Jenkins with plugins</a>, Jenkins asks us to create our
first administrator user.</p>
<ol>
<li>
<p>When the <strong>Create First Admin User</strong> page appears, specify the details for our administrator user in the respective
fields and click <strong>Save and Finish</strong>.</p>
</li>
<li>
<p>When the <strong>Jenkins is ready</strong> page appears, click <strong>Start using Jenkins</strong>.</p>
<ul>
<li>This page may indicate <strong>Jenkins is almost ready!</strong> instead and if so, click <strong>Restart</strong>.</li>
<li>If the page does not automatically refresh after a minute, use our web browser to refresh the page manually.</li>
</ul>
</li>
<li>
<p>If required, log in to Jenkins with the credentials of the user we just created and we are ready to start using
Jenkins!</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker-permission-error-when-trigger-by-jenkins">Docker Permission Error When Trigger by Jenkins<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#docker-permission-error-when-trigger-by-jenkins" class="hash-link" aria-label="Direct link to Docker Permission Error When Trigger by Jenkins" title="Direct link to Docker Permission Error When Trigger by Jenkins">​</a></h3>
<p>When a job <strong>Build Steps</strong> contains Shell Execution which includes some Docker command, it might fail with</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> build </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Got permission denied </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Post </span><span class="token string" style="color:#e3116c">"..."</span><span class="token builtin class-name">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dial unix /var/run/docker.sock: connect: permission denied</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The user "jenkins" needs to be added to the group docker:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">usermod</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-a</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-G</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> jenkins</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then restart Jenkins. (and reboot server if not working)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="echo-off-in-jenkins-console-output">Echo Off in Jenkins Console Output<a href="https://hashicorp-aws.com/blog/jenkins-on-aws#echo-off-in-jenkins-console-output" class="hash-link" aria-label="Direct link to Echo Off in Jenkins Console Output" title="Direct link to Echo Off in Jenkins Console Output">​</a></h3>
<p>By default, Jenkins launches Execute Shell script with <code>set -x</code>. This causes all commands to be echoed. We can type
<code>set +x</code> before any command to temporary override that behavior. Of course you will need <code>set -x</code> to start showing them
again.</p>
<p>You can override this behaviour for the whole script by putting the following at the top of the build step:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/bash +x</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>Jiaqi Liu</name>
            <uri>https://github.com/QubitPi</uri>
        </author>
        <category label="Jenkins" term="Jenkins"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[AWS Troubleshooting]]></title>
        <id>https://hashicorp-aws.com/blog/aws-troubleshooting</id>
        <link href="https://hashicorp-aws.com/blog/aws-troubleshooting"/>
        <updated>2022-10-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[[//]: # (Copyright Jiaqi Liu)]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-volume-in-ec2-instance-not-reflecting">New Volume in EC2 Instance Not Reflecting<a href="https://hashicorp-aws.com/blog/aws-troubleshooting#new-volume-in-ec2-instance-not-reflecting" class="hash-link" aria-label="Direct link to New Volume in EC2 Instance Not Reflecting" title="Direct link to New Volume in EC2 Instance Not Reflecting">​</a></h2>
<p>When we have increased the size of the volume attached a running EC2 instance. We are able to see the new volume using
<code>lsblk</code>:</p>
<p><img loading="lazy" alt="Error loading ec2-volume-1.png" src="https://hashicorp-aws.com/assets/images/ec2-volume-1-f280db8f5b7637d99d23b53bc02e1c7c.png" width="498" height="137" class="img_ev3q"></p>
<p>But when <code>df -h</code> command still displays the old volume size:</p>
<p><img loading="lazy" alt="Error loading ec2-volume-2.png" src="https://hashicorp-aws.com/assets/images/ec2-volume-2-fd495fbf5f157b7fb8cee027fdb686b3.png" width="547" height="215" class="img_ev3q"></p>
<p>This is because new volumes should be formatted to be accessible. Resized existing volumes should also be modified
(resized) from the inside of the operating system. The general information on how to do this safely (e.g. with snapshots)
is given in the following AWS documentation:</p>
<ul>
<li>
<p><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-using-volumes.html" target="_blank" rel="noopener noreferrer">Making an Amazon EBS volume available for use on Linux</a></p>
</li>
<li>
<p><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/recognize-expanded-volume-linux.html" target="_blank" rel="noopener noreferrer">Extending a Linux file system after resizing a volume</a></p>
</li>
<li>
<p>Based on the discussion in comments, two commands were used to successfully solve the problem:</p>
</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> growpart /dev/xvda </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> resize2fs /dev/xvda1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>Jiaqi Liu</name>
            <uri>https://github.com/QubitPi</uri>
        </author>
        <category label="AWS" term="AWS"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[AWS Identity and Access Management (IAM)]]></title>
        <id>https://hashicorp-aws.com/blog/aws-iam</id>
        <link href="https://hashicorp-aws.com/blog/aws-iam"/>
        <updated>2022-10-09T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[[//]: # (Copyright Jiaqi Liu)]]></summary>
        <content type="html"><![CDATA[<p>IAM provides the infrastructure necessary to control authentication and authorization for a user's account.</p>
<p>The IAM infrastructure includes the following elements:</p>
<p><img loading="lazy" alt="Error loading intro-diagram-policies-800.png" src="https://hashicorp-aws.com/assets/images/intro-diagram-policies-800-7cb01199ea1fa02446443f875f03bd7a.png" width="800" height="709" class="img_ev3q"></p>
<ul>
<li>
<p><strong>IAM Resources</strong> The user, group, role, policy, and identity provider objects that are stored in IAM. As with other
AWS services, we can add, edit, and remove resources from IAM. A resource is an object that exists within a service.
Examples include an Amazon EC2 instance, an IAM user, and an Amazon S3 bucket. <strong>The service defines a set of actions
that can be performed on each resource</strong>. If you create a request to perform an unrelated action on a resource, that
request is denied. For example, if you request to delete an IAM role but provide an IAM group resource, the request
fails.</p>
</li>
<li>
<p><strong>IAM Identities</strong> The IAM resource objects that are used to identify and group. We can attach a policy to an IAM
identity. These include users, groups, and roles.</p>
</li>
<li>
<p><strong>IAM Entities</strong> The IAM resource objects that AWS uses for authentication. These include IAM users and roles.</p>
</li>
<li>
<p><strong>Principals</strong> A person or application that can make a request for an action or operation on an AWS resource. The
principal is authenticated as the AWS account root user or an IAM entity to make requests to AWS. As a best practice,
do not use root user credentials for daily work. Instead, create IAM entities (users and roles). We can also support
federated users or programmatic access to allow an application to access our AWS account.</p>
<p>When a principal tries to use the AWS Management Console, the AWS API, or the AWS CLI, that principal sends a request
to AWS. The request includes the following information</p>
<ul>
<li><strong>Actions or operations</strong> The actions or operations that the principal wants to perform. This can be an action in
the AWS Management Console, or an operation in the AWS CLI or AWS API.</li>
<li><strong>Resources</strong> The AWS resource object upon which the actions or operations are performed.</li>
<li><strong>Principal</strong> The person or application that used an entity (user or role) to send the request. Information about
the principal includes the policies that are associated with the entity that the principal used to sign in.</li>
<li><strong>Environment data</strong> Information about the IP address, user agent, SSL enabled status, or the time of day.</li>
<li><strong>Resource data</strong> Data related to the resource that is being requested. This can include information such as a
DynamoDB table name or a tag on an Amazon EC2 instance.</li>
</ul>
<p>AWS gathers the request information into a request context, which is used to evaluate and authorize the request.</p>
</li>
<li>
<p><strong>Authentication</strong>  A principal must be authenticated (signed in to AWS) using their credentials to send a request to
AWS. Some services, such as Amazon S3 and AWS STS, allow a few requests from anonymous users. However, they are the
exception to the rule.</p>
<p>To authenticate from the console as a root user, we must sign in with our email address and password. As an IAM user,
provide our account ID or alias, and then our user name and password. To authenticate from the API or AWS CLI, we must
provide our access key and secret key. We might also be required to provide additional security information. For
example, AWS recommends that we use multi-factor authentication (MFA) to increase the security of our account.</p>
</li>
<li>
<p><strong>Authorization</strong> We must also be authorized (allowed) to complete our request. During authorization, AWS uses values
from the request context to check for policies that apply to the request. It then uses the policies to determine whether
to allow or deny the request. <strong>Most policies are stored in AWS as JSON documents</strong> and specify the permissions for
principal entities. There are several types of policies that can affect whether a request is authorized. <em>To provide
our users with permissions to access the AWS resources in their own account, we need only identity-based policies</em>.
Resource-based policies are popular for granting cross-account access. The other policy types are advanced features
and should be used carefully.</p>
<p>AWS checks each policy that applies to the context of a request. If a single permissions policy includes a denied
action, AWS denies the entire request and stops evaluating. This is called an <strong>explicit deny</strong>. Because requests are
denied by default, AWS authorizes a request only if every part of the request is allowed by the applicable permissions
policies.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-iam-admin-user-and-user-group">Create IAM Admin User and User Group<a href="https://hashicorp-aws.com/blog/aws-iam#create-iam-admin-user-and-user-group" class="hash-link" aria-label="Direct link to Create IAM Admin User and User Group" title="Direct link to Create IAM Admin User and User Group">​</a></h3>
<p>As a best practice, do not use the AWS account root user for any task where it's not required. Instead,
[create a new IAM user for each person that requires administrator access][create IAM admin]. Then make those users
administrators by placing the users into an "Administrators" user group to which you attach the AdministratorAccess
managed policy.</p>
<blockquote>
<p>⚠️ <strong>Safeguard our root user credentials and don't use them for everyday tasks</strong> ⚠️</p>
<p>When we create an AWS account you establish a root username and password to sign in to the AWS Management Console.
Safeguard our root user credentials the same way we would protect other sensitive personal information. We can do
this by configuring MFA for our root user credentials. It is not recommended to generate access keys for our root
user, because they allow full access to all our resources for all AWS services, including our billing information.
Don't use our root user for everyday tasks. Use the root user to complete the tasks that only the root user can
perform. For the complete list of these tasks, see [Tasks that require root user credentials][root user tasks] in the
<em>AWS General Reference</em>.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="identities">Identities<a href="https://hashicorp-aws.com/blog/aws-iam#identities" class="hash-link" aria-label="Direct link to Identities" title="Direct link to Identities">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="user-groups">User Groups<a href="https://hashicorp-aws.com/blog/aws-iam#user-groups" class="hash-link" aria-label="Direct link to User Groups" title="Direct link to User Groups">​</a></h4>
<p>An IAM user group is a collection of IAM users. User groups let you specify permissions for multiple users, which can
make it easier to manage the permissions for those users. For example, you could have a user group called Admins and
give that user group typical administrator permissions. Any user in that user group automatically has Admins group
permissions. If a new user joins your organization and needs administrator privileges you can assign the appropriate
permissions by adding the user to the Admins user group. If a person changes jobs in your organization, instead of
editing that user's permissions you can remove him or her from the old user groups and add him or her to the appropriate
new user groups.</p>
<p>Here are some important characteristics of user groups:</p>
<ul>
<li>A user group can contain many users, and a user can belong to multiple user groups.</li>
<li>User groups can't be nested; they can contain only users, not other user groups.</li>
<li>There is no default user group that automatically includes all users in the AWS account. If you want to have a user
group like that, you must create it and assign each new user to it.</li>
<li>The number and size of IAM resources in an AWS account, such as the number of groups, and the number of groups that a user can be a member of, are limited. For more information, see
<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_iam-quotas.html" target="_blank" rel="noopener noreferrer">IAM and AWS STS quotas, name requirements, and character limits</a>.</li>
</ul>
<p>The following diagram shows a simple example of a small company. The company owner creates an <strong>Admins</strong> user group for
users to create and manage other users as the company grows. The Admins user group creates a Developers user group and a
Test user group. Each of these user groups consists of users (humans and applications) that interact with AWS (Jim,
Brad, DevApp1, and so on). Each user has an individual set of security credentials. In this example, each user belongs
to a single user group. However, users can belong to multiple user groups.</p>
<p><img loading="lazy" alt="Error loading relationship-between-entities-example-diagram.png" src="https://hashicorp-aws.com/assets/images/relationship-between-entities-example-diagram-8d9ded7961ddfdc6ea6521fa5cccfc41.png" width="399" height="519" class="img_ev3q"></p>
<p>References</p>
<ul>
<li><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_groups_create.html" target="_blank" rel="noopener noreferrer">Creating IAM user groups</a></li>
<li><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_groups_manage.html" target="_blank" rel="noopener noreferrer">Managing IAM user groups</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="access-management">Access Management<a href="https://hashicorp-aws.com/blog/aws-iam#access-management" class="hash-link" aria-label="Direct link to Access Management" title="Direct link to Access Management">​</a></h3>
<p>We manage access in AWS by creating policies and attaching them to IAM <a href="https://hashicorp-aws.com/blog/aws-iam#identities">identities</a> (users, groups of
users, or roles) or AWS resources. A policy is an object in AWS that, when associated with an identity or resource,
defines their permissions. AWS evaluates these policies when an IAM principal (user or role) makes a request.
Permissions in the policies determine whether the request is allowed or denied. Most policies are stored in AWS as JSON
documents. AWS supports six types of policies:</p>
<ol>
<li><a href="https://hashicorp-aws.com/blog/aws-iam#identity-based-policies">identity-based policies</a></li>
<li><a href="https://hashicorp-aws.com/blog/aws-iam#resource-based-policies">resource-based policies</a></li>
<li>permissions boundaries</li>
<li>Organizations SCPs</li>
<li>ACLs,</li>
<li>and session policies.</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="identity-based-policies">Identity-Based Policies<a href="https://hashicorp-aws.com/blog/aws-iam#identity-based-policies" class="hash-link" aria-label="Direct link to Identity-Based Policies" title="Direct link to Identity-Based Policies">​</a></h4>
<p>Identity-based policies are JSON permissions policy documents that control what actions an identity (users, groups of
users, and roles) can perform, on which resources, and under what conditions. Identity-based policies can be further
categorized:</p>
<ul>
<li><strong>Managed policies</strong> - Standalone identity-based policies that you can attach to multiple users, groups, and roles in
your AWS account. There are two types of managed policies:<!-- -->
<ul>
<li><strong>AWS managed policies</strong> - Managed policies that are created and managed by AWS.</li>
<li><strong>Customer managed policies</strong> - Managed policies that you create and manage in your AWS account. Customer managed
policies provide more precise control over your policies than AWS managed policies.</li>
</ul>
</li>
<li><strong>Inline policies</strong> - Policies that you add directly to a single user, group, or role. Inline policies maintain a
strict one-to-one relationship between a policy and an identity. They are deleted when you delete the identity.</li>
</ul>
<p>To learn how to choose between managed and inline policies, see
<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_managed-vs-inline.html#choosing-managed-or-inline" target="_blank" rel="noopener noreferrer">Choosing between managed policies and inline policies</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resource-based-policies">Resource-Based Policies<a href="https://hashicorp-aws.com/blog/aws-iam#resource-based-policies" class="hash-link" aria-label="Direct link to Resource-Based Policies" title="Direct link to Resource-Based Policies">​</a></h4>
<p>Resource-based policies are JSON policy documents that we attach to a resource such as an Amazon S3 bucket. The policies
grant the specified principal permission to perform specific actions on that resource and defines under what conditions
this applies. <em>Resource-based policies are inline policies</em>; there are no managed resource-based policies.</p>
<p>To enable cross-account access, we can specify an entire account or IAM entities in another account as the principal in
a resource-based policy. Adding a cross-account principal to a resource-based policy, however, is only half of
establishing the trust relationship. When the principal and the resource are in separate AWS account, we must also use
an identity-based policy to grant the principal access to the resource. However, if a resource-based policy grants
access to a principal in the same account, no additional identity-based policy is required.  For step-by step
instructions for granting cross-account access, see
<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/tutorial_cross-account-with-roles.html" target="_blank" rel="noopener noreferrer">IAM tutorial: Delegate access across AWS accounts using IAM roles</a>.</p>
<p>The IAM service supports only one type of resource-based policy called <strong>role trust policy</strong>, which is attached to an
IAM role. <em>An IAM role is both an identity and a resource that supports resource-based policies</em>. For that reason, we
must attach both a trust policy and an identity-based policy to an IAM role. Trust policies define which principal
entities (accounts, users, roles, and federated users) can assume the role. To learn how IAM roles are different from
other resource-based policies, see
<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_compare-resource-policies.html" target="_blank" rel="noopener noreferrer">How IAM roles differ from resource-based policies</a>.</p>
<p>To see which other services support resource-based policies, see
<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_aws-services-that-work-with-iam.html" target="_blank" rel="noopener noreferrer">AWS services that work with IAM</a>. To learn more about resource-based policies, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_identity-vs-resource.html" target="_blank" rel="noopener noreferrer">Identity-based policies and resource-based policies</a>. To learn whether principals in accounts outside of your zone of trust (trusted organization or account) have access to assume your roles, see
<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/what-is-access-analyzer.html" target="_blank" rel="noopener noreferrer">What is IAM Access Analyzer?</a>.</p>]]></content>
        <author>
            <name>Jiaqi Liu</name>
            <uri>https://github.com/QubitPi</uri>
        </author>
        <category label="Security" term="Security"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Nexus 3 Repository Manager OSS]]></title>
        <id>https://hashicorp-aws.com/blog/nexus</id>
        <link href="https://hashicorp-aws.com/blog/nexus"/>
        <updated>2022-09-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[[//]: # (Copyright Jiaqi Liu)]]></summary>
        <content type="html"><![CDATA[<p>The proliferation of different repository formats and tools accessing them as well as the emergence of more publicly
available repositories has triggered the need to manage access and usage of these repositories and the components they
contain.</p>
<p>Hosting our private repositories for internal components has proven to be a very efficient methodology to exchange
components during all phases of the software development lifecycle. It is considered a best practice at this stage.</p>
<p>The task of managing all the repositories a development teams interact with can be supported by the use of a dedicated
server application - a <strong>repository manager</strong>. To put it simply, a repository manager provides two core features:</p>
<ol>
<li><strong>the ability of proxying a remote repository and cache components saving both bandwidth and time required to
retrieve a software component from a remote repository repeatedly</strong></li>
<li><strong>the ability of hosting a repository providing an organization with a deployment target for internal software
components</strong></li>
</ol>
<p>Just as Source Code Management (SCM) tools are designed to manage source code, repository managers have been designed to
manage and trace external dependencies and components generated by internal build.</p>
<p>Repository managers are an essential part of any enterprise or open-source software development effort and they enable
greater collaboration between developers and wider distribution of software by facilitating the exchange and usage of
binary components.</p>
<p>When we install a repository manager, we are bringing the power of a repository like the Central Repository into our
organization. We can use it to proxy the Central Repositories and other repositories, and host our own repositories for
internal and external use.</p>
<p>In addition to the two aforementioned core features, a repository manager can support the following use cases</p>
<ul>
<li>allows us to manage binary software components through the software development lifecycle</li>
<li>search and catalogue software components</li>
<li>control component releases with rules and add automated notifications</li>
<li>integrate with external security systems, such as LDAP</li>
<li>manage component metadata</li>
<li>control access to components and repositories</li>
<li>display component dependencies</li>
<li>brose component archive contents</li>
</ul>
<p>Using a repository manager provides a number of benefits, including</p>
<ul>
<li>improved software build performance due to faster component download off the local repository manager</li>
<li>reduced bandwidth usage due to component caching</li>
<li>higher predictability and scalability due to limited dependency on external repositories</li>
<li>increased understanding of component usage due to centralized storage of all used components</li>
<li>simplified developer configuration due to central access configuration to remote repositories and components on the
repository manager</li>
<li>unified method to provide components to consumer reducing complexity overheads</li>
<li>improved collaboration due to the simplified exchange of binary components</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="system-requirements">System Requirements<a href="https://hashicorp-aws.com/blog/nexus#system-requirements" class="hash-link" aria-label="Direct link to System Requirements" title="Direct link to System Requirements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="memory-requirements">Memory Requirements<a href="https://hashicorp-aws.com/blog/nexus#memory-requirements" class="hash-link" aria-label="Direct link to Memory Requirements" title="Direct link to Memory Requirements">​</a></h3>
<p>The requirements assume there are no other significant memory hungry processes running on the same host.</p>
<table><thead><tr><th style="text-align:center">****</th><th style="text-align:center"><strong>JVM Heap</strong></th><th style="text-align:center"><strong>JVM Direct</strong></th><th style="text-align:center"><strong>Host Physical/RAM</strong></th></tr></thead><tbody><tr><td style="text-align:center">**Minimum ( default ) **</td><td style="text-align:center">2703MB</td><td style="text-align:center">2703MB</td><td style="text-align:center">8GB</td></tr><tr><td style="text-align:center"><strong>Maximum</strong></td><td style="text-align:center">4GB</td><td style="text-align:center">(host physical/RAM * 2/3) - JVM max heap</td><td style="text-align:center">no limit</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="disk-space">Disk Space<a href="https://hashicorp-aws.com/blog/nexus#disk-space" class="hash-link" aria-label="Direct link to Disk Space" title="Direct link to Disk Space">​</a></h3>
<p><strong>Application Directory</strong> - The size of this directory varies slightly each release. It currently around 330 MB. It is
normal to have multiple application directories installed on the same host over time as repository manager is upgraded.</p>
<p><strong>Data Directory</strong> - On first start, repository manager creates the base files needed to operate. The bulk of disk
space will be held by our deployed and proxied artifacts, as well as any search indexes. This is highly installation
specific, and will be dependent on the repository formats used, the number of artifacts stored, the size of our teams
and projects, etc.  It's best to plan for a lot though, formats like Docker and Maven can use very large amounts of
storage (500Gb easily).  <strong>When available disk space drops below 4GB the database will switch to read-only mode</strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="concepts">Concepts<a href="https://hashicorp-aws.com/blog/nexus#concepts" class="hash-link" aria-label="Direct link to Concepts" title="Direct link to Concepts">​</a></h2>
<p>The Nexus Repository Manager OSS is all about working with <strong>components</strong> and <strong>repositories</strong>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="components">Components<a href="https://hashicorp-aws.com/blog/nexus#components" class="hash-link" aria-label="Direct link to Components" title="Direct link to Components">​</a></h3>
<p>A component is a resource like a library or a framework that is used as part of a software application at run-time,
integration or unit test execution time or required as part of build process. It could be an entire application or a
static resource like an image.</p>
<p>Typically these components are archives of a large variety of files, such as Java bytecode in class files, text files,
or binary files such as images, PDFs, and music files. The archives have numerous formats such as JAR, WAR, ZIP, NPM
packages, or .sh</p>
<p>Components can be composed of multiple, nested components themselves. For example, consider a Java web application
packaged as a WAR component. It contains a number of JAR components and a number of JavaScript libraries. All of these
are standalone components in other contexts and happend to be included as part of the WAR component.</p>
<p>Components provide all the building blocks and features that allow a development team to create powerful applications
by assembling them and adding their own business related components to create a full-fledged, powerful application.</p>
<p>Components, in other tool-chains, are called artifacts, packages, bundles, archives, and other terms. The concept and
idea, however, remain the same and component is used as the independent, generic term.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="repository">Repository<a href="https://hashicorp-aws.com/blog/nexus#repository" class="hash-link" aria-label="Direct link to Repository" title="Direct link to Repository">​</a></h3>
<p>A wide variety of components exists and more are continuously created by the open source community as well as
proprietary vendors. These are libraries and frameworks written in various languages on different platforms that are
used for application development every day. It has become a default pattern to build applications by combining the
features of multiple components with our own custom components containing our application code to create an application
for a specific domain</p>
<p>In order to ease the consumption and usage of components, they are aggregated into collection of components. These are
called <strong>repositories</strong> and are typically available on the internet as a service. On different platforms terms such as
registry and others are used for the same concept.</p>
<p>Examples for such repositories are</p>
<ul>
<li>the Central Repository, also known as Maven Central</li>
<li>the NuGet Gallery</li>
<li>RubyGems.org</li>
<li>npmjs.org</li>
</ul>
<p>Components in these repositories are accessed by numerous tools including</p>
<ul>
<li>package managers like npm, nuget or gem</li>
<li>build tools such as Maven, Gradle, rake or grunt</li>
<li>IDE's such as Eclipse and IntelliJ</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="repository-format">Repository Format<a href="https://hashicorp-aws.com/blog/nexus#repository-format" class="hash-link" aria-label="Direct link to Repository Format" title="Direct link to Repository Format">​</a></h3>
<p>The different repositories use different technologies to store and expose the components in them to client tools. This
defines a repository format and as such is closely related to the tools interacting with the repository.</p>
<p>For example, the Maven repository format relies on a specific directory structure defined by the identifiers of the
components and a number of XML formatted files for metadata. Component interaction is performed via plain HTTP commands
and some additional custom interaction with the XML files.</p>
<p>Other repositories formats use database for storage and REST API interactions, or different directory structures wit
format specific files for the metadata</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="repository-management">Repository Management<a href="https://hashicorp-aws.com/blog/nexus#repository-management" class="hash-link" aria-label="Direct link to Repository Management" title="Direct link to Repository Management">​</a></h2>
<p>We've seen that repositories are the containers for the components provided to our users. Creating and managing
repositories is an essential part of our Nexus Repository configuration, since it allows us to expose more components
to our users. It supports proxy repositories, hosted repositories and repository groups in a number of different
repository formats.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>To manage repositories select the <strong>Repositories</strong> item in the Repository sub menu of the <strong>Administration</strong> menu.</p></div></div>
<p>The binary parts of a repository are stored in <strong>blob stores</strong>, which can be configured by selecting Blob Stores from
the Repository sub menu of the Administration menu.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="repository-types">Repository Types<a href="https://hashicorp-aws.com/blog/nexus#repository-types" class="hash-link" aria-label="Direct link to Repository Types" title="Direct link to Repository Types">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="proxy-repository">Proxy Repository<a href="https://hashicorp-aws.com/blog/nexus#proxy-repository" class="hash-link" aria-label="Direct link to Proxy Repository" title="Direct link to Proxy Repository">​</a></h4>
<p><strong>A repository with the type proxy, also known as a proxy repository, is a repository that is linked to a remote
repository</strong>. Any request for a component is verified against the local content of the proxy repository. If no local
component is found, the request is forwarded to the remote repository. The component is then retrieved and stored
locally in the repository manager, which acts as a cache. Subsequent requests for the same component are then fulfilled
from the local storage, therefore eliminating the network bandwidth and time overhead of retrieving the component from
the remote repository again.</p>
<p>By default, the repository manager ships with the following configured proxy repositories:</p>
<ul>
<li><strong>maven-central</strong> This proxy repository accesses the Central Repository, formerly known as Maven Central. It is the
default component repository built into Apache Maven</li>
<li><strong>nuget.org-proxy</strong> This proxy repository accesses the <a href="https://www.nuget.org/" target="_blank" rel="noopener noreferrer">NuGet Gallery</a>. It is the default
component repository used by the <code>nuget</code> package management tool used for .Net development.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hosted-repository">Hosted Repository<a href="https://hashicorp-aws.com/blog/nexus#hosted-repository" class="hash-link" aria-label="Direct link to Hosted Repository" title="Direct link to Hosted Repository">​</a></h4>
<p>A repository with the type hosted, also known as a <strong>hosted repository</strong>, is a repository that stores components in the
repository manager as the authoritative location for these components.</p>
<p>By default, the repository manager ships with the following configured hosted repositories:</p>
<ul>
<li><strong>maven-releases</strong> This hosted repository uses the maven2 repository format with a release version policy. It is
intended to be the repository where an organization publishes internal releases. We can also use this repository for
third-party components that are not available in external repositories and can therefore not be retrieved via a
configured proxy repository. Examples of these components could be commercial, proprietary libraries such as an
Oracle
JDBC driver that may be referenced by the organization.</li>
<li><strong>maven-snapshots</strong> This hosted repository uses the maven2 repository format with a snapshot version policy. It is
intended to be the repository where the organization publishes internal development versions, also known as
snapshots.</li>
<li><strong>nuget-hosted</strong>  This hosted repository is where the organization can publish internal releases in repository using
the nuget repository format. We can also use this repository for third-party components that are not available in
external repositories, that could potentially be proxied to gain access to the components.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="repository-group">Repository Group<a href="https://hashicorp-aws.com/blog/nexus#repository-group" class="hash-link" aria-label="Direct link to Repository Group" title="Direct link to Repository Group">​</a></h4>
<p>A repository with the type group, also known as <strong>repository group</strong>, represents a powerful feature of Nexus Repository
Manager. They allow us to combine multiple repositories and other repository groups in a single repository. This in
turn means that our users can rely on a single URL for their configuration needs, while the administrators can add more
repositories and therefore components to the repository group.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>When a user is given a privilege to a group repository, then that user will also have that privilege to all transitive
members of that group repository <strong>only when their request is directed to the group repository</strong>. Direct requests to
individual member repositories will only work if the user is given explicit permission to the individual repository.</p></div></div>
<p>The repository manager ships with the following groups:</p>
<ul>
<li><strong>maven-public</strong> The maven-public group is a repository group of maven2 formatted repositories and combines the
important <strong>external proxy repository for the Central Repository</strong> with the hosted repositories <strong>maven-releases</strong>
and maven-snapshots. This allows us to <em>expose the components of the Central Repository as well as our internal
components in one single, simple-to-use repository</em> and therefore URL.</li>
<li><strong>nuget-group</strong> This group combines the nuget formatted repositories nuget-hosted and nuget.org-proxy into a single
repository for .Net development with NuGet.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="managing-repositories-and-repository-groups">Managing Repositories and Repository Groups<a href="https://hashicorp-aws.com/blog/nexus#managing-repositories-and-repository-groups" class="hash-link" aria-label="Direct link to Managing Repositories and Repository Groups" title="Direct link to Managing Repositories and Repository Groups">​</a></h3>
<p>TBA</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-maven-repositories">Setting Up Maven Repositories<a href="https://hashicorp-aws.com/blog/nexus#setting-up-maven-repositories" class="hash-link" aria-label="Direct link to Setting Up Maven Repositories" title="Direct link to Setting Up Maven Repositories">​</a></h4>
<p>Historically Nexus Repository Manager started as a repository manager supporting the Maven repository format and it
continues to include excellent support for users of Apache Maven.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="maven-repository-format-overview">Maven Repository Format Overview<a href="https://hashicorp-aws.com/blog/nexus#maven-repository-format-overview" class="hash-link" aria-label="Direct link to Maven Repository Format Overview" title="Direct link to Maven Repository Format Overview">​</a></h3>
<blockquote>
<p>Looking at the Maven repository format and associated concepts and ideas allows us to grasp some of the details and
intricacies involved with different tools and repository formats, that will help us appreciate the need for
repository management.</p>
</blockquote>
<p>Maven developers are familiar with the concept of a repository, since repositories are used by default. The primary
type of a binary component in a Maven format repository is a JAR file containing Java byte-code. This is due to the
Java background of Maven and the fact that the default component type is a JAR. Practically however, there is no limit
to what type of component can be stored in a Maven repository. For example, we can easily deploy WAR or EAR files,
source archives, Flash libraries and applications, Android archives or applications or Ruby libraries to a Maven
repository.</p>
<p>Every software component is described by an XML document called a Project Object Model (POM). This POM contains
information that describes a project and lists a project’s dependencies - the binary software components, which a given
component depends upon for successful compilation or execution.</p>
<p>When Maven downloads a component like a dependency or a plugin from a repository, it also downloads that component's
POM. <em>Given a component's POM, Maven can then download any other components that are required by that component</em>.</p>
<p>Maven, which interacts with a Maven repository to search for binary software components, model the projects they manage
and retrieve software components on-demand from a repository.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="the-central-repository">The Central Repository<a href="https://hashicorp-aws.com/blog/nexus#the-central-repository" class="hash-link" aria-label="Direct link to The Central Repository" title="Direct link to The Central Repository">​</a></h4>
<p>When we download and install Maven without any customization, it retrieves components from the Central Repository. It
serves millions of Maven users every single day. It is the default, built-in repository using the Maven repository
format and is <em>managed by Sonatype</em>. We can also view statistics about the size of the Central Repository
<a href="https://search.maven.org/stats" target="_blank" rel="noopener noreferrer">online</a>.</p>
<p>The Central Repository is the largest repository for Java-based components. It can be easily used from other build
tools as well. One can look at the Central Repository as an example of how Maven repositories operate and how they are
assembled. Here are some of the properties of release repositories such as the Central Repository:</p>
<ul>
<li><strong>Component Metadata</strong> All software components added to the Central Repository require proper metadata, including a
Project Object Model (POM) for each component that describes the component itself and any dependencies that software
component might have.</li>
<li><strong>Release Stability</strong> Once published to the Central Repository, a component and the metadata describing that
component never change. This property of a release repository, like the Central Repository,  guarantees that
projects that depend on releases will be repeatable and stable over time. While new software components are being
published every day, once a component is assigned a release number on the Central Repository, there is a strict
policy against modifying the contents of a software component after a release.</li>
<li><strong>Component Security</strong> The Central Repository contains cryptographic hashes and PGP signatures that can be used to
verify the authenticity and integrity of software components served and supports connections in a secure manner via
<strong>HTTPS</strong>.</li>
<li><strong>Performance</strong> The Central Repository is exposed to the users globally via a high performance content delivery
network of servers.</li>
</ul>
<p>In addition to the Central Repository, there are a number of major organizations, such as Red Hat, Oracle or the Apache
Software foundation, which maintain separate additional repositories. Best practice to facilitate these available
repositories with Nexus Repository Manager OSS is to proxy and cache the contents on our own network.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="component-coordinates-and-the-repository-format">Component Coordinates and the Repository Format<a href="https://hashicorp-aws.com/blog/nexus#component-coordinates-and-the-repository-format" class="hash-link" aria-label="Direct link to Component Coordinates and the Repository Format" title="Direct link to Component Coordinates and the Repository Format">​</a></h4>
<p>Component coordinates create a unique identifier for a component. Maven coordinates use the following values: groupId,
artifactId, version, and packaging. This set of coordinates is often referred to as a <strong>GAV coordinate</strong>, which is
short for Group, Artifact, Version coordinate. The GAV coordinate standard is the foundation for Maven's ability to
manage dependencies. Four elements of this coordinate system are described below:</p>
<ul>
<li><strong>groupId</strong> A group identifier groups a set of components into a logical group. Groups are often designed to reflect
the <strong>organization</strong> under which a particular software component is being produced. For example, software components
produced by the Maven project at the Apache Software Foundation are available under the groupId "org.apache.maven"</li>
<li><strong>artifactId</strong> An artifactId is an identifier for a software component and should be a descriptive name. The
combination of groupId and artifactId must be unique for a specific project.</li>
<li><strong>version</strong> The version of a project ideally follows the established convention of
<a href="http://semver.org/" target="_blank" rel="noopener noreferrer"><strong>semantic versioning</strong></a>. For example, if our simple-library component has a major release
version of 1, a minor release version of 2 and point release version of 3, the version would be 1.2.3. Versions can
also have <strong>alphanumeric qualifiers</strong> which are often used to denote release status. An example of such a qualifier
would be a version like "1.2.3-BETA" where BETA signals a stage of testing meaningful to consumers of a software
component.</li>
<li><strong>packaging</strong> Maven was initially created to handle JAR files, but a Maven repository is completely agnostic about
the type of component it is managing. Packaging can be anything that describes any binary software format including:
zip, nar, war, ear, sar and aar.</li>
</ul>
<p>Tools designed to interact Maven repositories translate component coordinates into a URL which corresponds to a
location in a Maven repository. If a tool such as Maven is looking for version "1.2.0" of the "commons-lang" JAR in
the group "org.apache.commons", this request is translated into:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">repoURL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">/org/apache/commons/commons-lang/1.2.0/commons-lang-1.2.0.jar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Maven also downloads the corresponding POM for "commons-lang 1.2.0" from:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">repoURL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">/org/apache/commons/commons-lang/1.2.0/commons-lang-1.2.0.pom</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This POM may contain references to other components, which are then retrieved from the same repository using the same
URL patterns.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="release-and-snapshot-repositories">Release and Snapshot Repositories<a href="https://hashicorp-aws.com/blog/nexus#release-and-snapshot-repositories" class="hash-link" aria-label="Direct link to Release and Snapshot Repositories" title="Direct link to Release and Snapshot Repositories">​</a></h4>
<p>A Maven repository stores two types of components:</p>
<ol>
<li><strong>Release repositories</strong> are for stable, static release components. A release component is a component which was
created by a specific, versioned release. For example, consider the "1.2.0" release of the "commons-lang" library
stored in the Central Repository. This release component, "commons-lang-1.2.0.jar", and the associated POM,
"commons-lang-1.2.0.pom", are static objects which will never change in the Central Repository. Released components
are considered to be solid, stable and perpetual in order to guarantee that builds which depend upon them are
repeatable over time. The released JAR component is associated with a PGP signature, an MD5, and a SHA check-sum
which can be used to verify both the authenticity and integrity of the binary software component.</li>
<li><strong>Snapshot repositories</strong> are frequently updated repositories that store binary software components from projects
under constant development. Snapshot components are components generated during the development of a software
project. A Snapshot component has both a version number such as "1.3.0" or "1.3" and a timestamp in its name. For
example, a snapshot component for "commons-lang 1.3.0" might have the name
"commons-lang-1.3.0.-20090314.182342-1.jar". The associated POM, MD5 and SHA hashes would also have a similar name.
To facilitate collaboration during the development of software components, Maven and other clients that know how to
consume snapshot components from a repository also know how to interrogate the metadata associated with a Snapshot
component to retrieve the latest version of a Snapshot dependency from a repository.</li>
</ol>
<p><strong>While it is possible to create a repository which serves both release and snapshot components, repositories are
usually segmented into release or snapshot repositories serving different consumers and maintaining different standards
and procedures for deploying components</strong>. Much like the difference between networks, a release repository is considered
like a production network and a snapshot repository is more like a development or a testing network. While there is a
higher level of procedure and ceremony associated with deploying to a release repository, snapshot components can be
deployed and changed frequently without regard for stability and repeatability concerns.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>A project under active development produces snapshot components that change over time. A release is comprised of
components which will remain unchanged over time.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="version-policy">Version policy<a href="https://hashicorp-aws.com/blog/nexus#version-policy" class="hash-link" aria-label="Direct link to Version policy" title="Direct link to Version policy">​</a></h3>
<p>Every repository has one of the 3 <strong>version policies</strong> configured:</p>
<ul>
<li><strong>Release</strong> A Maven repository can be configured to be suitable for release components with the Release version
policy. The Central Repository uses a release version policy.</li>
<li><strong>Snapshot</strong> Continuous development is typically performed with snapshot versions supported by the Snapshot version
policy. These version values have to <strong>end with -SNAPSHOT in the POM file</strong>. This allows repeated uploads where the
actual number used is composed of a date/timestamp and an enumerator and the retrieval can still use the -SNAPSHOT
version string. The repository manager and client tools manage the metadata files that manage this translation from
the snapshot version to the timestamp value.</li>
<li><strong>Mixed</strong> The Mixed version policy allows us to support both approaches within one repository.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hosting-maven-repositories">Hosting Maven Repositories<a href="https://hashicorp-aws.com/blog/nexus#hosting-maven-repositories" class="hash-link" aria-label="Direct link to Hosting Maven Repositories" title="Direct link to Hosting Maven Repositories">​</a></h3>
<p>A hosted Maven repository can be used to deploy our own as well as third-party components. A default installation of
Nexus Repository Manager includes two hosted Maven repositories. The <strong>maven-releases</strong> repository uses a release
version policy and the <strong>maven-snapshots</strong> repository uses a snapshot version policy.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-to-hosted-maven-repository">Deploying to Hosted Maven repository<a href="https://hashicorp-aws.com/blog/nexus#deploying-to-hosted-maven-repository" class="hash-link" aria-label="Direct link to Deploying to Hosted Maven repository" title="Direct link to Deploying to Hosted Maven repository">​</a></h4>
<p>Deployment to a repository is configured in 2 steps</p>
<ol>
<li><a href="https://hashicorp-aws.com/blog/nexus#configuring-repository-in-maven-project">Have Maven project point to the repository</a></li>
<li><a href="https://hashicorp-aws.com/blog/nexus#obtaining-push-access-to-repository">Authenticate push access to the repository</a></li>
</ol>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-repository-in-maven-project">Configuring Repository in Maven Project<a href="https://hashicorp-aws.com/blog/nexus#configuring-repository-in-maven-project" class="hash-link" aria-label="Direct link to Configuring Repository in Maven Project" title="Direct link to Configuring Repository in Maven Project">​</a></h5>
<p>Deployment to a repository is configured in the  <code>pom.xml</code> for the respective project in the "distributionManagement"
section:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">project</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">distributionManagement</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">repository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">nexus</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Releases</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">https://nexus-host/repository/maven-releases</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">repository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">snapshotRepository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- This repository can be omitted --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">nexus</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Snapshot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">https://nexus-host/repository/maven-snapshots</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">snapshotRepository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">distributionManagement</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><ul>
<li>
<p>Replace the <code>nexus-host</code> with the NDS address pointing to the actual Nexus instance and
<code>maven-releases</code>/<code>maven-snapshots</code> to the actual repository name. For example,</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">distributionManagement</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">repository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">nexus</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Releases</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">https://nexus.paion-data.dev/repository/maven-oss</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">repository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">distributionManagement</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>The "Snapshot" repository (tagged <code>snapshotRepository</code> above) can be omitted in the most CI/CD-enabled project team</p>
</li>
</ul></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="obtaining-push-access-to-repository">Obtaining Push Access to Repository<a href="https://hashicorp-aws.com/blog/nexus#obtaining-push-access-to-repository" class="hash-link" aria-label="Direct link to Obtaining Push Access to Repository" title="Direct link to Obtaining Push Access to Repository">​</a></h5>
<p>The credentials used for the deployment are configured in the "server" section of the <code>settings.xml</code> file. In the
example below server contains "nexus" as the id, along with a "headless user's" username and password. They are the
credentials needed to authenticate against the repository:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">settings</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servers</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">server</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">nexus</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">username</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">some-headless-username</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">username</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">password</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">some-headless-password</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">password</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">server</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servers</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next, we need to grant the user above (i.e. "some-headless-username") the push access on the repository side in the
following steps:</p>
<ol>
<li>Create a <a href="https://hashicorp-aws.com/blog/nexus#content-selectors">content selector</a></li>
<li>Create a <a href="https://hashicorp-aws.com/blog/nexus#privileges">privilege</a></li>
<li>Create a <a href="https://hashicorp-aws.com/blog/nexus#roles">role</a></li>
<li>Assign role to <a href="https://hashicorp-aws.com/blog/nexus#users">the headless user</a> defined above</li>
</ol>
<p>A full build of project, including downloading the declared dependencies and uploading the build output to the
repository manager, can now be invoked with <code>mvn clean deploy</code>.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-to-hosted-maven-repository-via-cicd-eg-github-actions">Deploying to Hosted Maven Repository via CI/CD (e.g. GitHub Actions)<a href="https://hashicorp-aws.com/blog/nexus#deploying-to-hosted-maven-repository-via-cicd-eg-github-actions" class="hash-link" aria-label="Direct link to Deploying to Hosted Maven Repository via CI/CD (e.g. GitHub Actions)" title="Direct link to Deploying to Hosted Maven Repository via CI/CD (e.g. GitHub Actions)">​</a></h5>
<p>Note that we deployed in the last minute our artifact to repository through a manual <code>mvn clean deploy</code> command. To
enable automatic deployment to the repository, we will simply go through
<a href="https://hashicorp-aws.com/blog/nexus#deploying-to-hosted-maven-repository-manually">the exact same procedure</a> except that instead of running
<code>mvn clean deploy</code> locally and manually, we let CI/CD execute that for us.</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="up-version-automatically">Up-version Automatically<a href="https://hashicorp-aws.com/blog/nexus#up-version-automatically" class="hash-link" aria-label="Direct link to Up-version Automatically" title="Direct link to Up-version Automatically">​</a></h6>
<p>It should be noted that a standard release repository does not allow an artifacts with a defined version to be pushed
into it twice. For example, if our artifacts is my-artifact-1.1.2.jar, this JAR, with version 1.1.2, will fail to be
published onto the repository the 2nd time unless we delete the version 1.1.2 up there.</p>
<p>Therefore, we need to bump the artifact version each time we release. We achieve this using GitHub's tagging system. The
two scripts below, taken from <a href="https://github.com/yahoo/fili/tree/master/screwdriver" target="_blank" rel="noopener noreferrer">Yahoo/fili's CI/CD</a>, creates a new
tag based on previous release tag:</p>
<ol>
<li>
<p><strong>tag-for-release.bash</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Pick up the tags from the adjusted remote</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> fetch </span><span class="token parameter variable" style="color:#36acaa">--unshallow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> fetch </span><span class="token parameter variable" style="color:#36acaa">--tags</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">git</span><span class="token variable" style="color:#36acaa"> branch </span><span class="token variable parameter variable" style="color:#36acaa">-v</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Get the last tag on this branch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">LAST_TAG</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">git</span><span class="token variable" style="color:#36acaa"> describe</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"INFO Last tag: </span><span class="token string variable" style="color:#36acaa">$LAST_TAG</span><span class="token string" style="color:#e3116c">"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Build the new tag to push</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">NEW_TAG</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable assign-left variable" style="color:#36acaa">LAST_TAG</span><span class="token variable operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$</span><span class="token variable punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">LAST_TAG</span><span class="token variable punctuation" style="color:#393A34">}</span><span class="token variable" style="color:#36acaa"> python .github/upversion.py</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"INFO Creating tag: </span><span class="token string variable" style="color:#36acaa">$NEW_TAG</span><span class="token string" style="color:#e3116c">"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> tag </span><span class="token variable" style="color:#36acaa">$NEW_TAG</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-a</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Autogenerated version bump tag"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Push the new tag</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"INFO Pushing tag: </span><span class="token string variable" style="color:#36acaa">$NEW_TAG</span><span class="token string" style="color:#e3116c">"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> push origin </span><span class="token variable" style="color:#36acaa">$NEW_TAG</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>upversion.py</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#!/usr/bin/python</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">split_tag </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'LAST_TAG'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">split</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'-'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">split</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"."</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">split_tag</span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">split_tag</span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"."</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">split_tag</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p><em>We put these two files under <strong>.github</strong> directory</em>.</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-to-github-packages">Deploying to <a href="https://github.com/features/packages" target="_blank" rel="noopener noreferrer">GitHub Packages</a><a href="https://hashicorp-aws.com/blog/nexus#deploying-to-github-packages" class="hash-link" aria-label="Direct link to deploying-to-github-packages" title="Direct link to deploying-to-github-packages">​</a></h6>
<p>Create a <strong>release.yml</strong> file under <em>.github/workflows</em> directory with the following content:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ./.github/workflows/test.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">secrets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> inherit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">publish</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">needs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">permissions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">contents</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> write </span><span class="token comment" style="color:#999988;font-style:italic"># allow for pushing tag</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">packages</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> write</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/checkout@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/setup</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">java@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">java-version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'11'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">distribution</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'adopt'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Tag for release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          git config --global user.name 'QubitPi'</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          git config --global user.email 'jack20191124@proton.me'</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          .github/tag-for-release.bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Set release version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          VERSION=$(git describe)</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          mvn versions:set -DnewVersion=$VERSION -DgenerateBackupPoms=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          mvn versions:update-property -Dproperty=version.owner -DnewVersion=$VERSION -DgenerateBackupPoms=false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Publish Package to Paion Nexus Repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mvn </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mode deploy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">GITHUB_TOKEN</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.GITHUB_TOKEN </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deploy documentation to GitHub Pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> peaceiris/actions</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">gh</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pages@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">github_token</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.GITHUB_TOKEN </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">publish_dir</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ./docs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">enable_jekyll</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">user_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> QubitPi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">user_email</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jack20191124@proton.me</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The <code>test</code> job defined above is a <a href="https://docs.github.com/en/actions/using-workflows/reusing-workflows#creating-a-reusable-workflow" target="_blank" rel="noopener noreferrer">workflow call</a> that delegates all testing to a separate
GitHub Action. An example of such workflow could be:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">workflow_call</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">types</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">opened</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> synchronize</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reopened</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/checkout@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Set up JDK 11 for Build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/setup</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">java@v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">java-version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mvn </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">B clean verify</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The "Set release version" step above was inspired by
<a href="https://github.com/yahoo/fili/blob/master/screwdriver/scripts/publish.sh" target="_blank" rel="noopener noreferrer">yahoo/fili's approach</a></p></div></div>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-to-nexus-3">Deploying to Nexus 3<a href="https://hashicorp-aws.com/blog/nexus#deploying-to-nexus-3" class="hash-link" aria-label="Direct link to Deploying to Nexus 3" title="Direct link to Deploying to Nexus 3">​</a></h6>
<p>Or we can deploy to any hosted repository such as Nexus 3 with a slightly modified release definition:</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Note that this file differs from the <a href="https://hashicorp-aws.com/blog/nexus#deploying-to-github-packageshttpsgithubcomfeaturespackages">GitHub version</a> by
replacing the <code>GITHUB_TOKEN</code> with the dedicated credentials put in a dynamically generated settints.xml file using
the <a href="https://github.com/whelk-io/maven-settings-xml-action" target="_blank" rel="noopener noreferrer">whelk-io/maven-settings-xml-action</a> action. These
credentials are sealed securely in <a href="https://docs.github.com/en/actions/security-guides/encrypted-secrets" target="_blank" rel="noopener noreferrer">GitHub Secrets</a>. We need to define the following 3 secrets:</p><ol>
<li><strong>MAVEN_DEPLOY_SERVER_ID</strong></li>
<li><strong>MAVEN_DEPLOY_SERVER_USERNAME</strong></li>
<li><strong>MAVEN_DEPLOY_SERVER_PASSWD</strong></li>
</ol></div></div>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ./.github/workflows/test.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">secrets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> inherit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">publish</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">needs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">permissions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">contents</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> write </span><span class="token comment" style="color:#999988;font-style:italic"># allow for pushing tag</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">packages</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> write</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/checkout@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/setup</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">java@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">java-version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'11'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">distribution</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'adopt'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Tag for release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          git config --global user.name 'QubitPi'</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          git config --global user.email 'jack20191124@proton.me'</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          .github/tag-for-release.bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Set release version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          VERSION=$(git describe)</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          mvn versions:set -DnewVersion=$VERSION -DgenerateBackupPoms=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          mvn versions:update-property -Dproperty=version.owner -DnewVersion=$VERSION -DgenerateBackupPoms=false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Generate settings.xml in order to grant push access to Paion Nexus Repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> whelk</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">io/maven</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">settings</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xml</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">action@v20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">servers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            [</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">              {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                "id": "${{ secrets.MAVEN_DEPLOY_SERVER_ID }}",</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                "username": "${{ secrets.MAVEN_DEPLOY_SERVER_USERNAME }}",</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                "password": "${{ secrets.MAVEN_DEPLOY_SERVER_PASSWD }}"</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            ]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Publish Package to Paion Nexus Repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mvn </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mode deploy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deploy documentation to GitHub Pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> peaceiris/actions</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">gh</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pages@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">github_token</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.GITHUB_TOKEN </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">publish_dir</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ./docs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">enable_jekyll</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">user_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> QubitPi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">user_email</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jack20191124@proton.me</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>We can later pull our released artifact from the hosted repository by placing the <strong>repository</strong> section. For example:</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">project</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">repositories</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">repository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">paion</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Paion Data Official Release Repository</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">https://nexus.paion-data.dev/repository/maven-oss</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">repository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">repositories</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">project</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-repository-manager-with-apache-maven">Using Repository Manager with Apache Maven<a href="https://hashicorp-aws.com/blog/nexus#using-repository-manager-with-apache-maven" class="hash-link" aria-label="Direct link to Using Repository Manager with Apache Maven" title="Direct link to Using Repository Manager with Apache Maven">​</a></h4>
<p>To use repository manager with <a href="http://maven.apache.org/" target="_blank" rel="noopener noreferrer">Apache Maven</a>, configure Maven to check the repository manager
instead of the default, built-in connection to the Central Repository.</p>
<p>To do this, we add a mirror configuration and override the default configuration for the central repository in our
"~/.m2/settings.xml", shown below:</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Replace the "nexus-host" with the NDS address pointing to the actual Nexus instance.</p></div></div>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">settings</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">mirrors</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">mirror</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--This sends everything else to /public --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">nexus</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">mirrorOf</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">*</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">mirrorOf</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">https://nexus-host/repository/maven-public/</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">mirror</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">mirrors</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">profiles</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">profile</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">nexus</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--Enable snapshots for the built in central repo to direct --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--all requests to nexus via the mirror --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">repositories</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">repository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">central</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">http://central</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">releases</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">enabled</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">true</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">enabled</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">releases</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">snapshots</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">enabled</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">true</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">enabled</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">snapshots</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">repository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">repositories</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">pluginRepositories</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">pluginRepository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">central</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">http://central</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">releases</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">enabled</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">true</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">enabled</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">releases</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">snapshots</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">enabled</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">true</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">enabled</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">snapshots</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">pluginRepository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">pluginRepositories</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">profile</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">profiles</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">activeProfiles</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--make the profile active all the time --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">activeProfile</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">nexus</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">activeProfile</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">activeProfiles</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">settings</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the configuration above, a single profile called <strong>nexus</strong> is defined. It configures a repository and a
pluginRepository with the id <strong>central</strong> that overrides the same repositories in the Super POM. The <em>Super POM</em> is
internal to every Apache Maven install and establishes default values. These overrides are important since they change
the repositories by enabling snapshots and replacing the URL with a bogus URL. This URL is overridden by the <strong>mirror</strong>
setting in the same settings.xml file to point to the URL of our single repository group. This repository group can,
therefore, contain release as well as snapshot components and Maven will pick them up.</p>
<p>In addition, The <strong>mirrorOf</strong> pattern of <code>*</code> causes any repository request to be redirected to this mirror and to our
single repository group, which in the example is the public group.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>It is possible to use other patterns in the "mirrorOf" field. A possible valuable setting is to use <strong>external:</strong>*.
This matches all repositories except those using "localhost" or file based repositories. This is used in conjunction
with a repository manager when you want to exclude redirecting repositories that are defined for integration testing.
The integration test runs for Apache Maven itself require this setting.</p><p>More documentation about mirror settings can be found in the
<a href="http://maven.apache.org/guides/mini/guide-mirror-settings.html" target="_blank" rel="noopener noreferrer">mini guide on the Maven web site</a>.</p></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>For startup who doesn't really need to proxy the entire Maven Central at the moment, another approach is to set up
multiple repositories. In each project they are working on, they will still fetch everything from Maven Central except
for their hosted component from Nexus</p><p>There are two different ways that we can specify the use of multiple repositories. The first way is to specify in a POM
which repositories we want to use. That is supported both inside and outside of build profiles:</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">project</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">repositories</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">repository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">my-repo1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">your custom repo</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">http://jarsm2.dyndns.dk</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">repository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">repository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">my-repo2</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">your custom repo</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">http://jarsm2.dyndns.dk</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">repository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">repositories</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">project</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The other way we can specify multiple repositories is by creating a profile in the <code>${user.home}/.m2/settings.xml</code> or
<code>${maven.home}/conf/settings.xml</code> file like the following:</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">settings</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">profiles</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">profile</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">myprofile</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">repositories</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">repository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">my-repo2</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">your custom repo</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">http://jarsm2.dyndns.dk</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">repository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">repositories</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">profile</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">profiles</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">activeProfiles</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">activeProfile</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">myprofile</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">activeProfile</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">activeProfiles</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">settings</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If we specify repositories in profiles we must remember to activate that particular profile. As we can see above we do
this by registering a profile to be active in the <code>activeProfiles</code> element.</p><p>We could also activate this profile on the command like by executing the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mvn </span><span class="token parameter variable" style="color:#36acaa">-Pmyprofile</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In fact the <code>-P</code> option will take a CSV list of profiles to activate if we wish to activate multiple profiles
simultaneously.</p><p>The settings descriptor documentation can be found on the
<a href="https://maven.apache.org/maven-settings/settings.html" target="_blank" rel="noopener noreferrer">Maven Local Settings Model Website</a>.</p></div></div>
<p>Remote repository URLs are queried in the following order for artifacts until one returns a valid result:</p>
<ol>
<li>Global settings.xml</li>
<li>User settings.xml</li>
<li>Local pom.xml</li>
<li>Parent POMs, recursively</li>
<li>Super POM</li>
<li>effective POMs from dependency path to the artifact.</li>
</ol>
<p>For each of these locations, the repositories within the profiles are queried first in the order outlined at
<a href="https://maven.apache.org/guides/introduction/introduction-to-profiles.html" target="_blank" rel="noopener noreferrer">Introduction to build profiles</a>.</p>
<p>Before downloading from a repository,
<a href="https://maven.apache.org/guides/mini/guide-mirror-settings.html" target="_blank" rel="noopener noreferrer">mirrors configuration</a> is applied.</p>
<p>Effective settings and local build POM, with profile taken into account, can easily be reviewed to see their
repositories order with <code>mvn help:effective-settings</code> and mvn <code>help:effective-pom -Dverbose</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-docker-registry">Setting Up Docker Registry<a href="https://hashicorp-aws.com/blog/nexus#setting-up-docker-registry" class="hash-link" aria-label="Direct link to Setting Up Docker Registry" title="Direct link to Setting Up Docker Registry">​</a></h3>
<p>Docker containers and their usage have revolutionized the way applications and the underlying operating system are
packaged and deployed to development, testing and production systems. The creation of the
<a href="https://opencontainers.org/" target="_blank" rel="noopener noreferrer">Open Container Initiative</a>, and the involvement of a large number of stakeholders,
guarantees that the ecosystem of tools around the lightweight containers and their usage will continue to flourish.
<a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">Docker Hub</a> is the original registry for Docker container images and it is being joined by
more and more other publicly available registries such as the
<a href="https://cloud.google.com/container-registry/" target="_blank" rel="noopener noreferrer">Google Container Registry</a> and others.</p>
<p>Nexus Repository Manager OSS support Docker registries as the Docker repository format for <strong>hosted</strong> and <strong>proxy</strong>
repositories. We can expose these repositories to the client-side tools directly or as a
<a href="https://hashicorp-aws.com/blog/nexus#repository-group">repository group</a>, which is a repository that merges and exposes the contents of multiple
repositories in one convenient URL. This allows us to reduce time and bandwidth usage for accessing Docker images in a
registry as well as share our images within our organization in a hosted repository. Users can then launch containers
based on those images, resulting in a completely private Docker registry with all the features available in the
repository manager.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="docker-port-scalability">Docker Port Scalability<a href="https://hashicorp-aws.com/blog/nexus#docker-port-scalability" class="hash-link" aria-label="Direct link to Docker Port Scalability" title="Direct link to Docker Port Scalability">​</a></h4>
<p>The Docker client has strict requirements about how it can retrieve content from a repository (i.e., a registry). These
requirements mainly center around the path at which it expects everything to be hosted.</p>
<p>While it is possible to tell the Docker client to use a chosen host from which to retrieve (or to which to upload)
images, it is not possible to tell it to use an arbitrary base path where images are stored in a registry.</p>
<p>To further explain, the Docker client is given a registry to contact by specifying only the hostname + port. It's also
given a specific path to an image in that registry. So, for example, it would be given
<code>example:443/some/custom/image</code> to specify an image. We are not able to specify a registry application path.</p>
<p>Nexus Repository exposes its Docker registries with a repository path of <code>/repository/&lt;repo_name&gt;/</code> and, by default,
and application context path of <code>/</code>.</p>
<p>So, a full Docker image in the repository "docker-hosted" might be accessible at full URL
"example:443/nexus3/repository/docker-hosted/some/custom/image", which can be broken down as follows:</p>
<ul>
<li><strong>example.com</strong> = host name</li>
<li><strong>443</strong> = port</li>
<li>/nexus3 = application context path</li>
<li>/repository/docker-hosted = base registry path</li>
<li><strong>/some/custom/image</strong> = specific image path in the registry</li>
</ul>
<p>There is no way to give the Docker client the application context path or base registry path. Docker needs the registry
exposed at the root of the host + port that it is accessing.</p>
<p>This is important because Nexus Repository uses request paths to separate content between different repositories. There
are a few potential ways to overcome this Docker limitation:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="access-control">Access Control<a href="https://hashicorp-aws.com/blog/nexus#access-control" class="hash-link" aria-label="Direct link to Access Control" title="Direct link to Access Control">​</a></h3>
<p>Nexus Repository uses <strong>role-based access contro</strong>l (<strong>RBAC</strong>) to give administrators fine-grained control over user
rights to the following:</p>
<ul>
<li>Access to the Nexus Repository web application</li>
<li>Read access to a component path in a repository</li>
<li>Administator access to configuration</li>
<li>Publish or upload files to a repository</li>
</ul>
<p>The default configuration ships with the administrator role and optional anonymous access to browse and read all
repositories. <strong>We should not use the default anonymous role if we need to create protected repositories</strong>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="realms">Realms<a href="https://hashicorp-aws.com/blog/nexus#realms" class="hash-link" aria-label="Direct link to Realms" title="Direct link to Realms">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>What Is a Realm?</div><div class="admonitionContent_BuS1"><p>A realm is a security policy domain defined for a web or application server. The protected resources on a server can be
partitioned into a set of protection spaces, <strong>each with its own authentication scheme</strong> and/or authorization database
containing a collection of users and groups.</p></div></div>
<p>The realms can be accessed via the <strong>Realms</strong> menu item located under <strong>Security</strong>, in the Administration main menu.</p>
<p><img loading="lazy" alt="Error loading nexus3-realms.png" src="https://hashicorp-aws.com/assets/images/nexus3-realms-0ee3d6ec7551e3a2c6fa1c5bee4305aa.png" width="1262" height="770" class="img_ev3q"></p>
<p>Effectively, the configuration shown above determines what authentication realm is used to grant a user access and the
order the realms are used.</p>
<ul>
<li><strong>Local Authenticating Realm and Local Authorizing Realm</strong> These are the built-in realms used by default. They allow
the repository manager to manage security setup without additional external systems. Sonatype recommends keeping the
Local realms at the top of the active list.  In the event of system recovery, if we have them lower in the order (or
removed), restoration may be more difficult.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="privileges">Privileges<a href="https://hashicorp-aws.com/blog/nexus#privileges" class="hash-link" aria-label="Direct link to Privileges" title="Direct link to Privileges">​</a></h3>
<p>Privileges define actions which can be performed against specific functionality. Privileges can only be assigned to
roles.</p>
<p>To access Privileges go to <strong>Security</strong> in the Administration menu, where it's listed as a sub-section. An extensive
list of privileges is already built in the repository manager and is partially shown in the figure below</p>
<p><img loading="lazy" alt="Error loading nexus3-privileges-partial-list.png" src="https://hashicorp-aws.com/assets/images/nexus3-privileges-partial-list-73e9e3da9e89d6ddcc8835b7f82376e4.png" width="749" height="274" class="img_ev3q"></p>
<p>This feature allows us to inspect existing privileges and create custom privileges as required. Users will need
<em>nx-privilege</em> or <em>nx-all</em> privileges to access this page.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="privilege-names">Privilege Names<a href="https://hashicorp-aws.com/blog/nexus#privilege-names" class="hash-link" aria-label="Direct link to Privilege Names" title="Direct link to Privilege Names">​</a></h4>
<p>Names are unique identifiers. Privileges included by default are prefixed with <strong>nx-</strong> . Privileges that are migrated
from Nexus Repository 2 will be named as they were in Repository 2. Privileges that we create ourselves can only
consist of letters, digits, underscores(<code>_</code>), hyphens(<code>-</code>), and dots(<code>.</code>). A privilege name cannot start with an
underscore or dot.</p>
<p>For custom privileges, it is encouraged that we use a <strong>simple convention</strong> to namespace our privileges. For example
using a simple acronym representing our organization name. "Example Organization Inc." could prefix its privilege names
with <strong>eoi-</strong> for example.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="privilege-types">Privilege Types<a href="https://hashicorp-aws.com/blog/nexus#privilege-types" class="hash-link" aria-label="Direct link to Privilege Types" title="Direct link to Privilege Types">​</a></h4>
<p>The privilege list displays an icon for the privilege Type as the first column in the list:</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Privilege Permissions</div><div class="admonitionContent_BuS1"><p>Privilege permissions are represented by a colon separated list of text segments, where each segment can be one of:</p><ul>
<li>a single text value</li>
<li>a comma separated list of text values</li>
<li>an asterisk character * to represent all values in that segment</li>
</ul><p>The internal segment matching algorithm uses
<a href="https://shiro.apache.org/permissions.html" target="_blank" rel="noopener noreferrer">Apache Shiro wildcard permissions</a>.</p></div></div>
<ul>
<li>
<p>application (<code>nexus:{name}:{actions}</code>)</p>
<ul>
<li>Applicable Actions: create, read, update, delete</li>
<li>Description: Application type privileges are most commonly the built-in privileges that control access to specific
product feature areas in the Administration <strong>UI</strong>. For example, "nexus:blobstores<!-- -->:create<!-- -->,read" means allowing for
creating and reading blobstores</li>
</ul>
</li>
<li>
<p>repository-admin (<code>nexus:repository-admin:{format}:{repository}:{actions}</code>)</p>
<ul>
<li>Applicable Actions: browse,read,edit,add,delete</li>
<li>Description: Repository Admin privileges control administration of <strong>configuration</strong> for specific repositories or
repository formats. For example, "nexus:repository-admin:nuget<!-- -->:nuget<!-- -->.org-proxy<!-- -->:browse<!-- -->,read" means allowing viewing
of the repository configuration for the nuget format repository named "nuget.org-proxy". <strong>These privileges do not
control access to repository content.</strong></li>
</ul>
</li>
<li>
<p>repository-content-selector (<code>nexus:repository-content-selector:{selector}:{format}:{repository}:{actions}</code>)</p>
<ul>
<li>Applicable Actions: browse,read,edit,add,delete</li>
<li>Description: Repository Content Selector privileges provide fine-grained control over access to content within a
repository by way of a content selector. For example, "nexus:repository-content-selector:<em>:maven2:</em>:read<!-- -->" means
allowing a user for read access to any content matching a content selector defined for the maven2 format.</li>
</ul>
</li>
<li>
<p>repository-view (<code>nexus:repository-view:{format}:{repository}:{actions}</code>)</p>
<ul>
<li>Applicable Actions: browse,read,edit,add,delete</li>
<li>Description: Repository View privileges control general access to all content contained within specific
repositories or repository formats. For example, "nexus:repository-view:maven2:central<!-- -->:browse<!-- -->,read" means allow
browsing and viewing content within the maven2 format repository named central. <strong>These privileges do not allow
changing configuration of a repository.</strong></li>
</ul>
</li>
<li>
<p>script (<code>nexus:script:{script name}:{actions}</code>)</p>
<ul>
<li>Applicable Actions: browse,read,edit,add,delete,run</li>
<li>Description: Script privileges control access to using the Groovy Script related REST APIs as documented in
<a href="https://help.sonatype.com/repomanager3/integrations/rest-and-integration-api" target="_blank" rel="noopener noreferrer">REST and Integration API</a> . These
privileges do not control general REST API access. For example, "nexus:script:*<!-- -->:read<!-- -->" means allowing for read
access to all scripts of any name. "nexus:script:my-uploaded-script<!-- -->:run<!-- -->" means allowing the calling user for
running (executing) the script named my-uploaded-script</li>
</ul>
</li>
<li>
<p>wildcard (<code>*</code>)</p>
<ul>
<li>Applicable Actions: *</li>
<li>Description: Wildcard privileges allow one to build a privilege string using a free-form series of segments. All
other privilege types are more specific segment forms of a wildcard privilege. There is only one wildcard privilege
included by default named <strong>nx-all</strong> with permission <strong>nexus:</strong>*  that gives access to all functionality.</li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Privilege Actions</div><div class="admonitionContent_BuS1"><p>Actions are functions allowing an explicit behavior the privilege can perform with the associated function.</p><p>The Actions to choose from are</p><ul>
<li><strong>add</strong> allows privileges to add repositories or scripts.</li>
<li><strong>read</strong> allows privileges to view various configuration lists and scripts. Without <strong>read</strong>, any associated action
will permit a privilege to see these lists but not its contents. The <strong>read</strong> action also allows privileges to
utilize tools that can look at content from the command line.</li>
<li><strong>browse</strong>  allows privileges to view the contents of associated repositories. Unlike <strong>read</strong>, privilege types with
browse can only view and administrate repository <em>contents</em> from <em>UI</em>.</li>
<li><strong>create</strong> allows privileges to create applicable configurations within the repository manager. Since a <strong>read</strong>
permission is required to view a configuration, this action is associated with most existing create privileges.</li>
<li><strong>delete</strong> allows privileges to delete repository manager configurations, repository contents, and scripts. A
<strong>read</strong> action is generally associated with delete actions, so the actor can view these configurations to remove
them.</li>
<li><strong>edit</strong> allows privileges to modify associated scripts, repository content, and repository administration.</li>
<li><strong>update</strong> allows privileges to update repository manager configurations. Most existing privileges with update
include <strong>read</strong> actions. Therefore, if creating custom privileges with update, the actor should consider adding read
to the privilege in order to view repository manager configuration updates.</li>
<li><strong><code>*</code></strong>, the wildcard, gives us the ability to group all actions together.</li>
</ul><p>We must assign a single or combination of comma-delimited actions when creating new privileges. The privilege type to
which we apply any of these Actions will perform the action's implied behavior. Consider how each action behaves when
applied to a privilege type</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-privilege">Creating a Privilege<a href="https://hashicorp-aws.com/blog/nexus#creating-a-privilege" class="hash-link" aria-label="Direct link to Creating a Privilege" title="Direct link to Creating a Privilege">​</a></h4>
<p>Click the <strong>Create privilege</strong> button to view a list of privilege types</p>
<p><img loading="lazy" alt="Error loading nexnus3-privileges-types.png" src="https://hashicorp-aws.com/assets/images/nexnus3-privileges-types-050b615c87a6c40e6a69fe80211fbeb4.png" width="502" height="258" class="img_ev3q"></p>
<p>After selecting a type, fill in the required fields and save the privilege. The privilege can be found listed among the
default privileges on the main <strong>Privileges</strong> screen. We can use the <strong>Filter</strong> input box to find a specific
privilege. In the following example, an <em>Application</em> privilege type is created:</p>
<p><img loading="lazy" alt="Error loading nexus3-privileges-application.png" src="https://hashicorp-aws.com/assets/images/nexus3-privileges-application-21b2ffce139a5182fb478e3f365aeb36.png" width="673" height="388" class="img_ev3q"></p>
<p>The form provides Name, Description, Domain, and Actions in figure above. The form is completed for a privilege that
allows read access to the LDAP administration. If assigned this privilege, a user is able to view LDAP administration
configuration but not edit it, create a new LDAP configuration, nor delete any existing LDAP configurations.</p>
<p>In another example, a <em>Repository View</em> privilege type is created:</p>
<p><img loading="lazy" alt="Error loading nexus3-privileges-repository-view.png" src="https://hashicorp-aws.com/assets/images/nexus3-privileges-repository-view-cac99e1fa26854a0047f0b4b969115b0.png" width="638" height="455" class="img_ev3q"></p>
<p>The form provides Name, Description, Format, Repository, and Actions in figure above. The form is completed for a
privilege granting sufficient access to publish images to a specific hosted repository. A user with this privilege can
view and read the contents of the repository as well as publish new images to it, but not delete images.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="content-selectors">Content Selectors<a href="https://hashicorp-aws.com/blog/nexus#content-selectors" class="hash-link" aria-label="Direct link to Content Selectors" title="Direct link to Content Selectors">​</a></h3>
<p>Content selectors provide a means for us to select specific content from all of our content. The content we select is
evaluated against expressions written in <strong>CSEL</strong> (<strong>Content Selector Expression Language</strong>). CSEL is a light version
of <strong>JEXL</strong> used to script queries along specific paths and coordinates available to our repository manager formats.</p>
<p>Content selectors allow us to define what content users are allowed to access. We can define, in a simplified example,
a selector named "Apache Maven" with a search expression of <code>path =~ "^/org/apache/maven/"</code>. This would match all
components that start with the designated component path. Another, yet more complete, example would be to "select all
maven2 content along a path that starts with <code>org.apache.commons</code>":
<code>format == "maven2" and path =~ "^/org/apache/commons/.*"</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-query">Creating a Query<a href="https://hashicorp-aws.com/blog/nexus#creating-a-query" class="hash-link" aria-label="Direct link to Creating a Query" title="Direct link to Creating a Query">​</a></h4>
<p>Before we identify user permissions for our selector, create the query first. Click <strong>Content Selectors</strong> located in
<strong>Repository</strong>, from the <strong>Administration</strong> menu. Click <strong>Create Selector</strong> to open a new form.</p>
<p><img loading="lazy" alt="Error loading nexus3-content-selector-example.png" src="https://hashicorp-aws.com/assets/images/nexus3-content-selector-example-40e93c3b8303b9f5ca67ad3c10dbcc30.png" width="1182" height="1800" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>We can preview our selector and what results it will return by clicking the <strong>Preview</strong> results button located
somewhere in the middle section of the page. Select a repository or grouping of repositories from the <strong>Preview
Repository</strong> dropdown and click the <strong>Preview</strong> button. Assets that match will be returned in the space below the
filter and can be filtered upon if we wish to check on a specific result.</p></div></div>
<p>Once we are satisfied with our fields, click <strong>Save</strong> to create the content selector. All saved selector queries we
create will be listed in the <strong>Content Selectors</strong> screen.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="finer-access-control-with-content-selector-privilege">Finer Access Control with "Content Selector privilege"<a href="https://hashicorp-aws.com/blog/nexus#finer-access-control-with-content-selector-privilege" class="hash-link" aria-label="Direct link to Finer Access Control with &quot;Content Selector privilege&quot;" title="Direct link to Finer Access Control with &quot;Content Selector privilege&quot;">​</a></h4>
<p>As part of our security setup, we can create user permissions to manage the filters we built in the <em>Create Selector</em>
form. We can add a new privilege that controls operations of read, edit, delete or * (all) for components matching that
selector. The privilege can even span multiple repositories.</p>
<p>To create a new <strong>content selector privilege</strong>, click <strong>Privileges</strong> in the <strong>Security</strong> section of the
<strong>Administration</strong> panel. Then click the <strong>Create privilege</strong> button. Locate and click <strong>Repository Content Selector</strong>
from the list of options in <strong>Select Privilege Type</strong>. We will see a form that displays the following:</p>
<ul>
<li>Name: Create a name for the content selector privilege.</li>
<li>Description: Add a brief description for the privilege.</li>
<li>Content Selector: Use this dropdown to select from a list of selectors we created.</li>
<li>Repository: Use this dropdown to select from either a range of all repository contents, all repository contents of an
individual format, or repositories created by us.</li>
<li>Actions: Grant read, edit, delete, or * (all) privileges for user access control.</li>
</ul>
<p>To complete the form, save the new privilege by clicking <strong>Create privilege</strong>. We can use our new privilege to regulate
what permissible data we want the user to access. We could group all related privileges into a <a href="https://hashicorp-aws.com/blog/nexus#roles">role</a>.
Ultimately, we could assign our roles to a <a href="https://hashicorp-aws.com/blog/nexus#users">user</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="content-selector-query-reference">Content Selector Query Reference<a href="https://hashicorp-aws.com/blog/nexus#content-selector-query-reference" class="hash-link" aria-label="Direct link to Content Selector Query Reference" title="Direct link to Content Selector Query Reference">​</a></h4>
<p>Below are the allowable attributes for content selectors that define path and format as values supported by Nexus
Repository Manager.</p>
<table><thead><tr><th><strong>Attribute</strong></th><th><strong>Allowed Values</strong></th></tr></thead><tbody><tr><td>format</td><td>The format of the content for which we query</td></tr><tr><td>path</td><td>The path of our repository content</td></tr></tbody></table>
<p>Valid Operators are</p>
<table><thead><tr><th style="text-align:center">Operator</th><th style="text-align:center">Definition</th><th style="text-align:center">Example</th></tr></thead><tbody><tr><td style="text-align:center"><code>==</code></td><td style="text-align:center">Matches text <em>exactly</em></td><td style="text-align:center"><code>format == "maven2"</code></td></tr><tr><td style="text-align:center"><code>=~</code></td><td style="text-align:center">Matches a Java regular expression pattern</td><td style="text-align:center"><code>path =~ "^/org/apache/commons/.*"</code></td></tr><tr><td style="text-align:center"><code>=^</code></td><td style="text-align:center">Starts with text.</td><td style="text-align:center"><code>path =^ "/com/example/"</code></td></tr><tr><td style="text-align:center"><code>and</code></td><td style="text-align:center">Match all expressions</td><td style="text-align:center"><code>format == "maven2" and path =~ "^/org/apache/commons/.*"</code></td></tr><tr><td style="text-align:center"><code>or</code></td><td style="text-align:center">Match any expression</td><td style="text-align:center"><code>format == "maven2" or format == "npm"</code></td></tr><tr><td style="text-align:center"><code>( expr )</code></td><td style="text-align:center">Group multiple expressions.</td><td style="text-align:center"><sup><a href="https://hashicorp-aws.com/blog/nexus#user-content-fn-example-002a79" id="user-content-fnref-example-002a79" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup></td></tr></tbody></table>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Version Range Regular Expressions</div><div class="admonitionContent_BuS1"><p>To avoid encountering database errors, we should escape dashes in version range regular expressions. For example,
<code>path =~ "[0-9a-zA-Z\-_]"</code></p></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>When writing a content selector, remember that the asset's path will always begin with a leading slash when the
selector is evaluated. This is true even though the leading slash is not displayed when searching or browsing assets.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="roles">Roles<a href="https://hashicorp-aws.com/blog/nexus#roles" class="hash-link" aria-label="Direct link to Roles" title="Direct link to Roles">​</a></h3>
<p>Roles aggregate <a href="https://hashicorp-aws.com/blog/nexus#privileges">privileges</a> into a related context and can, in turn, be grouped to create more complex
roles.</p>
<p>The repository manager ships with a predefined <em>admin</em> as well as an <em>anonymous role</em>. These can be inspected in the
<strong>Roles</strong> feature view accessible via the <strong>Roles</strong> item in the <strong>Security</strong> section of the <strong>Administration</strong> main
menu. A simple example is shown in figure below. The list displays the <em>Name</em> and <em>Description</em> of the role as well as
the <strong>Source</strong>, which displays whether the role is internal (Nexus) or a mapping to an external source like LDAP. In
order to access these functions, a user must have <em>nx-roles</em> or <em>nx-all</em> <a href="https://hashicorp-aws.com/blog/nexus#privileges">privileges</a>.</p>
<p><img loading="lazy" alt="Error loading nexus3-roles-list.png" src="https://hashicorp-aws.com/assets/images/nexus3-roles-list-889e7d20d66952a5479e28d6e1d94fbd.png" width="610" height="174" class="img_ev3q"></p>
<p>To create a new role, click on the <strong>Create Role</strong> button, select <strong>Nexus role</strong> and fill out the Role creation feature
view:</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>To use functions of creating, editing and deleting roles, a user without the <em>nx-all</em> privilege also will need
<em>nx-privilege-read</em>. This is because the roles page lists privileges on it.</p></div></div>
<p><img loading="lazy" alt="Error loading nexus3-roles-create.png" src="https://hashicorp-aws.com/assets/images/nexus3-roles-create-1a372c0ccc27396789ae7076c2a4f232.png" width="636" height="816" class="img_ev3q"></p>
<p>When creating a new role, we will need to supply a <strong>Role ID</strong> and a <strong>Role Name</strong> and optionally a <strong>Description</strong>.
Roles are comprised of other roles and individual privileges. To assign a role or privilege to a role, drag and drop
the desired privileges from the <em>Available</em> list to the <em>Given</em> list under the <em>Privileges</em> header. We can use the
<strong>Filter</strong> input to narrow down the list of displayed privileges and the arrow buttons to add or remove privileges.</p>
<p>The same functionality is available under the <em>Roles</em> header to select among the <em>Available</em> roles and add them to the
list of <em>Contained</em> roles.</p>
<p>Finally press the <strong>Save</strong> button to get the role created.</p>
<p>An existing role can be inspected and edited by clicking on the row in the list. This role-specific view allows us to
delete the role with the <strong>Delete</strong> button. The built-in roles are managed by the repository manager and <em>cannot</em> be
edited or deleted.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mapping-external-groups-to-nexus-roles">Mapping External Groups to Nexus Roles<a href="https://hashicorp-aws.com/blog/nexus#mapping-external-groups-to-nexus-roles" class="hash-link" aria-label="Direct link to Mapping External Groups to Nexus Roles" title="Direct link to Mapping External Groups to Nexus Roles">​</a></h4>
<p>In addition to creating an internal role, the <strong>Create Role</strong> button allows us to create an <strong>External Role Mapping</strong>
to an external authorization system configured in the repository manager such as LDAP. This is something we would do,
if we want to grant every member of an externally managed group (such as an LDAP group) a number of privileges and
roles in the repository manager</p>
<p>For example, assume that we have a group in LDAP named "scm" and we want to make sure that everyone in that group has
administrative privileges.</p>
<p>Select <strong>External Role Mapping</strong> and <strong>LDAP</strong> to see a list of roles managed by that external realm in a dialog. Pick
the desired scm group and confirm by pressing <strong>Create</strong> mapping.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>For faster access or if we cannot see our group name, we can also type in a portion or the whole name of the group and
it will limit the dropdown to the selected text.</p></div></div>
<p>Once the external role has been selected, creates a linked role. We can then assign other roles and privileges to this
new externally mapped role like we would do for any other role.</p>
<p>Any user that is part of the scm group in LDAP, receives all the privileges defined in the created role allowing us to
adapt our generic role in LDAP to the repository manager-specific use cases we want these users to be allowed to
perform.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="users">Users<a href="https://hashicorp-aws.com/blog/nexus#users" class="hash-link" aria-label="Direct link to Users" title="Direct link to Users">​</a></h3>
<p>The repository manager ships with two users by default: <em>admin</em> and <em>anonymous</em>. The <em>admin</em> user has all privileges
and the <em>anonymous</em> user has read-only privileges. The initial password for the admin user can be found in an
"admin.password" file found in the <code>$data-dir</code> directory after starting the server.</p>
<p>The Users feature view displayed in figure below can be accessed via the <strong>Users</strong> item in the <strong>Security</strong> section of
the <strong>Administration</strong> menu. Users must have <em>nx-users</em> or <em>nx-all</em> <a href="https://hashicorp-aws.com/blog/nexus#privileges">privileges</a> to see this page. On page
load, the security Source of "Local" is selected and represents the local NXRM realm. The filtered list shows the
users' User ID, First Name, Last Name, Email and Status from the security Source selected in the dropdown.</p>
<p><img loading="lazy" alt="Error loading nexus3-users-list.png" src="https://hashicorp-aws.com/assets/images/nexus3-users-list-70ad87d75cd36ae472067666fb3f1d20.png" width="698" height="174" class="img_ev3q"></p>
<p>Clicking on a user in the list or clicking on the <strong>Create local user</strong> button displays the details view to edit or
create the account shown in figure below. For external users, such as LDAP or Crowd, once we have our external realm
setup we can edit their permissions here as well. Simply select the realm the user is on from the <strong>Source</strong> dropdown.
Then type the user ID into the field to the right of that dropdown and search for it. Then click on the result desired
to edit, same as a local user.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>To use functions of creating, editing and deleting users, a user without the <em>nx-all</em> privilege also will need
<em>nx-roles-read</em>. This is because the users page lists roles on it.</p></div></div>
<p><img loading="lazy" alt="Error loading nexus3-users-create.png" src="https://hashicorp-aws.com/assets/images/nexus3-users-create-fb5fb196b6ba4efc9e5a8f76e8dac192.png" width="640" height="777" class="img_ev3q"></p>
<p>The <strong>ID</strong> can be defined upon initial creation and remains fixed thereafter. In addition we can specify the users
<strong>First Name</strong>, <strong>Last Name</strong> and <strong>Email address</strong>.  We also must enter and confirm a <strong>Password</strong>.</p>
<p>The Status allows us to set an account to be <em>Disabled</em> or <em>Active</em>. The <a href="https://hashicorp-aws.com/blog/nexus#roles"><em>Roles</em></a> control allows us to add and
remove defined roles to the user and therefore control the privileges assigned to the user. A user can be assigned one
or more roles that in turn can include references to other roles or to individual privileges.</p>
<p>On edit, we can select <strong>Change Password</strong> item in the drop down. The password can be changed in a dialog, provided the
user is managed by the built-in security realm.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="default-role">Default Role<a href="https://hashicorp-aws.com/blog/nexus#default-role" class="hash-link" aria-label="Direct link to Default Role" title="Direct link to Default Role">​</a></h3>
<p>The Default Role is a role that is automatically granted to all authenticated users.</p>
<p>To enable appending a default role to all authenticated users, navigate to the <strong>Capabilities</strong> item in the <strong>System</strong>
section of the <strong>Administration</strong> menu; then hit <strong>Create capability</strong> and choose capability type <strong>Default Role</strong> as
pictured below; we will then be able to select the role that we want applied to users.</p>
<p><img loading="lazy" alt="Error loading nexus3-default-role.png" src="https://hashicorp-aws.com/assets/images/nexus3-default-role-1d25b5e400a0d1012948cc239ce7fcff.png" width="835" height="236" class="img_ev3q"></p>
<p>Once this is saved, the <em>Default Role Realm</em> will be added to the active list of security realms and start applying the
new role to all authenticated users.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>This default role is appended to authenticated users dynamically, and will <strong>NOT</strong> show up as assigned to any user via
the User administration page.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="https://hashicorp-aws.com/blog/nexus#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="413-request-entity-too-large">"413 Request Entity Too Large"<a href="https://hashicorp-aws.com/blog/nexus#413-request-entity-too-large" class="hash-link" aria-label="Direct link to &quot;413 Request Entity Too Large&quot;" title="Direct link to &quot;413 Request Entity Too Large&quot;">​</a></h3>
<p>If deploying, for example, a Maven JAR or Docker image to some Nexus repository results in "413 Request Entity Too
Large" error, that's due to, in the case of Nginx as reverse proxy in front of the Nexus, our server block having a
default value for <strong>client_max_body_size</strong> of around 1MB in size when unset.</p>
<p>To resolve this, we will need to add the following line to our server block (<code>/etc/nginx/nginx.conf</code>):</p>
<p><img loading="lazy" alt="Error loading nexus-413-solution.png" src="https://hashicorp-aws.com/assets/images/nexus-413-solution-9834cbf02484a4e270c99a5b0ec4a72a.png" width="707" height="403" class="img_ev3q"></p>
<p>For more information, such as where "client_max_body_size" directive should be placed, please refer to
<a href="http://nginx.org/en/docs/http/ngx_http_core_module.html#client_max_body_size" target="_blank" rel="noopener noreferrer">Nginx documentation</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="400-repository-does-not-allow-updating-assets">"400 Repository does not allow updating assets"<a href="https://hashicorp-aws.com/blog/nexus#400-repository-does-not-allow-updating-assets" class="hash-link" aria-label="Direct link to &quot;400 Repository does not allow updating assets&quot;" title="Direct link to &quot;400 Repository does not allow updating assets&quot;">​</a></h3>
<p>The version already exists on a release repository. We will need to either bump component version or let Nexus admin
to delete the root folder of that component.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-database-error-occurred">"A database error occurred"<a href="https://hashicorp-aws.com/blog/nexus#a-database-error-occurred" class="hash-link" aria-label="Direct link to &quot;A database error occurred&quot;" title="Direct link to &quot;A database error occurred&quot;">​</a></h3>
<p>When we perform some disk I/O related task on UI and we see the following on the top right corner of the page:</p>
<p><img loading="lazy" alt="Error loading nexus3-strange-error.png" src="https://hashicorp-aws.com/assets/images/nexus3-strange-error-14e51be919fa76e974d9d3e1a46fc535.png" width="561" height="136" class="img_ev3q"></p>
<p>The error itself does not indicate any information about the nature of the error. We will then need to know more
details about the error by going down to the Nexus server log.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>In case Nexus is running as a Docker container, we need to jump into the container first by executing</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token builtin class-name">exec</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-it</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">nexus-container-name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where <code>nexus-container-name</code> can be seen using <code>docker ps -a</code></p></div></div>
<p>The log file we will be looking at, in the case of running inside Docker container, is located at
<code>/nexus-data/log/nexus.log</code></p>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_LWe7 sr-only" id="footnote-label">Footnotes<a href="https://hashicorp-aws.com/blog/nexus#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-example-002a79">
<p><code>format == "npm" or (format == "maven2" and path =~ "^/org/apache/commons/.*")</code> <a href="https://hashicorp-aws.com/blog/nexus#user-content-fnref-example-002a79" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section>]]></content>
        <author>
            <name>Jiaqi Liu</name>
            <uri>https://github.com/QubitPi</uri>
        </author>
        <category label="Nexus" term="Nexus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Continuous Delivery]]></title>
        <id>https://hashicorp-aws.com/blog/continuous-delivery</id>
        <link href="https://hashicorp-aws.com/blog/continuous-delivery"/>
        <updated>2022-08-31T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[[//]: # (Copyright Jiaqi Liu)]]></summary>
        <content type="html"><![CDATA[<p>Continuous delivery is an approach where teams release quality products frequently and predictably from source code
repository to production in an automated fashion.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-continuous-delivery">What is Continuous Delivery<a href="https://hashicorp-aws.com/blog/continuous-delivery#what-is-continuous-delivery" class="hash-link" aria-label="Direct link to What is Continuous Delivery" title="Direct link to What is Continuous Delivery">​</a></h2>
<p>Continuous Delivery is the ability to get changes of all types - including new features, configuration changes, bug
fixes and experiments - into production, or into the hands of users, <em>safely</em> and <em>quickly</em> in a <em>sustainable</em> way.</p>
<p>The goal of continuous delivery is to make deployments - whether of a large-scale distributed system, a complex
production environment, an embedded system, or an app - predictable, routine affairs that can be performed on demand.</p>
<p>We achieve all this by ensuring our code is always in a deployable state, even in the face of teams of thousands of
developers making changes on a daily basis. We thus completely eliminate the integration, testing and hardening phases
that traditionally followed "dev complete", as well as code freezes.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-continuous-delivery">Why Continuous Delivery<a href="https://hashicorp-aws.com/blog/continuous-delivery#why-continuous-delivery" class="hash-link" aria-label="Direct link to Why Continuous Delivery" title="Direct link to Why Continuous Delivery">​</a></h3>
<p>It is often assumed that if we want to deploy software more frequently, we must accept lower levels of stability and
reliability in our systems. In fact, peer-reviewed research shows that this is not the case. High performance teams
consistently deliver services faster and more reliably than their low performing competition. This is true even in
highly regulated domains such as <a href="https://www.youtube.com/watch?v=eMS97X5ZTGc" target="_blank" rel="noopener noreferrer">financial services</a> and
<a href="https://www.youtube.com/watch?v=QwHVlJtqhaI" target="_blank" rel="noopener noreferrer">government</a>. This capability provides an incredible competitive advantage
for organizations that are willing to invest the effort to pursue it.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><ul>
<li>Firms with high-performing IT organizations were twice as likely to exceed their profitability, market share and
productivity goals.</li>
<li>High performers achieved higher levels of both throughput and stability.</li>
<li>The use of continuous delivery practices including version control, continuous integration, and test automation
predicts higher IT performance.</li>
<li>Culture is measurable and predicts job satisfaction and organizational performance.</li>
<li>Continuous Delivery measurably reduces both deployment pain and team burnout.</li>
</ul></div></div>
<p>The practices at the heart of continuous delivery help us achieve several important benefits:</p>
<ul>
<li>
<p><strong>Low risk releases</strong>. The primary goal of continuous delivery is to make software deployments painless, low-risk
events that can be performed at any time, on demand. By applying <a href="https://hashicorp-aws.com/blog/continuous-delivery#patterns">patterns</a> such as <strong>blue-green
deployments</strong> it is relatively straightforward to achieve zero-downtime deployments that are undetectable to users.</p>
<p>:::info blue-green deployment</p>
<p><img loading="lazy" alt="Error loading blue-green-deployments.png " src="https://hashicorp-aws.com/assets/images/blue-green-deployments-5a0c344650154229cb4af876bd9f7f4a.png" width="953" height="607" class="img_ev3q"></p>
<p>One of the challenges with automating deployment is the cut-over itself, taking software from the final stage of
testing to live production. We usually need to do this quickly in order to minimize downtime. The blue-green
deployment approach does this by ensuring we have <strong>two production environments</strong>, as identical as possible. At any
time one of them, let's say blue for the example, is live. As we prepare a new release of our software we do our
final stage of testing in the green environment. Once the software is working in the green environment, we switch the
router so that all incoming requests go to the green environment - the blue one is now idle.</p>
<p>Blue-green deployment also gives us a rapid way to rollback - if anything goes wrong we switch the router back to
our blue environment. There's still the issue of dealing with missed transactions while the green environment was
live, but depending on our design we may be able to feed transactions to both environments in such a way as to keep
the blue environment as a backup when the green is live. Or we may be able to put the application in read-only mode
before cut-over, run it for a while in read-only mode, and then switch it to read-write mode. That may be enough to
flush out many outstanding issues.</p>
<p>The two environments need to be different but as identical as possible. In some situations they can be different
pieces of hardware, or they can be different virtual machines running on the same (or different) hardware. They can
also be a single operating environment partitioned into separate zones with separate IP addresses for the two slices.</p>
<p>Once we've put our green environment live and we're happy with its stability, we then use the blue environment as
our <strong>staging environment</strong> for the final testing step for our next deployment. When we are ready for our next
release, we switch from green to blue in the same way that we did from blue to green earlier. That way both green and
blue environments are regularly cycling between live, previous version (for rollback) and staging the next version.</p>
<p>An advantage of this approach is that it's the same basic mechanism as we need to get a hot-standby working. Hence
this allows us to test our disaster-recovery procedure on every release.</p>
<p>The fundamental idea is to have two easily switchable environments to switch between, there are plenty of ways to vary
the details. One project did the switch by bouncing the web server rather than working on the router. Another
variation would be to use the same database, making the blue-green switches for web and domain layers.</p>
<p>Databases can often be a challenge with this technique, particularly when we need to change the schema to support a
new version of the software. The trick is to <strong>separate the deployment of schema changes from application upgrades</strong>.
So first apply a database refactoring to change the schema to support both the new and old version of the application,
deploy that, check everything is working fine so we have a rollback point, then deploy the new version of the
application. (And when the upgrade has bedded down remove the database support for the old version.)
:::</p>
</li>
<li>
<p><strong>Faster time to market</strong>. It's common for the integration and test/fix phase of the traditional phased software
delivery lifecycle to consume weeks to even months. When teams work together to automate the build and deployment,
environment provisioning, and regression testing process, developers can incorporate integration and regression
testing into their daily work and completely remove these phases. We also avoid the large amount of re-work that
plague the phased approach.</p>
</li>
<li>
<p><strong>Higher quality and Better products</strong>. When developers have automated tools that discover regressions within minutes,
teams are freed to <strong>focus their effort on user research and higher level testing activities</strong> such as exploratory
testing, usability testing, and performance and security testing. By building a deployment pipeline, these activities
can be performed continuously throughout the delivery process, ensuring quality is built into products and services
from the beginning. Continuous delivery makes it economic to work in small batches. This means we can get feedback
from users throughout the delivery lifecycle based on working software.</p>
</li>
<li>
<p><strong>Lower costs</strong>. Any successful software product or service will evolve significantly over the course of its lifetime.
By investing in build, test, deployment and environment automation, we substantially reduce the cost of making and
delivering incremental changes to software by <strong>eliminating many of the fixed costs</strong> associated with the release
process.</p>
</li>
<li>
<p><strong>Happier teams</strong>. Continuous Delivery makes releases less painful and reduces team burnout. Furthermore, when we
release more frequently, software delivery teams can engage more actively with users, learn which ideas work and which
don't, and see first-hand then outcomes of the work they have done. By removing low-value painful activities
accociated with software delivery, we can fodus on what we care about most - continuous delighting our users.</p>
</li>
</ul>
<p><strong>Continuous delivery is about continuous, daily improvement - the constant discipline of pursuing higher performance by
following the heuristic "if it hurts, do it more often, and bring the pain forward."</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="principles">Principles<a href="https://hashicorp-aws.com/blog/continuous-delivery#principles" class="hash-link" aria-label="Direct link to Principles" title="Direct link to Principles">​</a></h2>
<p>There are five principles at the heart of continuous delivery:</p>
<ol>
<li>Build quality in</li>
<li>Work in small batches</li>
<li>Computers perform repetitive tasks, people solve problems</li>
<li>Relentlessly pursue continuous improvement</li>
<li>Everyone is responsible</li>
</ol>
<p>It's easy to get bogged down in the details of implementing continuous delivery - tools, architecture, practices,
politics - if you find yourself lost, try revisiting these principles and you may find it helps you refocus on what's
important.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-quality-in">Build Quality In<a href="https://hashicorp-aws.com/blog/continuous-delivery#build-quality-in" class="hash-link" aria-label="Direct link to Build Quality In" title="Direct link to Build Quality In">​</a></h3>
<p>W. Edwards Deming, a key figure in the history of the Lean movement, offered
<a href="https://deming.org/explore/fourteen-points" target="_blank" rel="noopener noreferrer">14 key principles</a> for management. Principle three states, "Cease
dependence on inspection to achieve quality. Eliminate the need for inspection on a mass basis by building quality into
the product in the first place".</p>
<p>It's much cheaper to fix problems and defects if we find them immediately - ideally before they are ever checked into
version control, by running automated tests locally. Finding defects downstream through inspection (such as manual
testing) is time-consuming, requiring significant triage. Then we must fix the defect, trying to recall what we were
thinking when we introduced the problem days or perhaps even weeks ago.</p>
<p>Creating and evolving feedback loops to detect problems as early as possible is essential and never-ending work in
continuous delivery. If we find a problem in our exploratory testing, we must not only fix it, but then ask: How could
we have caught the problem with an automated acceptance test? When an acceptance test fails, we should ask: Could we
have written a unit test to catch this problem?</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="work-in-small-batches">Work in Small Batches<a href="https://hashicorp-aws.com/blog/continuous-delivery#work-in-small-batches" class="hash-link" aria-label="Direct link to Work in Small Batches" title="Direct link to Work in Small Batches">​</a></h3>
<p>In traditional phased approaches to software development, handoffs from dev to test or test to IT operations consist of
whole releases: months worth of work by teams consisting of tens or hundreds of people.</p>
<p>In continuous delivery, we take the opposite approach, and try and get every change in version control as far towards
release as we can, getting comprehensive feedback as rapidly as possible.</p>
<p>Working in small batches has many benefits. It reduces the time it takes to get feedback on our work, makes it easier to
triage and remediate problems, increases efficiency and motivation, and prevents us from succumbing to the sunk cost
fallacy.</p>
<p>The reason we work in large batches is because of the large fixed cost of handing off changes. <strong>A key goal of
continuous delivery is to change the economics of the software delivery process to make it economically viable to work
in small batches so we can obtain the many benefits of this approach</strong>.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>A key goal of continuous delivery is to change the economics of the software delivery process to make it economically
viable to work in small batches so we can obtain the many benefits of this approach</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="relentlessly-pursue-continuous-improvement">Relentlessly Pursue Continuous Improvement<a href="https://hashicorp-aws.com/blog/continuous-delivery#relentlessly-pursue-continuous-improvement" class="hash-link" aria-label="Direct link to Relentlessly Pursue Continuous Improvement" title="Direct link to Relentlessly Pursue Continuous Improvement">​</a></h3>
<p>Continuous improvement, or <em>kaizen</em> in Japanese, is another key idea from the Lean movement.
<a href="http://www.amazon.com/dp/0071808019?tag=contindelive-20" target="_blank" rel="noopener noreferrer">Taiichi Ohno</a>, a key figure in the history of the Toyota
company, once said,</p>
<blockquote>
<p>"Kaizen opportunitites are infinite. Don't think you have made things better than before and be at ease… This would be
like the student who becomes proud because they bested their master two times out of three in fencing. Once you pick
up the sprouts of kaizen ideas, it is important to have the attitude in our daily work that just underneath one kaizen
idea is yet another one".</p>
</blockquote>
<p>Don't treat transformation as a project to be embarked on and then completed so we can return to business as usual. The
best organizations are those where everybody treats improvement work as an essential part of their daily work, and where
nobody is satisfied with the status quo.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="everyone-is-responsible">Everyone is Responsible<a href="https://hashicorp-aws.com/blog/continuous-delivery#everyone-is-responsible" class="hash-link" aria-label="Direct link to Everyone is Responsible" title="Direct link to Everyone is Responsible">​</a></h3>
<p>In high performing organizations, nothing is "somebody else's problem." Developers are responsible for the quality and
stability of the software they build. Operations teams are responsible for helping developers build quality in. Everyone
works together to achieve the organizational level goals, rather than optimizing for what’s best for their team or
department.</p>
<p>When people make local optimizations that reduce the overall performance of the organization, it's often due to systemic
problems such as poor management systems such as annual budgeting cycles, or incentives that reward the wrong behaviors.
A classic example is rewarding developers for increasing their velocity or writing more code, and rewarding testers
based on the number of bugs they find.</p>
<p>Most people want to do the right thing, but they will adapt their behaviour based on how they are rewarded. Therefore,
it is very important to create fast feedback loops from the things that really matter: how customers react to what we
build for them, and the impact on our organization.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="foundations---prerequisites-for-continuous-delivery">Foundations - Prerequisites for Continuous Delivery<a href="https://hashicorp-aws.com/blog/continuous-delivery#foundations---prerequisites-for-continuous-delivery" class="hash-link" aria-label="Direct link to Foundations - Prerequisites for Continuous Delivery" title="Direct link to Foundations - Prerequisites for Continuous Delivery">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-management">Configuration Management<a href="https://hashicorp-aws.com/blog/continuous-delivery#configuration-management" class="hash-link" aria-label="Direct link to Configuration Management" title="Direct link to Configuration Management">​</a></h3>
<p>Automation plays a vital role in ensuring we can release software repeatably and reliably. One key goal is to take
repetitive manual processes like build, deployment, regression testing and infrastructure provisioning, and automate
them. In order to achieve this, we need to version control everything required to perform these processes, including
source code, test and deployment scripts, infrastructure and application configuration information, and the many
libraries and packages we depend upon. We also want to make it straightforward to query the current -and historical -
state of our environments.</p>
<p>We have two overriding goals:</p>
<ol>
<li><strong>Reproducibility</strong>: We should be able to provision any environment in a fully automated fashion, and know that any
new environment reproduced from the same configuration is identical.</li>
<li><strong>Traceability</strong>: We should be able to pick any environment and be able to determine quickly and precisely the
versions of every dependency used to create that environment. We also want to be able to compare previous versions of
an environment and see what has changed between them.</li>
</ol>
<p>These capabilities give us several very important benefits:</p>
<ol>
<li><strong>Disaster recovery</strong>: When something goes wrong with one of our environments, for example a hardware failure or a
security breach, we need to be able to reproduce that environment in a deterministic amount of time in order to be
able to restore service.</li>
<li><strong>Auditability</strong>: In order to demonstrate the integrity of the delivery process, we need to be able to show the path
backwards from every deployment to the elements it came from, including their version. Comprehensive configuration
management, combined with deployment pipelines, enable this.</li>
<li><strong>Higher quality</strong>: The software delivery process is often subject to long delays waiting for development, testing
and production environments to be prepared. When this can be done automatically from version control, we can get
feedback on the impact of our changes much more rapidly, enabling us to build quality in to our software.</li>
<li><strong>Capacity management</strong>: When we want to add more capacity to our environments, the ability to create new
reproductions of existing servers is essential. This capability, using <a href="https://www.openstack.org/" target="_blank" rel="noopener noreferrer">OpenStack</a> for
example, enables the horizontal scaling of modern cloud-based distributed systems.</li>
<li><strong>Response to defects</strong>: When we discover a critical defect, or a vulnerability in some component of our system, we
want to get a new version of our software released as quickly as possible. Many organizations have an emergency
process for this type of change which goes faster by bypassing some of the testing and auditing. This presents an
especially serious dilemma in safety-critical systems. Our goal should be to be able to use our normal release
process for emergency fixes - which is precisely what continuous delivery enables, on the basis of comprehensive
configuration management.</li>
</ol>
<p>As environments become more complex and heterogeneous, it becomes progressively harder to achieve these goals. Achieving
perfect reproducibility and traceability to the last byte for a complex enterprise system is impossible (apart from
anything else, every real system has state). Thus a key part of configuration management is working to <strong>simplify our
architecture, environments and processes</strong> to reduce the investment required to achieve the desired benefits.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-management-learning-resources">Configuration Management Learning Resources<a href="https://hashicorp-aws.com/blog/continuous-delivery#configuration-management-learning-resources" class="hash-link" aria-label="Direct link to Configuration Management Learning Resources" title="Direct link to Configuration Management Learning Resources">​</a></h4>
<ul>
<li><a href="https://www.oreilly.com/library/view/infrastructure-as-code/9781491924334/" target="_blank" rel="noopener noreferrer">Infrastructure as Code</a></li>
<li><a href="http://www.infoq.com/presentations/scaling-operations-facebook" target="_blank" rel="noopener noreferrer">Pedro Canahuati on scaling operations at Facebook</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="continuous-integration">Continuous Integration<a href="https://hashicorp-aws.com/blog/continuous-delivery#continuous-integration" class="hash-link" aria-label="Direct link to Continuous Integration" title="Direct link to Continuous Integration">​</a></h3>
<p>Combining the work of multiple developers is hard. Software systems are complex, and an apparently simple,
self-contained change to a single file can easily have unintended consequences which compromise the correctness of the
system. As a result, some teams have developers work isolated from each other on their own branches, both to keep
trunk/master stable, and to prevent them treading on each other’s toes.</p>
<p>However, over time these branches diverge from each other. While merging a single one of these branches into mainline is
not usually troublesome, the work required to integrate multiple long-lived branches into mainline is usually painful,
requiring significant amounts of re-work as conflicting assumptions of developers are revealed and must be resolved.</p>
<p>Teams using long-lived branches often require code freezes, or even integration and stabilization phases, as they work
to integrate these branches prior to a release. Despite modern tooling, this process is still expensive and
unpredictable. On teams larger than a few developers, the integration of multiple branches requires multiple rounds of
regression testing and bug fixing to validate that the system will work as expected following these merges. This problem
becomes exponentially more severe as team sizes grow, and as branches become more long-lived.</p>
<p>The practice of continuous integration was invented to address these problems. CI (continuous integration) follows the
XP (extreme programming) principle that if something is painful, we should do it more often, and bring the pain forward.
Thus in CI developers integrate all their work into trunk (also known as mainline or master) on a regular basis (at
least daily). A set of automated tests is run both <strong>before and after</strong> the merge to validate that no regressions are
introduced. If these automated tests fail, the team stops what they are doing and someone fixes the problem immediately.</p>
<p>Thus we ensure that the software is always in a working state, and that developer branches do not diverge significantly
from trunk. The benefits of continuous integration are very significant - higher levels of throughput, more stable
systems, and higher quality software. However the practice is still controversial, for two main reasons.</p>
<p>First, it requires developers to break up large features and other changes into smaller, more incremental steps that can
be integrated into trunk/master. This is a paradigm shift for developers who are not used to working in this way. It also
takes longer to get large features completed. However in general we don't want to optimize for the speed at which
developers can declare their work "dev complete" on a branch. Rather, we want to be able to get changes reviewed,
integrated, tested and deployed as fast as possible - and this process is an order of magnitude faster and cheaper when
the changes are small and self-contained, and the branches they live on are short-lived. Working in small batches also
ensures developers get regular feedback on the impact of their work on the system as a whole - from other developers,
testers, customers, and automated performance and security tests—which in turn makes any problems easier to detect,
triage, and fix.</p>
<p>Second, continuous integration requires a fast-running set of comprehensive automated unit tests. These tests should be
comprehensive enough to give a good level of confidence that the software will work as expected, while also running in a
few minutes or less. If the automated unit tests take longer to run, developers will not want to run them frequently,
and they will become harder to maintain. Creating maintainable suites of automated unit tests is complex and is best done
through test-driven development (TDD), in which developers write failing automated tests before they implement the code
that makes the tests pass. TDD has several benefits, the most important of which is that it ensures developers write code
that is modular and easy to test, reducing the maintenance cost of the resulting automated test suites. But TDD is still
not sufficiently widely practiced.</p>
<p>Despite these barriers, <strong>helping software development teams implement continuous integration should be the number one
priority for any organization</strong> wanting to start the journey to continuous delivery. By creating rapid feedback loops
and ensuring developers work in small batches, CI enables teams to build quality into their software, thus reducing the
cost of ongoing software development, and increasing both the productivity of teams and the quality of the work they
produce.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="continuous-integration-learning-resources">Continuous Integration Learning Resources<a href="https://hashicorp-aws.com/blog/continuous-delivery#continuous-integration-learning-resources" class="hash-link" aria-label="Direct link to Continuous Integration Learning Resources" title="Direct link to Continuous Integration Learning Resources">​</a></h4>
<ul>
<li><a href="http://www.amazon.com/dp/0321336380?tag=contindelive-20" target="_blank" rel="noopener noreferrer">Paul Duvall's book on Continuous Integration</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="continuous-testing">Continuous Testing<a href="https://hashicorp-aws.com/blog/continuous-delivery#continuous-testing" class="hash-link" aria-label="Direct link to Continuous Testing" title="Direct link to Continuous Testing">​</a></h3>
<p>The key to building quality into our software is making sure we can get fast feedback on the impact of changes.
Traditionally, extensive use was made of manual inspection of code changes and manual testing (testers following
documentation describing the steps required to test the various functions of the system) in order to demonstrate the
correctness of the system. This type of testing was normally done in a phase following “dev complete”. However this
strategy have several drawbacks:</p>
<ul>
<li>Manual regression testing takes a long time and is relatively expensive to perform, creating a bottleneck that
prevents us releasing software more frequently, and getting feedback to developers weeks (and sometimes months) after
they wrote the code being tested.</li>
<li>Manual tests and inspections are not very reliable, since people are notoriously poor at performing repetitive tasks
such as regression testing manually, and it is extremely hard to predict the impact of a set of changes on a complex
software system through inspection.</li>
<li>When systems are evolving over time, as is the case in modern software products and services, we have to spend
considerable effort updating test documentation to keep it up-to-date.</li>
</ul>
<p>In order to build quality in to software, we need to adopt a
<a href="https://hashicorp-aws.com/blog/continuous-delivery#different-types-of-software-testing">different approach</a>.</p>
<p>The more features and improvements go into our code, the more we'll need to test to make sure that all our system works
properly. And then for each bug we fix, it would be wise to check that they don't get back in newer releases.
Automation is key to make this possible and writing tests sooner rather than later will become part of our development
workflow.</p>
<p>Once we have continuous integration and test automation in place, we create a
<a href="https://hashicorp-aws.com/blog/continuous-delivery#the-deployment-pipeline">deployment pipeline</a>. In the deployment pipeline pattern, every change runs a build that</p>
<ul>
<li>creates packages that can be deployed to any environment and</li>
<li>runs unit tests (and possibly other tasks such as static analysis), giving feedback to developers in the space of a
few minutes.</li>
</ul>
<p>Packages that pass this set of tests have more comprehensive automated acceptance tests run against them. Once we have
packages that pass all the automated tests, they are available for deplyment to other environments.</p>
<p>In the deployment pipeline, every change is effectively a release candidate. The job of the deployment pipeline is to
catch known issues. If we can't detect any known problems, we should feel totally comfortable releasing any packages
that have gone through it. If we aren't, or if we discover defects later, it means we need to improve our pipeline,
perhaps adding or updating some tests.</p>
<p>Our goal should be to find problems as soon as possible, and make the lead time from check-in to release as short as
possible. Thus we want to parallelize the activities in the deployment pipeline, not have many stages executing in
series. If we discover a defect in the acceptance tests, we should be looking to improve our unit tests (most of our
defects should be discovered through unit testing).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="different-types-of-software-testing">Different Types of Software Testing<a href="https://hashicorp-aws.com/blog/continuous-delivery#different-types-of-software-testing" class="hash-link" aria-label="Direct link to Different Types of Software Testing" title="Direct link to Different Types of Software Testing">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="unit-tests">Unit Tests<a href="https://hashicorp-aws.com/blog/continuous-delivery#unit-tests" class="hash-link" aria-label="Direct link to Unit Tests" title="Direct link to Unit Tests">​</a></h5>
<p>Unit tests are very low level and close to the source of an application. They consist in testing individual methods and
functions of the classes, components, or modules used by our software. Unit tests are generally quite cheap to automate
and can run very quickly by a continuous integration server.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="integration-tests">Integration Tests<a href="https://hashicorp-aws.com/blog/continuous-delivery#integration-tests" class="hash-link" aria-label="Direct link to Integration Tests" title="Direct link to Integration Tests">​</a></h5>
<p>Integration tests verify that different modules or services used by our application work well together. For example, it
can be testing the interaction with the database or making sure that microservices work together as expected. These
types of tests are more expensive to run as they require multiple parts of the application to be up and running.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="functional-tests">Functional Tests<a href="https://hashicorp-aws.com/blog/continuous-delivery#functional-tests" class="hash-link" aria-label="Direct link to Functional Tests" title="Direct link to Functional Tests">​</a></h5>
<p>Functional tests focus on the business requirements of an application. They only verify the output of an action and do
not check the intermediate states of the system when performing that action.</p>
<p>There is sometimes a confusion between integration tests and functional tests as they both require multiple components
to interact with each other. The difference is that an integration test may simply verify that we can query the
database while a functional test would expect to get a specific value from the database as defined by the product
requirements.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="end-to-end-tests">End-to-End Tests<a href="https://hashicorp-aws.com/blog/continuous-delivery#end-to-end-tests" class="hash-link" aria-label="Direct link to End-to-End Tests" title="Direct link to End-to-End Tests">​</a></h5>
<p>End-to-end testing replicates a user behavior with the software in a complete application environment. It verifies that
various user flows work as expected and can be as simple as loading a web page or logging in or much more complex
scenarios verifying email notifications, online payments, etc...</p>
<p>End-to-end tests are very useful, but they're expensive to perform and can be hard to maintain when they're automated.
It is recommended to have a few key end-to-end tests and rely more on lower level types of testing (unit and
integration tests) to be able to quickly identify breaking changes.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="acceptance-tests">Acceptance Tests<a href="https://hashicorp-aws.com/blog/continuous-delivery#acceptance-tests" class="hash-link" aria-label="Direct link to Acceptance Tests" title="Direct link to Acceptance Tests">​</a></h5>
<p>Acceptance tests are formal tests that verify if a system satisfies business requirements. They require the entire
application to be running while testing and focus on replicating user behaviors. But they can also go further and
measure the performance of the system and reject changes if certain goals are not met.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="performance-tests">Performance Tests<a href="https://hashicorp-aws.com/blog/continuous-delivery#performance-tests" class="hash-link" aria-label="Direct link to Performance Tests" title="Direct link to Performance Tests">​</a></h5>
<p>Performance tests evaluate how a system performs under a particular workload. These tests help to measure the
reliability, speed, scalability, and responsiveness of an application. For instance, a performance test can observe
response times when executing a high number of requests, or determine how a system behaves with a significant amount of
data. It can determine if an application meets performance requirements, locate bottlenecks, measure stability during
peak traffic, and more.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="smoke-tests">Smoke Tests<a href="https://hashicorp-aws.com/blog/continuous-delivery#smoke-tests" class="hash-link" aria-label="Direct link to Smoke Tests" title="Direct link to Smoke Tests">​</a></h5>
<p>Smoke tests are basic tests that check the basic functionality of an application. They are meant to be quick to
execute, and their goal is to give us the assurance that the major features of our system are working as expected.</p>
<p>Smoke tests can be useful right after a new build is made to decide whether or not we can run more expensive tests, or
right after a deployment to make sure that they application is running properly in the newly deployed environment.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="implementing-continuous-delivery">Implementing Continuous Delivery<a href="https://hashicorp-aws.com/blog/continuous-delivery#implementing-continuous-delivery" class="hash-link" aria-label="Direct link to Implementing Continuous Delivery" title="Direct link to Implementing Continuous Delivery">​</a></h2>
<p>Organizations attempting to deploy continuous delivery tend to make two common mistakes. The first is to treat
continuous delivery as an end-state, a goal in itself. The second is to spend a lot of time and energy worrying about
what products to use.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="evolutionary-architecture">Evolutionary Architecture<a href="https://hashicorp-aws.com/blog/continuous-delivery#evolutionary-architecture" class="hash-link" aria-label="Direct link to Evolutionary Architecture" title="Direct link to Evolutionary Architecture">​</a></h3>
<p>In the context of enterprise architecture there are typically multiple attributes we are concerned about, for example
availability, security, performance, usability and so forth. In continuous delivery, we introduce two new architectural
attributes:</p>
<ol>
<li><strong>testability</strong></li>
<li><strong>deployability</strong></li>
</ol>
<p>In a <em>testable</em> architecture, we design our software such that most defects can (in principle, at least) be discovered
by developers by running automated tests on their workstations. We shouldn’t need to depend on complex, integrated
environments in order to do the majority of our acceptance and regression testing.</p>
<p>In a <em>deployable</em> architecture, deployments of a particular product or service can be performed independently and in a
fully automated fashion, without the need for significant levels of orchestration. Deployable systems can typically be
upgraded or reconfigured with zero or minimal downtime.</p>
<p>Where testability and deployability are not prioritized, we find that much testing requires the use of complex,
integrated environments, and deployments are "big bang" events that require that many services are released at the same
time due to complex interdependencies. These "big bang" deployments require many teams to work together in a carefully
orchestrated fashion with many hand-offs, and dependencies between hundreds or thousands of tasks. Such deployments
typically take many hours or even days, and require scheduling significant downtime.</p>
<p>Designing for testability and deployability starts with ensuring our products and services are composed of
loosely-coupled, well-encapsulated components or modules</p>
<p>We can define a well-designed modular architecture as one in which it is possible to test or deploy a single component
or service on its own, with any dependencies replaced by a suitable test double, which could be in the form of a virtual
machine, a stub, or a mock. Each component or service should be deployable in a fully automated fashion on developer
workstations, test environments, or in production. In a well-designed architecture, it is possible to get a high level of
confidence the component is operating properly when deployed in this fashion.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Test Double</div><div class="admonitionContent_BuS1"><p>Test Double is a generic term for any case where you replace a production object for testing purposes. There are various
kinds of double:</p><ul>
<li><strong>Dummy</strong> objects are passed around but never actually used. Usually they are just used to fill parameter lists.</li>
<li><strong>Fake</strong> objects actually have working implementations, but usually take some shortcut which makes them not suitable
for production (an InMemoryTestDatabase is a good example).</li>
<li><strong>Stubs</strong> provide canned answers to calls made during the test, usually not responding at all to anything outside
what's programmed in for the test.</li>
<li><strong>Spies</strong> are stubs that also record some information based on how they were called. One form of this might be an email
service that records how many messages it was sent.</li>
<li><strong>Mocks</strong> are pre-programmed with expectations which form a specification of the calls they are expected to receive.
They can throw an exception if they receive a call they don't expect and are checked during verification to ensure
they got all the calls they were expecting.</li>
</ul></div></div>
<p>Any true service-oriented architecture should have these properties—but unfortunately many do not. However, the
microservices movement has explicitly prioritized these architectural properties.</p>
<p>Of course, many organizations are living in a world where services are distinctly hard to test and deploy. Rather than
re-architecting everything, we recommend an iterative approach to improving the design of enterprise system, sometimes
known as evolutionary architecture. In the evolutionary architecture paradigm, we accept that successful products and
services will require re-architecting during their lifecycle due to the changing requirements placed on them.</p>
<p>One pattern that is particularly valuable in this context is the strangler application. In this pattern, we iteratively
replace a monolithic architecture with a more componentized one by ensuring that new work is done following the
principles of a service-oriented architecture, while accepting that the new architecture may well delegate to the system
it is replacing. Over time, more and more functionality will be performed in the new architecture, and the old system
being replaced is "strangled".</p>
<p><img loading="lazy" src="https://hashicorp-aws.com/assets/images/strangler-a317ed534afb581ac45d77ac9a89616a.png" width="1458" height="748" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="patterns">Patterns<a href="https://hashicorp-aws.com/blog/continuous-delivery#patterns" class="hash-link" aria-label="Direct link to Patterns" title="Direct link to Patterns">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="the-deployment-pipeline">The Deployment Pipeline<a href="https://hashicorp-aws.com/blog/continuous-delivery#the-deployment-pipeline" class="hash-link" aria-label="Direct link to The Deployment Pipeline" title="Direct link to The Deployment Pipeline">​</a></h4>
<p>The key pattern introduced in continuous delivery is the <strong>deployment pipeline</strong>. Our goal was to make deployment to any
environment a fully automated, scripted process that could be performed on demand in minutes. We wanted to be able to
configure testing and production environments purely from configuration files stored in version control. The apparatus
we used to perform these tasks became known as <em>deployment pipelines</em></p>
<p>In the deployment pipeline pattern, every change in version control triggers a process (usually in a CI server) which
creates deployable packages and runs automated unit tests and other validations such as static code analysis. This first
step is optimized so that it takes only a few minutes to run. If this initial commit stage fails, the problem must be
fixed immediately; nobody should check in more work on a broken commit stage. Every passing commit stage triggers the
next step in the pipeline, which might consist of a more comprehensive set of automated tests. Versions of the software
that pass all the automated tests can then be deployed to production.</p>
<p>Deployment pipelines tie together <a href="https://hashicorp-aws.com/blog/continuous-delivery#configuration-management">configuration management</a>,
<a href="https://hashicorp-aws.com/blog/continuous-delivery#continuous-integration">continuous integration</a> and <a href="https://hashicorp-aws.com/blog/continuous-delivery#continuous-testing">test</a> and deployment automation in a
holistic, powerful way that works to improve software quality, increase stability, and reduce the time and cost required
to make incremental changes to software, whatever domain we're operating in. When building a deployment pipeline, the
following practices become valuable:</p>
<ul>
<li><strong>Only build packages once</strong>. We want to be sure the thing we're deploying is the same thing we've tested throughout
the deployment pipeline, so if a deployment fails we can eliminate the packages as the source of the failure.</li>
<li><strong>Deploy the same way to every environment, including development</strong>. This way, we test the deployment process many,
many times before it gets to production, and again, we can eliminate it as the source of any problems.</li>
<li><strong>Smoke test your deployments</strong>. Have a script that validates all your application's dependencies are available, at
the location you have configured your application. Make sure your application is running and available as part of the
deployment process.</li>
<li><strong>Keep your environments similar</strong>. Although they may differ in hardware configuration, they should have the same
version of the operating system and middleware packages, and they should be configured in the same way. This has
become much easier to achieve with modern virtualization and container technology.</li>
</ul>
<p>With the advent of infrastructure as code, it has became possible to use deployment pipelines to create a fully
automated process for taking all kinds of changes—including database and infrastructure changes</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="patterns-for-low-risk-releases">Patterns for Low-Risk Releases<a href="https://hashicorp-aws.com/blog/continuous-delivery#patterns-for-low-risk-releases" class="hash-link" aria-label="Direct link to Patterns for Low-Risk Releases" title="Direct link to Patterns for Low-Risk Releases">​</a></h3>
<p>In the context of web-based systems there are a number of patterns that can be applied to further reduce the risk of
deployments. Michael Nygard also describes a number of important software design patterns which are instrumental in
creating resilient large-scale systems in his book
<a href="http://www.amazon.com/dp/0978739213?tag=contindelive-20" target="_blank" rel="noopener noreferrer">Release It!</a></p>
<p>The 3 key principles that enable low-risk releases are</p>
<ol>
<li><strong>Optimize for Resilience</strong>. Once we accept that failures are inevitable, we should start to move away from the idea
of investing all our effort in preventing problems, and think instead about how to restore service as rapidly as
possible when something goes wrong. Furthermore, when an accident occurs, we should treat it as a learning
opportunity. Resilience isn't just a feature of our systems, it's a characteristic of a team's culture. High
performance organizations are constantly working to improve the resilience of their systems by trying to break them
and implementing the lessons learned in the course of doing so.</li>
<li><strong>Low-risk Releases are Incremental</strong>. Our goal is to architect our systems such that we can release individual
changes (including database changes) independently, rather than having to orchestrate big-bang releases due to tight
coupling between multiple different systems.</li>
<li><strong>Focus on Reducing Batch Size</strong>. Counterintuitively, deploying to production more frequently actually reduces the
risk of release when done properly, simply because the amount of change in each deployment is smaller. When each
deployment consists of tens of lines of code or a few configuration settings, it becomes much easier to perform root
cause analysis and restore service in the case of an incident. Furthermore, because we practice the deployment
process so frequently, we’re forced to simplify and automate it which further reduces risk.</li>
</ol>]]></content>
        <author>
            <name>continuousdelivery.com</name>
            <uri>https://continuousdelivery.com/</uri>
        </author>
        <author>
            <name>Jiaqi Liu</name>
            <uri>https://github.com/QubitPi</uri>
        </author>
        <author>
            <name>Sten Pittet</name>
            <uri>https://www.atlassian.com/continuous-delivery/software-testing/types-of-software-testing</uri>
        </author>
        <category label="Continuous Delivery" term="Continuous Delivery"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Deploying v.s. Releasing]]></title>
        <id>https://hashicorp-aws.com/blog/deploying-vs-releasing</id>
        <link href="https://hashicorp-aws.com/blog/deploying-vs-releasing"/>
        <updated>2022-08-29T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[[//]: # (Copyright Jiaqi Liu)]]></summary>
        <content type="html"><![CDATA[<p>The key distinction between deployment and release is the business rationale. Deployment doesn't necessarily mean users
have access to features. Some companies will release at the same time as deployment to production is taking place.</p>
<p>Others will choose to wait, thereby having the new features in production but not availed to users until the business
decides.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-deployment">What is Deployment<a href="https://hashicorp-aws.com/blog/deploying-vs-releasing#what-is-deployment" class="hash-link" aria-label="Direct link to What is Deployment" title="Direct link to What is Deployment">​</a></h2>
<p>Deployment involves moving software from one controlled environment to another. <strong>An environment is a subset of IT
infrastructure used for a particular purpose</strong>. The most common environments are:</p>
<ul>
<li><strong>Development</strong>. Commonly referred to as <em>dev</em>, this is where developers build the code.</li>
<li><strong>Integration</strong>. Here, the new code is combined and validated that it works with existing code.</li>
<li><strong>Test</strong>. This is where both functional and non-functional tests are conducted on the merged code to confirm it meets
organization and customer requirements.</li>
<li><strong>Staging</strong>. This environment is used to test the software using real data to validate it is ready for use.</li>
<li><strong>Production</strong>. Commonly referred to as prod, this is where the software is made available to users.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-software-release">What is Software Release<a href="https://hashicorp-aws.com/blog/deploying-vs-releasing#what-is-software-release" class="hash-link" aria-label="Direct link to What is Software Release" title="Direct link to What is Software Release">​</a></h2>
<p>A release is <strong>a collection of one or more new or changed services or service components deployed into the live
environment as a result of one or more changes</strong></p>
<p>In other words, a release makes services and features available to users. More often than not,
<a href="https://www.bmc.com/blogs/devops-release-management/" target="_blank" rel="noopener noreferrer">release management</a> is more of a business responsibility than a
technical responsibility. This is because the decisions on scheduling releases can be tied to business strategy from a
revenue or portfolio management perspective.</p>]]></content>
        <author>
            <name>Joseph Mathenge</name>
            <uri>https://www.bmc.com/blogs/software-deployment-vs-release/</uri>
        </author>
        <author>
            <name>Jiaqi Liu</name>
            <uri>https://github.com/QubitPi</uri>
        </author>
        <category label="Continuous Delivery" term="Continuous Delivery"/>
    </entry>
</feed>